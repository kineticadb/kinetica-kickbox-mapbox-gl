!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.kickbox=e():t.kickbox=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=101)}([function(t,e){var r=Array.isArray;t.exports=r},function(t,e,r){"use strict";function n(t){return"[object Array]"===E.call(t)}function o(t){return"[object ArrayBuffer]"===E.call(t)}function i(t){return"undefined"!=typeof FormData&&t instanceof FormData}function u(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer}function a(t){return"string"==typeof t}function c(t){return"number"==typeof t}function s(t){return void 0===t}function f(t){return null!==t&&"object"==typeof t}function l(t){return"[object Date]"===E.call(t)}function d(t){return"[object File]"===E.call(t)}function p(t){return"[object Blob]"===E.call(t)}function h(t){return"[object Function]"===E.call(t)}function v(t){return f(t)&&h(t.pipe)}function g(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams}function y(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}function m(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function _(t,e){if(null!==t&&void 0!==t)if("object"!=typeof t&&(t=[t]),n(t))for(var r=0,o=t.length;r<o;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function b(){function t(t,r){"object"==typeof e[r]&&"object"==typeof t?e[r]=b(e[r],t):e[r]=t}for(var e={},r=0,n=arguments.length;r<n;r++)_(arguments[r],t);return e}function w(t,e,r){return _(e,function(e,n){t[n]=r&&"function"==typeof e?x(e,r):e}),t}var x=r(58),A=r(104),E=Object.prototype.toString;t.exports={isArray:n,isArrayBuffer:o,isBuffer:A,isFormData:i,isArrayBufferView:u,isString:a,isNumber:c,isObject:f,isUndefined:s,isDate:l,isFile:d,isBlob:p,isFunction:h,isStream:v,isURLSearchParams:g,isStandardBrowserEnv:m,forEach:_,merge:b,extend:w,trim:y}},function(t,e){function r(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=r},function(t,e,r){var n=r(64),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();t.exports=i},function(t,e){function r(t){return null!=t&&"object"==typeof t}t.exports=r},function(t,e,r){"use strict";function n(t){return l[t]}function o(t){for(var e=1;e<arguments.length;e++)for(var r in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],r)&&(t[r]=arguments[e][r]);return t}function i(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function u(t){if("string"!=typeof t){if(t&&t.toHTML)return t.toHTML();if(null==t)return"";if(!t)return t+"";t=""+t}return p.test(t)?t.replace(d,n):t}function a(t){return!t&&0!==t||!(!g(t)||0!==t.length)}function c(t){var e=o({},t);return e._parent=t,e}function s(t,e){return t.path=e,t}function f(t,e){return(t?t+".":"")+e}e.__esModule=!0,e.extend=o,e.indexOf=i,e.escapeExpression=u,e.isEmpty=a,e.createFrame=c,e.blockParams=s,e.appendContextPath=f;var l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},d=/[&<>"'`=]/g,p=/[&<>"'`=]/,h=Object.prototype.toString;e.toString=h;var v=function(t){return"function"==typeof t};v(/x/)&&(e.isFunction=v=function(t){return"function"==typeof t&&"[object Function]"===h.call(t)}),e.isFunction=v;var g=Array.isArray||function(t){return!(!t||"object"!=typeof t)&&"[object Array]"===h.call(t)};e.isArray=g},function(t,e,r){"use strict";function n(t,e,r){if(r=r||{},!j(r))throw new Error("options is invalid");var n=r.bbox,o=r.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");n&&T(n),0!==o&&o&&O(o);var i={type:"Feature"};return(0===o||o)&&(i.id=o),n&&(i.bbox=n),i.properties=e||{},i.geometry=t,i}function o(t,e,r){if(r=r||{},!j(r))throw new Error("options is invalid");var n=r.bbox;if(!t)throw new Error("type is required");if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");n&&T(n);var o;switch(t){case"Point":o=i(e).geometry;break;case"LineString":o=s(e).geometry;break;case"Polygon":o=a(e).geometry;break;case"MultiPoint":o=p(e).geometry;break;case"MultiLineString":o=d(e).geometry;break;case"MultiPolygon":o=h(e).geometry;break;default:throw new Error(t+" is invalid")}return n&&(o.bbox=n),o}function i(t,e,r){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!S(t[0])||!S(t[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:t},e,r)}function u(t,e,r){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return l(t.map(function(t){return i(t,e)}),r)}function a(t,e,r){if(!t)throw new Error("coordinates is required");for(var o=0;o<t.length;o++){var i=t[o];if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var u=0;u<i[i.length-1].length;u++){if(0===o&&0===u&&!S(i[0][0])||!S(i[0][1]))throw new Error("coordinates must contain numbers");if(i[i.length-1][u]!==i[0][u])throw new Error("First and last Position are not equivalent.")}}return n({type:"Polygon",coordinates:t},e,r)}function c(t,e,r){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return l(t.map(function(t){return a(t,e)}),r)}function s(t,e,r){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!S(t[0][1])||!S(t[0][1]))throw new Error("coordinates must contain numbers");return n({type:"LineString",coordinates:t},e,r)}function f(t,e,r){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return l(t.map(function(t){return s(t,e)}),r)}function l(t,e){if(e=e||{},!j(e))throw new Error("options is invalid");var r=e.bbox,n=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");r&&T(r),n&&O(n);var o={type:"FeatureCollection"};return n&&(o.id=n),r&&(o.bbox=r),o.features=t,o}function d(t,e,r){if(!t)throw new Error("coordinates is required");return n({type:"MultiLineString",coordinates:t},e,r)}function p(t,e,r){if(!t)throw new Error("coordinates is required");return n({type:"MultiPoint",coordinates:t},e,r)}function h(t,e,r){if(!t)throw new Error("coordinates is required");return n({type:"MultiPolygon",coordinates:t},e,r)}function v(t,e,r){if(!t)throw new Error("geometries is required");if(!Array.isArray(t))throw new Error("geometries must be an Array");return n({type:"GeometryCollection",geometries:t},e,r)}function g(t,e){if(void 0===t||null===t||isNaN(t))throw new Error("num is required");if(e&&!(e>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,e||0);return Math.round(t*r)/r}function y(t,e){if(void 0===t||null===t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var r=F[e||"kilometers"];if(!r)throw new Error(e+" units is invalid");return t*r}function m(t,e){if(void 0===t||null===t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var r=F[e||"kilometers"];if(!r)throw new Error(e+" units is invalid");return t/r}function _(t,e){return w(m(t,e))}function b(t){if(null===t||void 0===t)throw new Error("bearing is required");var e=t%360;return e<0&&(e+=360),e}function w(t){if(null===t||void 0===t)throw new Error("radians is required");return t%(2*Math.PI)*180/Math.PI}function x(t){if(null===t||void 0===t)throw new Error("degrees is required");return t%360*Math.PI/180}function A(t,e,r){if(null===t||void 0===t)throw new Error("length is required");if(!(t>=0))throw new Error("length must be a positive number");return y(m(t,e),r||"kilometers")}function E(t,e,r){if(null===t||void 0===t)throw new Error("area is required");if(!(t>=0))throw new Error("area must be a positive number");var n=B[e||"meters"];if(!n)throw new Error("invalid original units");var o=B[r||"kilometers"];if(!o)throw new Error("invalid final units");return t/n*o}function S(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function j(t){return!!t&&t.constructor===Object}function T(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!S(t))throw new Error("bbox must only contain numbers")})}function O(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function L(){throw new Error("method has been renamed to `radiansToDegrees`")}function R(){throw new Error("method has been renamed to `degreesToRadians`")}function C(){throw new Error("method has been renamed to `lengthToDegrees`")}function I(){throw new Error("method has been renamed to `lengthToRadians`")}function P(){throw new Error("method has been renamed to `radiansToLength`")}function M(){throw new Error("method has been renamed to `bearingToAzimuth`")}function N(){throw new Error("method has been renamed to `convertLength`")}Object.defineProperty(e,"__esModule",{value:!0}),r.d(e,"earthRadius",function(){return k}),r.d(e,"factors",function(){return F}),r.d(e,"unitsFactors",function(){return D}),r.d(e,"areaFactors",function(){return B}),e.feature=n,e.geometry=o,e.point=i,e.points=u,e.polygon=a,e.polygons=c,e.lineString=s,e.lineStrings=f,e.featureCollection=l,e.multiLineString=d,e.multiPoint=p,e.multiPolygon=h,e.geometryCollection=v,e.round=g,e.radiansToLength=y,e.lengthToRadians=m,e.lengthToDegrees=_,e.bearingToAzimuth=b,e.radiansToDegrees=w,e.degreesToRadians=x,e.convertLength=A,e.convertArea=E,e.isNumber=S,e.isObject=j,e.validateBBox=T,e.validateId=O,e.radians2degrees=L,e.degrees2radians=R,e.distanceToDegrees=C,e.distanceToRadians=I,e.radiansToDistance=P,e.bearingToAngle=M,e.convertDistance=N;var k=6371008.8,F={meters:k,metres:k,millimeters:1e3*k,millimetres:1e3*k,centimeters:100*k,centimetres:100*k,kilometers:k/1e3,kilometres:k/1e3,miles:k/1609.344,nauticalmiles:k/1852,inches:39.37*k,yards:k/1.0936,feet:3.28084*k,radians:1,degrees:k/111325},D={meters:1,metres:1,millimeters:1e3,millimetres:1e3,centimeters:100,centimetres:100,kilometers:.001,kilometres:.001,miles:1/1609.344,nauticalmiles:1/1852,inches:39.37,yards:1/1.0936,feet:3.28084,radians:1/k,degrees:1/111325},B={meters:1,metres:1,millimeters:1e6,millimetres:1e6,centimeters:1e4,centimetres:1e4,kilometers:1e-6,kilometres:1e-6,acres:247105e-9,miles:3.86e-7,yards:1.195990046,feet:10.763910417,inches:1550.003100006}},function(t,e,r){function n(t,e){var r=i(t,e);return o(r)?r:void 0}var o=r(132),i=r(137);t.exports=n},function(t,e,r){function n(t){return null!=t&&i(t.length)&&!o(t)}var o=r(40),i=r(46);t.exports=n},function(t,e,r){function n(t){return"function"==typeof t?t:null==t?u:"object"==typeof t?a(t)?i(t[0],t[1]):o(t):c(t)}var o=r(202),i=r(215),u=r(36),a=r(0),c=r(219);t.exports=n},function(t,e,r){"use strict";function n(){f=!1}function o(){f=!0}function i(){if(!s&&f){var t;(t=console).log.apply(t,arguments)}}function u(){if(!s&&f){var t;(t=console).warn.apply(t,arguments)}}function a(){if(!s&&f){var t;(t=console).error.apply(t,arguments)}}function c(){if(!s&&f){var t;(t=console).debug.apply(t,arguments)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=!1,f=!0;"undefined"!=typeof ENV_TESTING&&!0===ENV_TESTING&&(s=!0);var l={disableLogging:n,enableLogging:o,log:i,warn:u,error:a,debug:c};e.default=l},function(t,e,r){function n(t){return null==t?void 0===t?c:a:s&&s in Object(t)?i(t):u(t)}var o=r(12),i=r(133),u=r(134),a="[object Null]",c="[object Undefined]",s=o?o.toStringTag:void 0;t.exports=n},function(t,e,r){var n=r(3),o=n.Symbol;t.exports=o},function(t,e,r){function n(t,e,r,n){var u=!r;r||(r={});for(var a=-1,c=e.length;++a<c;){var s=e[a],f=n?n(r[s],t[s],s,r,t):void 0;void 0===f&&(f=t[s]),u?i(r,s,f):o(r,s,f)}return r}var o=r(43),i=r(44);t.exports=n},function(t,e,r){function n(t){return u(t)?o(t):i(t)}var o=r(68),i=r(155),u=r(8);t.exports=n},function(t,e,r){function n(t){if("string"==typeof t||o(t))return t;var e=t+"";return"0"==e&&1/t==-i?"-0":e}var o=r(20),i=1/0;t.exports=n},function(t,e,r){function n(t){return o(t,i|u)}var o=r(121),i=1,u=4;t.exports=n},function(t,e){function r(t,e){return t===e||t!==t&&e!==e}t.exports=r},function(t,e){function r(t,e){var r=typeof t;return!!(e=null==e?n:e)&&("number"==r||"symbol"!=r&&o.test(t))&&t>-1&&t%1==0&&t<e}var n=9007199254740991,o=/^(?:0|[1-9]\d*)$/;t.exports=r},function(t,e,r){function n(t){return u(t)?o(t,!0):i(t)}var o=r(68),i=r(158),u=r(8);t.exports=n},function(t,e,r){function n(t){return"symbol"==typeof t||i(t)&&o(t)==u}var o=r(11),i=r(4),u="[object Symbol]";t.exports=n},function(t,e,r){function n(t,e){return(a(t)?o:i)(t,u(e))}var o=r(66),i=r(85),u=r(200),a=r(0);t.exports=n},function(t,e,r){"use strict";function n(t,e){var r=e&&e.loc,i=void 0,u=void 0;r&&(i=r.start.line,u=r.start.column,t+=" - "+i+":"+u);for(var a=Error.prototype.constructor.call(this,t),c=0;c<o.length;c++)this[o[c]]=a[o[c]];Error.captureStackTrace&&Error.captureStackTrace(this,n);try{r&&(this.lineNumber=i,Object.defineProperty?Object.defineProperty(this,"column",{value:u,enumerable:!0}):this.column=u)}catch(t){}}e.__esModule=!0;var o=["description","fileName","lineNumber","message","name","number","stack"];n.prototype=new Error,e.default=n,t.exports=e.default},function(t,e,r){t.exports=r(103)},function(t,e,r){function n(t){var e=this.__data__=new o(t);this.size=e.size}var o=r(25),i=r(127),u=r(128),a=r(129),c=r(130),s=r(131);n.prototype.clear=i,n.prototype.delete=u,n.prototype.get=a,n.prototype.has=c,n.prototype.set=s,t.exports=n},function(t,e,r){function n(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}var o=r(122),i=r(123),u=r(124),a=r(125),c=r(126);n.prototype.clear=o,n.prototype.delete=i,n.prototype.get=u,n.prototype.has=a,n.prototype.set=c,t.exports=n},function(t,e,r){function n(t,e){for(var r=t.length;r--;)if(o(t[r][0],e))return r;return-1}var o=r(17);t.exports=n},function(t,e,r){var n=r(7),o=n(Object,"create");t.exports=o},function(t,e,r){function n(t,e){var r=t.__data__;return o(e)?r["string"==typeof e?"string":"hash"]:r.map}var o=r(146);t.exports=n},function(t,e,r){var n=r(152),o=r(4),i=Object.prototype,u=i.hasOwnProperty,a=i.propertyIsEnumerable,c=n(function(){return arguments}())?n:function(t){return o(t)&&u.call(t,"callee")&&!a.call(t,"callee")};t.exports=c},function(t,e,r){(function(t){var n=r(3),o=r(153),i="object"==typeof e&&e&&!e.nodeType&&e,u=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=u&&u.exports===i,c=a?n.Buffer:void 0,s=c?c.isBuffer:void 0,f=s||o;t.exports=f}).call(e,r(31)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){function r(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}t.exports=r},function(t,e,r){var n=r(164),o=r(39),i=r(165),u=r(166),a=r(167),c=r(11),s=r(65),f=s(n),l=s(o),d=s(i),p=s(u),h=s(a),v=c;(n&&"[object DataView]"!=v(new n(new ArrayBuffer(1)))||o&&"[object Map]"!=v(new o)||i&&"[object Promise]"!=v(i.resolve())||u&&"[object Set]"!=v(new u)||a&&"[object WeakMap]"!=v(new a))&&(v=function(t){var e=c(t),r="[object Object]"==e?t.constructor:void 0,n=r?s(r):"";if(n)switch(n){case f:return"[object DataView]";case l:return"[object Map]";case d:return"[object Promise]";case p:return"[object Set]";case h:return"[object WeakMap]"}return e}),t.exports=v},function(t,e,r){function n(t,e,r){var n=null==t?void 0:o(t,e);return void 0===n?r:n}var o=r(54);t.exports=n},function(t,e,r){function n(t,e){return o(t)?t:i(t,e)?[t]:u(a(t))}var o=r(0),i=r(55),u=r(178),a=r(181);t.exports=n},function(t,e){function r(t){return t}t.exports=r},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t){var e={table_name:t.tableName,options:{}};return t.geoAttr?(e.column_name=t.geoAttr,C.default.post("".concat(t.kineticaUrl,"/aggregate/minmax/geometry"),e).then(function(t){var e=L(t.data);return e.max_y>90?e.max_y=90:e.min_y<-90&&(e.min_y=-90),[[e.min_x,e.min_y],[e.max_x,e.max_y]]})):(e.column_name=t.xAttr,C.default.post("".concat(t.kineticaUrl,"/aggregate/minmax"),e).then(function(r){var n=L(r.data);return e.column_name=t.yAttr,C.default.post("".concat(t.kineticaUrl,"/aggregate/minmax"),e).then(function(t){var e=L(t.data);return e.max>90?e.max=90:e.min<-90&&(e.min=-90),n.max>180?n.max=180:n.min<-180&&(n.min=-180),[[n.min,e.min],[n.max,e.max]]})}))}function i(t,e,r){for(var n=R(t),o=[],i=0;i<n.column_1.length;i++){for(var u={type:"Feature",geometry:{type:"Point",coordinates:[]},properties:{}},a=0;a<n.column_headers.length;a++){var c=n.column_headers[a],s=n["column_".concat(a+1)][i];u.properties[c]=s}U.get(u,"properties.atomic_sum",null)&&(u.properties.atomic_sum_localized=u.properties.atomic_sum.toLocaleString()),u.geometry.coordinates=[u.properties[e],u.properties[r]],o.push(u)}return o}function u(t){var e="POLYGON((";return e+="".concat(t._sw.lng," ").concat(t._ne.lat,","),e+="".concat(t._ne.lng," ").concat(t._ne.lat,","),e+="".concat(t._ne.lng," ").concat(t._sw.lat,","),e+="".concat(t._sw.lng," ").concat(t._sw.lat,","),e+="".concat(t._sw.lng," ").concat(t._ne.lat),e+="))","St_GeomFromText('".concat(e,"')")}function a(t){var e=c(t);e.push(U.cloneDeep(e[0]));var r={type:"Polygon",coordinates:e};return(0,B.feature)(r)}function c(t){var e=[];return e.push([t._sw.lng,t._ne.lat]),e.push([t._ne.lng,t._ne.lat]),e.push([t._ne.lng,t._sw.lat]),e.push([t._sw.lng,t._sw.lat]),e}function s(t){var e=t.getBounds(),r=f(e._sw.lng,e._sw.lat),n=f(e._ne.lng,e._ne.lat),o="";return o+=r.join(","),o+=","+n.join(",")}function f(t,e){var r=20037508.34*t/180,n=Math.log(Math.tan((90+e)*Math.PI/360))/(Math.PI/180);return n=20037508.34*n/180,[r,n]}function l(t,e,r){return t.getSource(e)&&t.removeSource(e),t.addSource(e,r),t.getSource(e)}function d(t,e,r){return t.getLayer(e.id)&&t.removeLayer(e.id),t.addLayer(e,r),t.getLayer(e.id)}function p(t,e){t.getSource(e)&&t.removeSource(e)}function h(t,e){t.getLayer(e)&&t.removeLayer(e)}function v(t,e){return t+"?"+O(e)}function g(t,e,r){var n=(0,M.default)(t,function(t,r){return r.toLowerCase()===e.toLowerCase()});return void 0===n?r:n}function y(t,e,r){var n=U.findKey(t,function(t,r){return r.toLowerCase()===e.toLowerCase()});n||(t[e]=r),t[n]=r}function m(t){var e=t.slice(t.indexOf("?")+1,t.length),r=e.split("&"),n={};return U.forEach(r,function(t){if(t){var e=t.split("=");n[e[0]]=e[1]}}),n}function _(t,e){for(var r="",n=0;n<e;n++)r+=0;return r="1"+r,Math.round(t*r)/r}function b(t,e,r,n){t[n]=g(e,n,r[n])}function w(t){var e=[];try{for(var r=L(t),n=0;n<r.records_json.length;n++)e.push(JSON.parse(r.records_json[n]))}catch(t){return void z.default.error(t)}return e}function x(t){var e={},r=[];try{var n=L(t);r=JSON.parse(n.type_schema).fields}catch(t){return void z.default.error(t)}for(var o=0;o<r.length;o++)e[r[o].name]=r[o].type;return e}function A(t){var e;try{e=L(t)}catch(t){return void z.default.error(t)}return e.total_number_of_records}function E(t){var e=m(t),r={};return e.X_ATTR&&e.Y_ATTR?(r.X_ATTR=e.X_ATTR,r.Y_ATTR=e.Y_ATTR):e.GEO_ATTR&&(r.GEO_ATTR=e.GEO_ATTR),r}function S(t,e){var r=t.getStyle().layers,n=r.findIndex(function(t){return t.id===e});return n>-1&&n<r.length-1?r[n+1].id:null}function j(t,e,r,n,o){var i=r+"-source",u=r+"-layer",a=S(t,u),f=T(t._container.id);n.bbox=s(t),n.srs="EPSG:3857",n.height=f.height,n.width=f.width;var p=t.getSource(i),h=t.getLayer(u);if(p||(z.default.debug("Adding source to the map..."),l(t,i,{type:"image",url:v(e,n),coordinates:c(t.getBounds())})),!h){z.default.debug("Adding layer to the map...");var g,y=t.getLayer("gl-draw-polygon-fill-inactive.cold");if(o&&o.before){var m=t.getLayer(o.before+"-layer")||t.getLayer(o.before);m&&(g=m.id)}else if(a)g=a;else if(y){var _=y;_&&(g=_.id)}else g=null;d(t,{id:u,type:"raster",source:i},g)}p&&h&&p.updateImage&&(z.default.debug("Updating source image..."),p.updateImage({url:v(e,n),coordinates:c(t.getBounds())}))}function T(t){var e=document.getElementById(t);return{height:U.get(e,"clientHeight",0),width:U.get(e,"clientWidth",0)}}function O(t){var e="";for(var r in t)e+="&".concat(r,"=").concat(t[r]);return e}function L(t){var e;try{e=JSON.parse(t.data_str)}catch(t){return void z.default.error(t)}return e}function R(t){var e;try{var r=JSON.parse(t);e=JSON.parse(r.json_encoded_response)}catch(t){z.default.error(t)}return e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var C=n(r(23)),I=n(r(16)),P=n(r(232)),M=n(r(234)),N=n(r(21)),k=n(r(83)),F=n(r(34)),D=n(r(236)),B=r(6),z=n(r(10)),U={cloneDeep:I.default,findKey:P.default,find:M.default,forEach:N.default,debounce:k.default,get:F.default,set:D.default},H={format:"image/png",service:"WMS",version:"1.1.1",request:"GetMap",srs:"EPSG:3857"},q={addLayer:d,addSource:l,bindWmsToSource:j,buildUrl:v,baseLayerParams:H,boundsToFeature:a,dynamicSchemaToGeoJson:i,getBoundsWkt:u,getCoordsFromBounds:c,getCoordinateParams:E,getDivDimensions:T,getNoCase:g,getQueryParamsObject:m,getRecordsJson:w,getRecordsJsonSchema:x,getRecordCount:A,getTableBoundary:o,parseDataStr:L,removeLayer:h,removeSource:p,roundTo:_,setNoCase:y,setOptionOrDefault:b};e.default=q},function(t,e,r){"use strict";(function(e){function n(t,e){!o.isUndefined(t)&&o.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var o=r(1),i=r(106),u={"Content-Type":"application/x-www-form-urlencoded"},a={adapter:function(){var t;return"undefined"!=typeof XMLHttpRequest?t=r(60):void 0!==e&&(t=r(60)),t}(),transformRequest:[function(t,e){return i(e,"Content-Type"),o.isFormData(t)||o.isArrayBuffer(t)||o.isBuffer(t)||o.isStream(t)||o.isFile(t)||o.isBlob(t)?t:o.isArrayBufferView(t)?t.buffer:o.isURLSearchParams(t)?(n(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):o.isObject(t)?(n(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};a.headers={common:{Accept:"application/json, text/plain, */*"}},o.forEach(["delete","get","head"],function(t){a.headers[t]={}}),o.forEach(["post","put","patch"],function(t){a.headers[t]=o.merge(u)}),t.exports=a}).call(e,r(59))},function(t,e,r){var n=r(7),o=r(3),i=n(o,"Map");t.exports=i},function(t,e,r){function n(t){if(!i(t))return!1;var e=o(t);return e==a||e==c||e==u||e==s}var o=r(11),i=r(2),u="[object AsyncFunction]",a="[object Function]",c="[object GeneratorFunction]",s="[object Proxy]";t.exports=n},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){function n(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}var o=r(138),i=r(145),u=r(147),a=r(148),c=r(149);n.prototype.clear=o,n.prototype.delete=i,n.prototype.get=u,n.prototype.has=a,n.prototype.set=c,t.exports=n},function(t,e,r){function n(t,e,r){var n=t[e];a.call(t,e)&&i(n,r)&&(void 0!==r||e in t)||o(t,e,r)}var o=r(44),i=r(17),u=Object.prototype,a=u.hasOwnProperty;t.exports=n},function(t,e,r){function n(t,e,r){"__proto__"==e&&o?o(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var o=r(67);t.exports=n},function(t,e,r){var n=r(154),o=r(47),i=r(48),u=i&&i.isTypedArray,a=u?o(u):n;t.exports=a},function(t,e){function r(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}var n=9007199254740991;t.exports=r},function(t,e){function r(t){return function(e){return t(e)}}t.exports=r},function(t,e,r){(function(t){var n=r(64),o="object"==typeof e&&e&&!e.nodeType&&e,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,u=i&&i.exports===o,a=u&&n.process,c=function(){try{return a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=c}).call(e,r(31)(t))},function(t,e){function r(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}var n=Object.prototype;t.exports=r},function(t,e){function r(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}t.exports=r},function(t,e,r){var n=r(161),o=r(71),i=Object.prototype,u=i.propertyIsEnumerable,a=Object.getOwnPropertySymbols,c=a?function(t){return null==t?[]:(t=Object(t),n(a(t),function(e){return u.call(t,e)}))}:o;t.exports=c},function(t,e,r){var n=r(69),o=n(Object.getPrototypeOf,Object);t.exports=o},function(t,e,r){function n(t){var e=new t.constructor(t.byteLength);return new o(e).set(new o(t)),e}var o=r(75);t.exports=n},function(t,e,r){function n(t,e){e=o(e,t);for(var r=0,n=e.length;null!=t&&r<n;)t=t[i(e[r++])];return r&&r==n?t:void 0}var o=r(35),i=r(15);t.exports=n},function(t,e,r){function n(t,e){if(o(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!i(t))||(a.test(t)||!u.test(t)||null!=e&&t in Object(e))}var o=r(0),i=r(20),u=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=n},function(t,e,r){function n(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var c=null==r?0:u(r);return c<0&&(c=a(n+c,0)),o(t,i(e,3),c)}var o=r(201),i=r(9),u=r(222),a=Math.max;t.exports=n},function(t,e,r){"use strict";function n(t){i.forEach(a,function(e,r){e&&(a[r]&&(a[r].disableMode(),a[r]=null),u[r]&&(t.removeControl(u[r]),u[r]=null))})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r(282),i={forEach:o.forEach},u={},a={},c={modes:a,controls:u,disableIdentifyMode:n};e.default=c},function(t,e,r){"use strict";t.exports=function(t,e){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return t.apply(e,r)}}},function(t,e){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function o(t){if(f===setTimeout)return setTimeout(t,0);if((f===r||!f)&&setTimeout)return f=setTimeout,setTimeout(t,0);try{return f(t,0)}catch(e){try{return f.call(null,t,0)}catch(e){return f.call(this,t,0)}}}function i(t){if(l===clearTimeout)return clearTimeout(t);if((l===n||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{return l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}function u(){v&&p&&(v=!1,p.length?h=p.concat(h):g=-1,h.length&&a())}function a(){if(!v){var t=o(u);v=!0;for(var e=h.length;e;){for(p=h,h=[];++g<e;)p&&p[g].run();g=-1,e=h.length}p=null,v=!1,i(t)}}function c(t,e){this.fun=t,this.array=e}function s(){}var f,l,d=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:r}catch(t){f=r}try{l="function"==typeof clearTimeout?clearTimeout:n}catch(t){l=n}}();var p,h=[],v=!1,g=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];h.push(new c(t,e)),1!==h.length||v||o(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=s,d.addListener=s,d.once=s,d.off=s,d.removeListener=s,d.removeAllListeners=s,d.emit=s,d.prependListener=s,d.prependOnceListener=s,d.listeners=function(t){return[]},d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(t,e,r){"use strict";(function(e){var n=r(1),o=r(107),i=r(109),u=r(110),a=r(111),c=r(61),s="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||r(112);t.exports=function(t){return new Promise(function(f,l){var d=t.data,p=t.headers;n.isFormData(d)&&delete p["Content-Type"];var h=new XMLHttpRequest,v="onreadystatechange",g=!1;if("test"===e.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in h||a(t.url)||(h=new window.XDomainRequest,v="onload",g=!0,h.onprogress=function(){},h.ontimeout=function(){}),t.auth){var y=t.auth.username||"",m=t.auth.password||"";p.Authorization="Basic "+s(y+":"+m)}if(h.open(t.method.toUpperCase(),i(t.url,t.params,t.paramsSerializer),!0),h.timeout=t.timeout,h[v]=function(){if(h&&(4===h.readyState||g)&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var e="getAllResponseHeaders"in h?u(h.getAllResponseHeaders()):null,r=t.responseType&&"text"!==t.responseType?h.response:h.responseText,n={data:r,status:1223===h.status?204:h.status,statusText:1223===h.status?"No Content":h.statusText,headers:e,config:t,request:h};o(f,l,n),h=null}},h.onerror=function(){l(c("Network Error",t,null,h)),h=null},h.ontimeout=function(){l(c("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",h)),h=null},n.isStandardBrowserEnv()){var _=r(113),b=(t.withCredentials||a(t.url))&&t.xsrfCookieName?_.read(t.xsrfCookieName):void 0;b&&(p[t.xsrfHeaderName]=b)}if("setRequestHeader"in h&&n.forEach(p,function(t,e){void 0===d&&"content-type"===e.toLowerCase()?delete p[e]:h.setRequestHeader(e,t)}),t.withCredentials&&(h.withCredentials=!0),t.responseType)try{h.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&h.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){h&&(h.abort(),l(t),h=null)}),void 0===d&&(d=null),h.send(d)})}}).call(e,r(59))},function(t,e,r){"use strict";var n=r(108);t.exports=function(t,e,r,o,i){var u=new Error(t);return n(u,e,r,o,i)}},function(t,e,r){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,r){"use strict";function n(t){this.message=t}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,t.exports=n},function(t,e,r){(function(e){var r="object"==typeof e&&e&&e.Object===Object&&e;t.exports=r}).call(e,r(41))},function(t,e){function r(t){if(null!=t){try{return o.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var n=Function.prototype,o=n.toString;t.exports=r},function(t,e){function r(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}t.exports=r},function(t,e,r){var n=r(7),o=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},function(t,e,r){function n(t,e){var r=u(t),n=!r&&i(t),f=!r&&!n&&a(t),d=!r&&!n&&!f&&s(t),p=r||n||f||d,h=p?o(t.length,String):[],v=h.length;for(var g in t)!e&&!l.call(t,g)||p&&("length"==g||f&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||c(g,v))||h.push(g);return h}var o=r(151),i=r(29),u=r(0),a=r(30),c=r(18),s=r(45),f=Object.prototype,l=f.hasOwnProperty;t.exports=n},function(t,e){function r(t,e){return function(r){return t(e(r))}}t.exports=r},function(t,e,r){(function(t){function n(t,e){if(e)return t.slice();var r=t.length,n=s?s(r):new t.constructor(r);return t.copy(n),n}var o=r(3),i="object"==typeof e&&e&&!e.nodeType&&e,u=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=u&&u.exports===i,c=a?o.Buffer:void 0,s=c?c.allocUnsafe:void 0;t.exports=n}).call(e,r(31)(t))},function(t,e){function r(){return[]}t.exports=r},function(t,e,r){var n=r(32),o=r(52),i=r(51),u=r(71),a=Object.getOwnPropertySymbols,c=a?function(t){for(var e=[];t;)n(e,i(t)),t=o(t);return e}:u;t.exports=c},function(t,e,r){function n(t){return o(t,u,i)}var o=r(74),i=r(51),u=r(14);t.exports=n},function(t,e,r){function n(t,e,r){var n=e(t);return i(t)?n:o(n,r(t))}var o=r(32),i=r(0);t.exports=n},function(t,e,r){var n=r(3),o=n.Uint8Array;t.exports=o},function(t,e,r){function n(t,e){var r=e?o(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var o=r(53);t.exports=n},function(t,e,r){function n(t){return"function"!=typeof t.constructor||u(t)?{}:o(i(t))}var o=r(173),i=r(52),u=r(49);t.exports=n},function(t,e){function r(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}t.exports=r},function(t,e,r){function n(t,e,r){(void 0===r||i(t[e],r))&&(void 0!==r||e in t)||o(t,e,r)}var o=r(44),i=r(17);t.exports=n},function(t,e,r){var n=r(185),o=n();t.exports=o},function(t,e){function r(t,e){return"__proto__"==e?void 0:t[e]}t.exports=r},function(t,e,r){function n(t){return o(function(e,r){var n=-1,o=r.length,u=o>1?r[o-1]:void 0,a=o>2?r[2]:void 0;for(u=t.length>3&&"function"==typeof u?(o--,u):void 0,a&&i(r[0],r[1],a)&&(u=o<3?void 0:u,o=1),e=Object(e);++n<o;){var c=r[n];c&&t(e,c,n,u)}return e})}var o=r(190),i=r(197);t.exports=n},function(t,e,r){function n(t,e,r){function n(e){var r=m,n=_;return m=_=void 0,E=e,w=t.apply(n,r)}function f(t){return E=t,x=setTimeout(p,e),S?n(t):w}function l(t){var r=t-A,n=t-E,o=e-r;return j?s(o,b-n):o}function d(t){var r=t-A,n=t-E;return void 0===A||r>=e||r<0||j&&n>=b}function p(){var t=i();if(d(t))return h(t);x=setTimeout(p,l(t))}function h(t){return x=void 0,T&&m?n(t):(m=_=void 0,w)}function v(){void 0!==x&&clearTimeout(x),E=0,m=A=_=x=void 0}function g(){return void 0===x?w:h(i())}function y(){var t=i(),r=d(t);if(m=arguments,_=this,A=t,r){if(void 0===x)return f(A);if(j)return x=setTimeout(p,e),n(A)}return void 0===x&&(x=setTimeout(p,e)),w}var m,_,b,w,x,A,E=0,S=!1,j=!1,T=!0;if("function"!=typeof t)throw new TypeError(a);return e=u(e)||0,o(r)&&(S=!!r.leading,j="maxWait"in r,b=j?c(u(r.maxWait)||0,e):b,T="trailing"in r?!!r.trailing:T),y.cancel=v,y.flush=g,y}var o=r(2),i=r(198),u=r(84),a="Expected a function",c=Math.max,s=Math.min;t.exports=n},function(t,e,r){function n(t){if("number"==typeof t)return t;if(i(t))return u;if(o(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=o(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a,"");var r=s.test(t);return r||f.test(t)?l(t.slice(2),r?2:8):c.test(t)?u:+t}var o=r(2),i=r(20),u=NaN,a=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,f=/^0o[0-7]+$/i,l=parseInt;t.exports=n},function(t,e,r){var n=r(86),o=r(199),i=o(n);t.exports=i},function(t,e,r){function n(t,e){return t&&o(t,e,i)}var o=r(80),i=r(14);t.exports=n},function(t,e,r){function n(t,e,r,u,a){return t===e||(null==t||null==e||!i(t)&&!i(e)?t!==t&&e!==e:o(t,e,r,u,n,a))}var o=r(204),i=r(4);t.exports=n},function(t,e,r){function n(t,e,r,n,s,f){var l=r&a,d=t.length,p=e.length;if(d!=p&&!(l&&p>d))return!1;var h=f.get(t);if(h&&f.get(e))return h==e;var v=-1,g=!0,y=r&c?new o:void 0;for(f.set(t,e),f.set(e,t);++v<d;){var m=t[v],_=e[v];if(n)var b=l?n(_,m,v,e,t,f):n(m,_,v,t,e,f);if(void 0!==b){if(b)continue;g=!1;break}if(y){if(!i(e,function(t,e){if(!u(y,e)&&(m===t||s(m,t,r,n,f)))return y.push(e)})){g=!1;break}}else if(m!==_&&!s(m,_,r,n,f)){g=!1;break}}return f.delete(t),f.delete(e),g}var o=r(205),i=r(208),u=r(209),a=1,c=2;t.exports=n},function(t,e,r){function n(t){return t===t&&!o(t)}var o=r(2);t.exports=n},function(t,e){function r(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}}t.exports=r},function(t,e,r){function n(t,e){var r=[];if(!t||!t.length)return r;var n=-1,u=[],a=t.length;for(e=o(e,3);++n<a;){var c=t[n];e(c,n,t)&&(r.push(c),u.push(n))}return i(t,u),r}var o=r(9),i=r(224);t.exports=n},function(t,e,r){function n(t,e,r){for(var n=-1,i=t.length;++n<i;){var u=t[n],a=e(u);if(null!=a&&(void 0===c?a===a&&!o(a):r(a,c)))var c=a,s=u}return s}var o=r(20);t.exports=n},function(t,e,r){"use strict";function n(t,e){s[t]||(s[t]=[]),s[t].push(e)}function o(t,e){var r=s[t].indexOf(e);r>-1&&s[t].splice(r,1),0===s[t].length&&delete s[t]}function i(t,e){var r=c.findIndex(s[t],function(t){return t.kbFnId===e});r>-1&&s[t].splice(r,1),0===s[t].length&&delete s[t]}function u(t){if(s[t])for(var e=0;e<s[t].length;e++)s[t][e]({eventName:t})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=function(t){return t&&t.__esModule?t:{default:t}}(r(56)),c={findIndex:a.default},s={},f={register:n,trigger:u,unregister:o,unregisterById:i};"undefined"!=typeof ENV_TESTING&&!0===ENV_TESTING&&(f._spec={clearListeners:function(){s={}},getListeners:function(){return s}});var l=f;e.default=l},function(t,e,r){"use strict";function n(t,e){return t/1e3*e}function o(t,e,r){var n=(t+1)/r.lines,o=e-n*r.direction;(o<0||o>1)&&(o+=r.direction);var i=r.trail/100,u=1-o/i;return u<0?r.opacity:u*(1-r.opacity)+r.opacity}function i(t,e){if(void 0!==t.style[e])return e;var r="ms"+e.charAt(0).toUpperCase()+e.slice(1);return void 0!==t.style[r]?r:""}function u(t,e){for(var r in e)t.style[i(t,r)||r]=e[r];return t}function a(t,e){return"string"==typeof t?t:t[e%t.length]}function c(t,e){var r=Math.round(e.corners*e.width*500)/1e3+"px",n="none";!0===e.shadow?n="0 2px 4px #000":"string"==typeof e.shadow&&(n=e.shadow);for(var o=s(n),i=0;i<e.lines;i++){var c=~~(360/e.lines*i+e.rotate),l=u(document.createElement("div"),{position:"absolute",top:-e.width/2+"px",width:e.length+e.width+"px",height:e.width+"px",background:a(e.fadeColor,i),borderRadius:r,transformOrigin:"left",transform:"rotate("+c+"deg) translateX("+e.radius+"px)"}),d=u(document.createElement("div"),{width:"100%",height:"100%",background:a(e.color,i),borderRadius:r,boxShadow:f(o,c),opacity:e.opacity});l.appendChild(d),t.appendChild(l)}}function s(t){for(var e=/^\s*([a-zA-Z]+\s+)?(-?\d+(\.\d+)?)([a-zA-Z]*)\s+(-?\d+(\.\d+)?)([a-zA-Z]*)(.*)$/,r=[],n=0,o=t.split(",");n<o.length;n++){var i=o[n],u=i.match(e);if(null!==u){var a=+u[2],c=+u[5],s=u[4],f=u[7];0!==a||s||(s=f),0!==c||f||(f=s),s===f&&r.push({prefix:u[1]||"",x:a,y:c,xUnits:s,yUnits:f,end:u[8]})}}return r}function f(t,e){for(var r=[],n=0,o=t;n<o.length;n++){var i=o[n],u=l(i.x,i.y,e);r.push(i.prefix+u[0]+i.xUnits+" "+u[1]+i.yUnits+i.end)}return r.join(", ")}function l(t,e,r){var n=r*Math.PI/180,o=Math.sin(n),i=Math.cos(n);return[Math.round(1e3*(t*i+e*o))/1e3,Math.round(1e3*(-t*o+e*i))/1e3]}Object.defineProperty(e,"__esModule",{value:!0}),r.d(e,"Spinner",function(){return h});var d=this&&this.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},p={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",fadeColor:"transparent",opacity:.25,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:"none",position:"absolute"},h=function(){function t(t){void 0===t&&(t={}),this.opts=d({},p,t)}return t.prototype.spin=function(t){var e=this;this.stop(),this.el=document.createElement("div"),this.el.className=this.opts.className,this.el.setAttribute("role","progressbar"),u(this.el,{position:this.opts.position,width:0,zIndex:this.opts.zIndex,left:this.opts.left,top:this.opts.top,transform:"scale("+this.opts.scale+")"}),t&&t.insertBefore(this.el,t.firstChild||null);var r,i;"undefined"!=typeof requestAnimationFrame?(r=requestAnimationFrame,i=function(){return performance.now()}):(r=function(t){return setTimeout(t,1e3/e.opts.fps)},i=function(){return Date.now()});var a,s=0,f=function(){var t=i();if(void 0===a&&(a=t-1),s+=n(t-a,e.opts.speed),a=t,s>1&&(s-=Math.floor(s)),e.el.childNodes.length===e.opts.lines)for(var u=0;u<e.opts.lines;u++){var c=o(u,s,e.opts);e.el.childNodes[u].childNodes[0].style.opacity=c.toString()}e.animateId=e.el?r(f):void 0};return c(this.el,this.opts),f(),this},t.prototype.stop=function(){return this.el&&("undefined"!=typeof requestAnimationFrame?cancelAnimationFrame(this.animateId):clearTimeout(this.animateId),this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.el=void 0),this},t}()},function(t,e,r){"use strict";function n(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&t.length>=2&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function o(t){if(!t)throw new Error("coords is required");if("Feature"===t.type&&null!==t.geometry)return t.geometry.coordinates;if(t.coordinates)return t.coordinates;if(Array.isArray(t))return t;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function i(t){if(t.length>1&&Object(d.isNumber)(t[0])&&Object(d.isNumber)(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return i(t[0]);throw new Error("coordinates must only contain numbers")}function u(t,e,r){if(!e||!r)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+r+": must be a "+e+", given "+t.type)}function a(t,e,r){if(!t)throw new Error("No feature passed");if(!r)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+r+": must be a "+e+", given "+t.geometry.type)}function c(t,e,r){if(!t)throw new Error("No featureCollection passed");if(!r)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+r+", FeatureCollection required");for(var n=0;n<t.features.length;n++){var o=t.features[n];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+r+": must be a "+e+", given "+o.geometry.type)}}function s(t){if(!t)throw new Error("geojson is required");if(void 0!==t.geometry)return t.geometry;if(t.coordinates||t.geometries)return t;throw new Error("geojson must be a valid Feature or Geometry Object")}function f(){throw new Error("invariant.getGeomType has been deprecated in v5.0 in favor of invariant.getType")}function l(t,e){if(!t)throw new Error((e||"geojson")+" is required");if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error((e||"geojson")+" is invalid")}Object.defineProperty(e,"__esModule",{value:!0}),e.getCoord=n,e.getCoords=o,e.containsNumber=i,e.geojsonType=u,e.featureOf=a,e.collectionOf=c,e.getGeom=s,e.getGeomType=f,e.getType=l;var d=r(6)},function(t,e,r){function n(t,e,r){var n=e&&r||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null),t=t||{};var u=t.random||(t.rng||o)();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,e)for(var a=0;a<16;++a)e[n+a]=u[a];return e||i(u)}var o=r(262),i=r(263);t.exports=n},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e,r,n){var o=this,i={table_name:e,offset:r||0,limit:10,encoding:"json",options:{}};return c.post("".concat(t,"/get/records"),i).then(function(t){var e=l.default.getRecordsJson(t.data),r=l.default.getRecordsJsonSchema(t.data),i=l.default.getRecordCount(t.data);return{records:o.transformResults(e,r,n),recordCount:i}})}function i(t,e,r){var n={table_name:e,x_center:r.geometry.center[0],y_center:r.geometry.center[1],radius:r.geometry.radius,options:{}};r.filteredViewName?n.view_name=r.filteredViewName:n.view_name=r.viewName,r.collection&&(n.options.collection_name=r.collection);var o="".concat(t,"/filter/byradius");return r.xAttr&&r.yAttr&&!r.geoAttr?(n.x_column_name=r.xAttr,n.y_column_name=r.yAttr):(o="".concat(t,"/filter/byradius/geometry"),n.column_name=r.geoAttr),c.post(o,n)}function u(t,e,r){var n={table_name:e,expression:r.expression,options:{}};r.collection&&(n.options.collection_name=r.collection),r.filteredViewName?n.view_name=r.filteredViewName:n.view_name=r.viewName;var o="".concat(t,"/filter");return c.post(o,n)}function a(t,e,r){var n=[];return d.forEach(e,function(t,e){(e.match(/.*time.*/)||e.match(/.*date.*/))&&"long"===t&&n.push(function(t){var r=new Date(t[e]);return t[e]=r.toLocaleString(),t}),d.forEach(r,function(r){r.condition(e,t)&&n.push(r.fn.bind(null,e,t))})}),d.map(t,function(t){return d.forEach(n,function(e){t=e(t)}),t})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(r(23)),s=n(r(21)),f=n(r(264)),l=n(r(37)),d={forEach:s.default,map:f.default},p={filterRecords:u,filterRecordsByRadius:i,getRecords:o,transformResults:a};e.default=p},function(t,e,r){"use strict";function n(t,e,r){var n=document.querySelector("#".concat(t," .").concat(e)),o=document.querySelector("#".concat(t," .btn-").concat(e));h(n,"active"),h(o,"active")}function o(t,e){m(document.querySelector("body #".concat(t," .blocker"))),e.stop()}function i(t){var e=document.querySelector("#".concat(t," .no-results")),r=document.querySelector("#".concat(t," .result-count"));m(e),y(r)}function u(t){var e=document.querySelector("#".concat(t," .no-results")),r=document.querySelector("#".concat(t," .result-count"));y(e),m(r)}function a(t,e){var r=document.querySelector("body #".concat(t)),n=document.querySelector("body #".concat(t," .blocker"));return g(r,"active"),g(n,"active"),y(r),e.spin(r),e}function c(t){var e=document.querySelector("#".concat(t," .record-data.active")).dataset.recordIndex;return e=parseInt(e),e||0===e?e:-1}function s(t,e,r){_.default.debug("Setting active record to ".concat(e,"...")),r=r||e,v(document.querySelector("#".concat(t," .record-data.active")),"active");var n=document.querySelectorAll("#".concat(t," .record-data"));n.length>=e+1&&g(n[e],"active"),document.querySelector("#".concat(t," .record-index")).textContent=r+1}function f(t){return document.querySelector("#".concat(t," .filter-expression")).value}function l(t){y(document.querySelector("#".concat(t," .filters-applied")))}function d(t){m(document.querySelector("#".concat(t," .filters-applied")))}function p(t){document.querySelector("#".concat(t," .filter-expression")).value=""}function h(t,e){if(t){var r,n=t.className;r=n.split(" ").indexOf(e)>-1?n.replace(new RegExp("\\b"+e+"\\b","g"),""):n+" "+e,t.className=r.trim()}}function v(t,e){if(t){var r=t.className.split(" "),n=r.indexOf(e);n>=0&&r.splice(n,1),t.className=r.join(" ")}}function g(t,e){if(t){t.className.split(" ").indexOf(e)>=0||(t.className+=" "+e)}}function y(t){t&&("SPAN"===t.tagName?t.style.display="inline":t.style.display="block")}function m(t){t&&(t.style.display="none")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var _=function(t){return t&&t.__esModule?t:{default:t}}(r(10)),b={appliedFilter:l,clearExpression:p,getActiveIndex:c,getExpression:f,hideLoading:o,noResultsFound:u,removedFilter:d,setActiveRecord:s,showResultCount:i,showLoading:a,toggleView:n};e.default=b},function(t,e,r){var n=r(266);t.exports=(n.default||n).template({1:function(t,e,r,n,o){var i,u,a=null!=e?e:t.nullContext||{};return'          <ul class="record-data list-group" data-record-index="'+t.escapeExpression((u=null!=(u=r.index||o&&o.index)?u:r.helperMissing,"function"==typeof u?u.call(a,{name:"index",hash:{},data:o}):u))+'">\n'+(null!=(i=r.each.call(a,e,{name:"each",hash:{},fn:t.program(2,o,0),inverse:t.noop,data:o}))?i:"")+"          </ul>\n"},2:function(t,e,r,n,o){var i,u;return'            <li class="list-group-item"><b>'+(null!=(u=null!=(u=r.key||o&&o.key)?u:r.helperMissing,i="function"==typeof u?u.call(null!=e?e:t.nullContext||{},{name:"key",hash:{},data:o}):u)?i:"")+":</b>&nbsp;"+(null!=(i=t.lambda(e,e))?i:"")+"</li>\n"},compiler:[7,">= 4.0.0"],main:function(t,e,r,n,o){var i,u,a=null!=e?e:t.nullContext||{},c=r.helperMissing,s="function",f=t.escapeExpression;return'<div class="kickbox identify-popup" id="'+f((u=null!=(u=r.popupId||(null!=e?e.popupId:e))?u:c,typeof u===s?u.call(a,{name:"popupId",hash:{},data:o}):u))+'">\n  <h4 class="title clearfix">Identify <span class="btn-identify-info float-right">\n      <svg class="question-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"/></svg>\n      <div class="identify-info">\n        <svg class="caret-up-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M288.662 352H31.338c-17.818 0-26.741-21.543-14.142-34.142l128.662-128.662c7.81-7.81 20.474-7.81 28.284 0l128.662 128.662c12.6 12.599 3.676 34.142-14.142 34.142z"/></svg>\n        <b>Latitude: </b> <span class="short-number">'+f((u=null!=(u=r.latitude||(null!=e?e.latitude:e))?u:c,typeof u===s?u.call(a,{name:"latitude",hash:{},data:o}):u))+'</span><br/>\n        <b>Longitude: </b> <span class="short-number">'+f((u=null!=(u=r.longitude||(null!=e?e.longitude:e))?u:c,typeof u===s?u.call(a,{name:"longitude",hash:{},data:o}):u))+'</span><br/>\n        <b>Radius (Meters):</b> <span class="short-number">'+f((u=null!=(u=r.radius||(null!=e?e.radius:e))?u:c,typeof u===s?u.call(a,{name:"radius",hash:{},data:o}):u))+'</span>\n      </div>\n    </span>\n  </h4>\n\n  <div class="results-view">\n    <div class="blocker">\n      Loading results...\n    </div>\n    <div class="toolbar-top container-fluid">\n      <div class="row">\n        <div class="col-sm pr-0">\n          <button class="btn btn-secondary btn-prev pull-left" title="Previous Record">&lt;</button>\n        </div>\n        <div class="result-count col-6 text-center pr-0 pl-0">\n          </span><span class="record-index">'+f((u=null!=(u=r.recordIndex||(null!=e?e.recordIndex:e))?u:c,typeof u===s?u.call(a,{name:"recordIndex",hash:{},data:o}):u))+'</span> of <span class="filters-applied">\n            <svg class="count-filter-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z"/></svg>\n          </span> <span class="result-total">'+f((u=null!=(u=r.recordTotal||(null!=e?e.recordTotal:e))?u:c,typeof u===s?u.call(a,{name:"recordTotal",hash:{},data:o}):u))+'</span>\n        </div>\n        <div class="no-results">No Results Found</div>\n        <div class="col-sm text-right pl-0">\n          <button class="btn btn-secondary btn-next pull-right" title="Next Record">&gt;</button>\n        </div>\n      </div>\n    </div>\n\n      <div class="records-data">\n'+(null!=(i=r.each.call(a,null!=e?e.records:e,{name:"each",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o}))?i:"")+'      </div>\n  </div>\n\n  <div class="kickbox-view filter-view">\n    <div class="container-fluid">\n\n      <div class="form-group">\n        <label>Filter Expression</label>\n        <textarea class="filter-expression form-control" placeholder="Filter expression...">'+f((u=null!=(u=r.expression||(null!=e?e.expression:e))?u:c,typeof u===s?u.call(a,{name:"expression",hash:{},data:o}):u))+'</textarea>\n      </div>\n    </div>\n\n    <div class="form-group container-fluid">\n      <div class="row">\n        <div class="col-sm">\n          <button class="btn-apply-filter btn btn-primary btn-sm form-control">Apply Filter</button>\n        </div>\n        <div class="col-sm">\n          <button class="btn-clear-filter btn btn-secondary btn-sm form-control">Clear Filter</button>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class="toolbar-bottom container-fluid">\n      <div class="row">\n        <div class="col-sm">\n          <button class="btn btn-sm btn-secondary btn-filter-view" title="Filter Results">\n            <svg class="btn-filter-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z"/></svg>\n          </button>\n        </div>\n      </div>\n    </div>\n</div>'},useData:!0})},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e,r){this.helpers=t||{},this.partials=e||{},this.decorators=r||{},c.registerDefaultHelpers(this),s.registerDefaultDecorators(this)}e.__esModule=!0,e.HandlebarsEnvironment=o;var i=r(5),u=r(22),a=n(u),c=r(268),s=r(276),f=r(278),l=n(f);e.VERSION="4.0.11";e.COMPILER_REVISION=7;var d={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};e.REVISION_CHANGES=d;o.prototype={constructor:o,logger:l.default,log:l.default.log,registerHelper:function(t,e){if("[object Object]"===i.toString.call(t)){if(e)throw new a.default("Arg not supported with multiple helpers");i.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){if("[object Object]"===i.toString.call(t))i.extend(this.partials,t);else{if(void 0===e)throw new a.default('Attempting to register a partial called "'+t+'" as undefined');this.partials[t]=e}},unregisterPartial:function(t){delete this.partials[t]},registerDecorator:function(t,e){if("[object Object]"===i.toString.call(t)){if(e)throw new a.default("Arg not supported with multiple decorators");i.extend(this.decorators,t)}else this.decorators[t]=e},unregisterDecorator:function(t){delete this.decorators[t]}};var p=l.default.log;e.log=p,e.createFrame=i.createFrame,e.logger=l.default},function(t,e,r){t.exports=r(102)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t){t.mapboxgl.accessToken=t.mapboxKey;var e={container:t.mapDiv,style:q.get(t,"mapStyle","mapbox://styles/mapbox/dark-v9"),zoom:q.get(t,"zoom",4),center:q.get(t,"center",[-3.8199625,40.4378693])},r=q.get(t,"username",null),n=q.get(t,"password",null);r&&n&&(w.default.interceptors.request.use(function(t){return t.auth={username:r,password:n},t}),e.transformRequest=function(e,o){if("https://api.mapbox.com"===e.slice(0,22)||"https://a.tiles.mapbox.com"===e.slice(0,26)||"https://b.tiles.mapbox.com"===e.slice(0,26)||"https://c.tiles.mapbox.com"===e.slice(0,26)||"https://d.tiles.mapbox.com"===e.slice(0,26))return{url:[e.slice(0,e.indexOf("?")+1),"pluginName=Kickbox&",e.slice(e.indexOf("?")+1)].join("")};if("Image"===o&&e.startsWith(t.wmsUrl)){return{url:e,headers:{Authorization:"Basic ".concat(btoa("".concat(r,":").concat(n)))}}}});var o=new t.mapboxgl.Map(e);return new Promise(function(t,e){o.on("load",function(){t(o)}),o.on("error",function(t){e(t)})})}function i(t,e,r,n){M.default.trigger("beforeUpdateWmsLayerType");var o=e+"-source",i=t.getSource(o);if(!i){var u=new Error("No source found with name: ".concat(o));return z.default.error(u),u}var c=k.default.getCoordinateParams(i.url),s=q.cloneDeep(k.default.baseLayerParams),f=b(r),l=k.default.getQueryParamsObject(i.url);"labels"!==l.STYLES&&"labels"===r?(s.layers=l.layers,f.LABEL_LAYER=l.layers,f.LABEL_X_ATTR=c.X_ATTR,f.LABEL_Y_ATTR=c.Y_ATTR):f.layers=l.layers;var d={};q.merge(d,s,f,c);var p=i.url.split("?")[0],h=n||200,v=a(t,p,o,e,d,h);return M.default.trigger("afterUpdateWmsLayerType"),{redraw:v,debounceLimit:h}}function u(t,e){M.default.trigger("beforeWmsLayerUpdated");var r=e.wmsUrl,n=e.layerId+"-source",o=t.getSource(n);if(!o)return void z.default.warn("No source found with name: ".concat(n));var i=k.default.getQueryParamsObject(o.url),u=q.get(e,"renderingOptions.X_ATTR",q.get(e,"xAttr",null)),c=q.get(e,"renderingOptions.Y_ATTR",q.get(e,"yAttr",null)),s=q.get(e,"renderingOptions.GEO_ATTR",q.get(e,"geoAttr",null));u&&c?(i.X_ATTR=u,i.Y_ATTR=c,delete i.GEO_ATTR):s&&(i.GEO_ATTR=s,delete i.X_ATTR,delete i.Y_ATTR);var f=q.get(e,"tableName",q.get(e,"layers",null));f&&k.default.setNoCase(i,"layers",f),q.forEach(e.renderingOptions,function(t,e){k.default.setNoCase(i,e,t)});var l=q.get(e,"debounceLimit",200),d=a(t,r,n,e.layerId,i,l);return M.default.trigger("afterWmsLayerUpdated"),{map:t,wmsUrl:r,sourceName:n,layerId:e.layerId,queryParams:i,redraw:d}}function a(t,e,r,n,o,i){var u=q.findIndex(t._listeners.zoomend,function(t){return t.sourceName===r}),a=q.findIndex(t._listeners.moveend,function(t){return t.sourceName===r});if(u>-1){var c=t._listeners.zoomend[u];t.off("zoomend",c)}if(a>-1){var s=t._listeners.moveend[a];t.off("moveend",s)}var f=k.default.bindWmsToSource.bind(this,t,e,n,o),l=q.debounce(f,i);return l.sourceName=r,t.on("moveend",l).on("zoomend",l),l(),f}function c(t,e){return M.default.trigger("beforeZoomToBounds"),k.default.getTableBoundary(e).then(function(e){return M.default.trigger("afterZoomToBounds"),t.fitBounds(e,{padding:20})}).catch(function(t){return z.default.error(t),t})}function s(t,e){var r=q.get(e,"renderingOptions",{}),n=q.cloneDeep(k.default.baseLayerParams),o=k.default.getNoCase(n.renderingOptions,"styles",k.default.getNoCase(e,"layerType",null)),i=b(o);n.STYLES=o,"labels"===o?(n.LABEL_LAYER=e.tableName,n.LABEL_X_ATTR=e.LABEL_X_ATTR||e.xAttr,n.LABEL_Y_ATTR=e.LABEL_Y_ATTR||e.yAttr):(n.layers=e.tableName,e.xAttr&&e.yAttr?(n.X_ATTR=e.xAttr,n.Y_ATTR=e.yAttr):n.GEO_ATTR=e.geoAttr),q.forEach(i,function(t,e){k.default.setOptionOrDefault(n,r,i,e)}),"cb_raster"===o&&R.default.validateParams(n);var a="".concat(e.layerId,"-source"),c=t.getLayer("".concat(e.layerId,"-layer")),s=t.getSource(a);if(c||s)M.default.trigger("beforeWmsLayerAdded"),u(t,e),M.default.trigger("afterWmsLayerAdded");else{M.default.trigger("beforeWmsLayerAdded"),k.default.bindWmsToSource(t,e.wmsUrl,e.layerId,n,e),u(t,e),M.default.trigger("afterWmsLayerAdded");var f=p.bind(this,t,n,e),l=q.debounce(f,500);window.addEventListener("resize",l)}return{layerParams:n}}function f(t,e){k.default.removeLayer(t,e+"-layer"),k.default.removeSource(t,e+"-source"),q.remove(t._listeners.moveend,function(t){return t.sourceName==="".concat(e,"-source")}),q.remove(t._listeners.zoomend,function(t){return t.sourceName==="".concat(e,"-source")})}function l(t,e,r){t.setPaintProperty(e+"-layer","raster-opacity",r)}function d(t,e){return M.default.trigger("beforeClusterLayerAdded"),C.default.addClusterLayer(t,e).then(function(t){return M.default.trigger("afterClusterLayerAdded"),t})}function p(t,e,r){k.default.removeLayer(t,r.layerId+"-layer"),k.default.removeSource(t,r.layerId+"-source");var n=k.default.getDivDimensions(t._container.id);e.height=n.height,e.width=n.width,k.default.bindWmsToSource(t,r.wmsUrl,r.layerId,e,r)}function h(t,e){M.default.trigger("beforeWmsLayerRemoved"),k.default.removeLayer(t,e+"-layer"),M.default.trigger("afterWmsLayerRemoved")}function v(t,e){M.default.trigger("beforeWmsSourceRemoved"),k.default.removeSource(t,e+"-source"),M.default.trigger("afterWmsSourceRemoved")}function g(t,e){M.default.register(t,e)}function y(t,e){M.default.unregister(t,e)}function m(t,e){M.default.unregisterById(t,e)}function _(t){H.default.disableIdentifyMode(t)}function b(t){var e;return"heatmap"===t?e=q.cloneDeep(N.default.getLayerDefaults()):"raster"===t?e=q.cloneDeep(U.default.getLayerDefaults()):"cb_raster"===t?e=q.cloneDeep(R.default.getLayerDefaults()):"labels"===t?e=q.cloneDeep(B.default.getLayerDefaults()):"contour"===t?e=q.cloneDeep(P.default.getLayerDefaults()):z.default.error("Layer type not recognized. Cannot load layer defaults."),e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var w=n(r(23)),x=n(r(16)),A=n(r(34)),E=n(r(183)),S=n(r(83)),j=n(r(21)),T=n(r(56)),O=n(r(91)),L=n(r(229)),R=n(r(231)),C=n(r(238)),I=n(r(251)),P=n(r(253)),M=n(r(93)),N=n(r(254)),k=n(r(37)),F=n(r(255)),D=n(r(283)),B=n(r(285)),z=n(r(10)),U=n(r(286)),H=n(r(57)),q={cloneDeep:x.default,get:A.default,merge:E.default,debounce:S.default,forEach:j.default,findIndex:T.default,remove:O.default,extend:L.default},V={addClusterLayer:d,addWmsLayer:s,disableIdentifyMode:_,on:g,off:y,offById:m,removeLayer:h,removeSource:v,removeClusterLayer:C.default.removeClusterLayer,removeWmsLayer:f,setLayerOpacity:l,initMap:o,updateWmsLayer:u,updateWmsLayerType:i,zoomToBounds:c};"undefined"!=typeof ENV_TESTING&&!0===ENV_TESTING&&(V._spec={axios:w.default,cluster:C.default,helper:k.default});var W=q.extend(V,F.default,D.default,I.default);e.default=W},function(t,e,r){"use strict";function n(t){var e=new u(t),r=i(u.prototype.request,e);return o.extend(r,u.prototype,e),o.extend(r,e),r}var o=r(1),i=r(58),u=r(105),a=r(38),c=n(a);c.Axios=u,c.create=function(t){return n(o.merge(a,t))},c.Cancel=r(63),c.CancelToken=r(119),c.isCancel=r(62),c.all=function(t){return Promise.all(t)},c.spread=r(120),t.exports=c,t.exports.default=c},function(t,e){function r(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function n(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&r(t.slice(0,0))}t.exports=function(t){return null!=t&&(r(t)||n(t)||!!t._isBuffer)}},function(t,e,r){"use strict";function n(t){this.defaults=t,this.interceptors={request:new u,response:new u}}var o=r(38),i=r(1),u=r(114),a=r(115);n.prototype.request=function(t){"string"==typeof t&&(t=i.merge({url:arguments[0]},arguments[1])),t=i.merge(o,{method:"get"},this.defaults,t),t.method=t.method.toLowerCase();var e=[a,void 0],r=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)r=r.then(e.shift(),e.shift());return r},i.forEach(["delete","get","head","options"],function(t){n.prototype[t]=function(e,r){return this.request(i.merge(r||{},{method:t,url:e}))}}),i.forEach(["post","put","patch"],function(t){n.prototype[t]=function(e,r,n){return this.request(i.merge(n||{},{method:t,url:e,data:r}))}}),t.exports=n},function(t,e,r){"use strict";var n=r(1);t.exports=function(t,e){n.forEach(t,function(r,n){n!==e&&n.toUpperCase()===e.toUpperCase()&&(t[e]=r,delete t[n])})}},function(t,e,r){"use strict";var n=r(61);t.exports=function(t,e,r){var o=r.config.validateStatus;r.status&&o&&!o(r.status)?e(n("Request failed with status code "+r.status,r.config,null,r.request,r)):t(r)}},function(t,e,r){"use strict";t.exports=function(t,e,r,n,o){return t.config=e,r&&(t.code=r),t.request=n,t.response=o,t}},function(t,e,r){"use strict";function n(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var o=r(1);t.exports=function(t,e,r){if(!e)return t;var i;if(r)i=r(e);else if(o.isURLSearchParams(e))i=e.toString();else{var u=[];o.forEach(e,function(t,e){null!==t&&void 0!==t&&(o.isArray(t)?e+="[]":t=[t],o.forEach(t,function(t){o.isDate(t)?t=t.toISOString():o.isObject(t)&&(t=JSON.stringify(t)),u.push(n(e)+"="+n(t))}))}),i=u.join("&")}return i&&(t+=(-1===t.indexOf("?")?"?":"&")+i),t}},function(t,e,r){"use strict";var n=r(1),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,r,i,u={};return t?(n.forEach(t.split("\n"),function(t){if(i=t.indexOf(":"),e=n.trim(t.substr(0,i)).toLowerCase(),r=n.trim(t.substr(i+1)),e){if(u[e]&&o.indexOf(e)>=0)return;u[e]="set-cookie"===e?(u[e]?u[e]:[]).concat([r]):u[e]?u[e]+", "+r:r}}),u):u}},function(t,e,r){"use strict";var n=r(1);t.exports=n.isStandardBrowserEnv()?function(){function t(t){var e=t;return r&&(o.setAttribute("href",e),e=o.href),o.setAttribute("href",e),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}var e,r=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");return e=t(window.location.href),function(r){var o=n.isString(r)?t(r):r;return o.protocol===e.protocol&&o.host===e.host}}():function(){return function(){return!0}}()},function(t,e,r){"use strict";function n(){this.message="String contains an invalid character"}function o(t){for(var e,r,o=String(t),u="",a=0,c=i;o.charAt(0|a)||(c="=",a%1);u+=c.charAt(63&e>>8-a%1*8)){if((r=o.charCodeAt(a+=.75))>255)throw new n;e=e<<8|r}return u}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.prototype=new Error,n.prototype.code=5,n.prototype.name="InvalidCharacterError",t.exports=o},function(t,e,r){"use strict";var n=r(1);t.exports=n.isStandardBrowserEnv()?function(){return{write:function(t,e,r,o,i,u){var a=[];a.push(t+"="+encodeURIComponent(e)),n.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),n.isString(o)&&a.push("path="+o),n.isString(i)&&a.push("domain="+i),!0===u&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(t,e,r){"use strict";function n(){this.handlers=[]}var o=r(1);n.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},n.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},n.prototype.forEach=function(t){o.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=n},function(t,e,r){"use strict";function n(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var o=r(1),i=r(116),u=r(62),a=r(38),c=r(117),s=r(118);t.exports=function(t){return n(t),t.baseURL&&!c(t.url)&&(t.url=s(t.baseURL,t.url)),t.headers=t.headers||{},t.data=i(t.data,t.headers,t.transformRequest),t.headers=o.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),o.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||a.adapter)(t).then(function(e){return n(t),e.data=i(e.data,e.headers,t.transformResponse),e},function(e){return u(e)||(n(t),e&&e.response&&(e.response.data=i(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(t,e,r){"use strict";var n=r(1);t.exports=function(t,e,r){return n.forEach(r,function(r){t=r(t,e)}),t}},function(t,e,r){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,r){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,r){"use strict";function n(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var r=this;t(function(t){r.reason||(r.reason=new o(t),e(r.reason))})}var o=r(63);n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var t;return{token:new n(function(e){t=e}),cancel:t}},t.exports=n},function(t,e,r){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,r){function n(t,e,r,P,M,N){var k,F=e&S,D=e&j,B=e&T;if(r&&(k=M?r(t,P,M,N):r(t)),void 0!==k)return k;if(!x(t))return t;var z=_(t);if(z){if(k=g(t),!F)return f(t,k)}else{var U=v(t),H=U==L||U==R;if(b(t))return s(t,F);if(U==C||U==O||H&&!M){if(k=D||H?{}:m(t),!F)return D?d(t,c(k,t)):l(t,a(k,t))}else{if(!I[U])return M?t:{};k=y(t,U,F)}}N||(N=new o);var q=N.get(t);if(q)return q;if(N.set(t,k),A(t))return t.forEach(function(o){k.add(n(o,e,r,o,t,N))}),k;if(w(t))return t.forEach(function(o,i){k.set(i,n(o,e,r,i,t,N))}),k;var V=B?D?h:p:D?keysIn:E,W=z?void 0:V(t);return i(W||t,function(o,i){W&&(i=o,o=t[i]),u(k,i,n(o,e,r,i,t,N))}),k}var o=r(24),i=r(66),u=r(43),a=r(150),c=r(157),s=r(70),f=r(50),l=r(160),d=r(162),p=r(73),h=r(163),v=r(33),g=r(168),y=r(169),m=r(77),_=r(0),b=r(30),w=r(174),x=r(2),A=r(176),E=r(14),S=1,j=2,T=4,O="[object Arguments]",L="[object Function]",R="[object GeneratorFunction]",C="[object Object]",I={};I[O]=I["[object Array]"]=I["[object ArrayBuffer]"]=I["[object DataView]"]=I["[object Boolean]"]=I["[object Date]"]=I["[object Float32Array]"]=I["[object Float64Array]"]=I["[object Int8Array]"]=I["[object Int16Array]"]=I["[object Int32Array]"]=I["[object Map]"]=I["[object Number]"]=I[C]=I["[object RegExp]"]=I["[object Set]"]=I["[object String]"]=I["[object Symbol]"]=I["[object Uint8Array]"]=I["[object Uint8ClampedArray]"]=I["[object Uint16Array]"]=I["[object Uint32Array]"]=!0,I["[object Error]"]=I[L]=I["[object WeakMap]"]=!1,t.exports=n},function(t,e){function r(){this.__data__=[],this.size=0}t.exports=r},function(t,e,r){function n(t){var e=this.__data__,r=o(e,t);return!(r<0)&&(r==e.length-1?e.pop():u.call(e,r,1),--this.size,!0)}var o=r(26),i=Array.prototype,u=i.splice;t.exports=n},function(t,e,r){function n(t){var e=this.__data__,r=o(e,t);return r<0?void 0:e[r][1]}var o=r(26);t.exports=n},function(t,e,r){function n(t){return o(this.__data__,t)>-1}var o=r(26);t.exports=n},function(t,e,r){function n(t,e){var r=this.__data__,n=o(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var o=r(26);t.exports=n},function(t,e,r){function n(){this.__data__=new o,this.size=0}var o=r(25);t.exports=n},function(t,e){function r(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}t.exports=r},function(t,e){function r(t){return this.__data__.get(t)}t.exports=r},function(t,e){function r(t){return this.__data__.has(t)}t.exports=r},function(t,e,r){function n(t,e){var r=this.__data__;if(r instanceof o){var n=r.__data__;if(!i||n.length<a-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new u(n)}return r.set(t,e),this.size=r.size,this}var o=r(25),i=r(39),u=r(42),a=200;t.exports=n},function(t,e,r){function n(t){return!(!u(t)||i(t))&&(o(t)?h:s).test(a(t))}var o=r(40),i=r(135),u=r(2),a=r(65),c=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,f=Function.prototype,l=Object.prototype,d=f.toString,p=l.hasOwnProperty,h=RegExp("^"+d.call(p).replace(c,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=n},function(t,e,r){function n(t){var e=u.call(t,c),r=t[c];try{t[c]=void 0;var n=!0}catch(t){}var o=a.call(t);return n&&(e?t[c]=r:delete t[c]),o}var o=r(12),i=Object.prototype,u=i.hasOwnProperty,a=i.toString,c=o?o.toStringTag:void 0;t.exports=n},function(t,e){function r(t){return o.call(t)}var n=Object.prototype,o=n.toString;t.exports=r},function(t,e,r){function n(t){return!!i&&i in t}var o=r(136),i=function(){var t=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=n},function(t,e,r){var n=r(3),o=n["__core-js_shared__"];t.exports=o},function(t,e){function r(t,e){return null==t?void 0:t[e]}t.exports=r},function(t,e,r){function n(){this.size=0,this.__data__={hash:new o,map:new(u||i),string:new o}}var o=r(139),i=r(25),u=r(39);t.exports=n},function(t,e,r){function n(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}var o=r(140),i=r(141),u=r(142),a=r(143),c=r(144);n.prototype.clear=o,n.prototype.delete=i,n.prototype.get=u,n.prototype.has=a,n.prototype.set=c,t.exports=n},function(t,e,r){function n(){this.__data__=o?o(null):{},this.size=0}var o=r(27);t.exports=n},function(t,e){function r(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}t.exports=r},function(t,e,r){function n(t){var e=this.__data__;if(o){var r=e[t];return r===i?void 0:r}return a.call(e,t)?e[t]:void 0}var o=r(27),i="__lodash_hash_undefined__",u=Object.prototype,a=u.hasOwnProperty;t.exports=n},function(t,e,r){function n(t){var e=this.__data__;return o?void 0!==e[t]:u.call(e,t)}var o=r(27),i=Object.prototype,u=i.hasOwnProperty;t.exports=n},function(t,e,r){function n(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=o&&void 0===e?i:e,this}var o=r(27),i="__lodash_hash_undefined__";t.exports=n},function(t,e,r){function n(t){var e=o(this,t).delete(t);return this.size-=e?1:0,e}var o=r(28);t.exports=n},function(t,e){function r(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}t.exports=r},function(t,e,r){function n(t){return o(this,t).get(t)}var o=r(28);t.exports=n},function(t,e,r){function n(t){return o(this,t).has(t)}var o=r(28);t.exports=n},function(t,e,r){function n(t,e){var r=o(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var o=r(28);t.exports=n},function(t,e,r){function n(t,e){return t&&o(e,i(e),t)}var o=r(13),i=r(14);t.exports=n},function(t,e){function r(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}t.exports=r},function(t,e,r){function n(t){return i(t)&&o(t)==u}var o=r(11),i=r(4),u="[object Arguments]";t.exports=n},function(t,e){function r(){return!1}t.exports=r},function(t,e,r){function n(t){return u(t)&&i(t.length)&&!!a[o(t)]}var o=r(11),i=r(46),u=r(4),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=n},function(t,e,r){function n(t){if(!o(t))return i(t);var e=[];for(var r in Object(t))a.call(t,r)&&"constructor"!=r&&e.push(r);return e}var o=r(49),i=r(156),u=Object.prototype,a=u.hasOwnProperty;t.exports=n},function(t,e,r){var n=r(69),o=n(Object.keys,Object);t.exports=o},function(t,e,r){function n(t,e){return t&&o(e,i(e),t)}var o=r(13),i=r(19);t.exports=n},function(t,e,r){function n(t){if(!o(t))return u(t);var e=i(t),r=[];for(var n in t)("constructor"!=n||!e&&c.call(t,n))&&r.push(n);return r}var o=r(2),i=r(49),u=r(159),a=Object.prototype,c=a.hasOwnProperty;t.exports=n},function(t,e){function r(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}t.exports=r},function(t,e,r){function n(t,e){return o(t,i(t),e)}var o=r(13),i=r(51);t.exports=n},function(t,e){function r(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var u=t[r];e(u,r,t)&&(i[o++]=u)}return i}t.exports=r},function(t,e,r){function n(t,e){return o(t,i(t),e)}var o=r(13),i=r(72);t.exports=n},function(t,e,r){function n(t){return o(t,u,i)}var o=r(74),i=r(72),u=r(19);t.exports=n},function(t,e,r){var n=r(7),o=r(3),i=n(o,"DataView");t.exports=i},function(t,e,r){var n=r(7),o=r(3),i=n(o,"Promise");t.exports=i},function(t,e,r){var n=r(7),o=r(3),i=n(o,"Set");t.exports=i},function(t,e,r){var n=r(7),o=r(3),i=n(o,"WeakMap");t.exports=i},function(t,e){function r(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&o.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var n=Object.prototype,o=n.hasOwnProperty;t.exports=r},function(t,e,r){function n(t,e,r){var n=t.constructor;switch(e){case y:return o(t);case s:case f:return new n(+t);case m:return i(t,r);case _:case b:case w:case x:case A:case E:case S:case j:case T:return c(t,r);case l:return new n;case d:case v:return new n(t);case p:return u(t);case h:return new n;case g:return a(t)}}var o=r(53),i=r(170),u=r(171),a=r(172),c=r(76),s="[object Boolean]",f="[object Date]",l="[object Map]",d="[object Number]",p="[object RegExp]",h="[object Set]",v="[object String]",g="[object Symbol]",y="[object ArrayBuffer]",m="[object DataView]",_="[object Float32Array]",b="[object Float64Array]",w="[object Int8Array]",x="[object Int16Array]",A="[object Int32Array]",E="[object Uint8Array]",S="[object Uint8ClampedArray]",j="[object Uint16Array]",T="[object Uint32Array]";t.exports=n},function(t,e,r){function n(t,e){var r=e?o(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var o=r(53);t.exports=n},function(t,e){function r(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}var n=/\w*$/;t.exports=r},function(t,e,r){function n(t){return u?Object(u.call(t)):{}}var o=r(12),i=o?o.prototype:void 0,u=i?i.valueOf:void 0;t.exports=n},function(t,e,r){var n=r(2),o=Object.create,i=function(){function t(){}return function(e){if(!n(e))return{};if(o)return o(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();t.exports=i},function(t,e,r){var n=r(175),o=r(47),i=r(48),u=i&&i.isMap,a=u?o(u):n;t.exports=a},function(t,e,r){function n(t){return i(t)&&o(t)==u}var o=r(33),i=r(4),u="[object Map]";t.exports=n},function(t,e,r){var n=r(177),o=r(47),i=r(48),u=i&&i.isSet,a=u?o(u):n;t.exports=a},function(t,e,r){function n(t){return i(t)&&o(t)==u}var o=r(33),i=r(4),u="[object Set]";t.exports=n},function(t,e,r){var n=r(179),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,u=n(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(o,function(t,r,n,o){e.push(n?o.replace(i,"$1"):r||t)}),e});t.exports=u},function(t,e,r){function n(t){var e=o(t,function(t){return r.size===i&&r.clear(),t}),r=e.cache;return e}var o=r(180),i=500;t.exports=n},function(t,e,r){function n(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(i);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var u=t.apply(this,n);return r.cache=i.set(o,u)||i,u};return r.cache=new(n.Cache||o),r}var o=r(42),i="Expected a function";n.Cache=o,t.exports=n},function(t,e,r){function n(t){return null==t?"":o(t)}var o=r(182);t.exports=n},function(t,e,r){function n(t){if("string"==typeof t)return t;if(u(t))return i(t,n)+"";if(a(t))return f?f.call(t):"";var e=t+"";return"0"==e&&1/t==-c?"-0":e}var o=r(12),i=r(78),u=r(0),a=r(20),c=1/0,s=o?o.prototype:void 0,f=s?s.toString:void 0;t.exports=n},function(t,e,r){var n=r(184),o=r(82),i=o(function(t,e,r){n(t,e,r)});t.exports=i},function(t,e,r){function n(t,e,r,l,d){t!==e&&u(e,function(u,s){if(c(u))d||(d=new o),a(t,e,s,r,n,l,d);else{var p=l?l(f(t,s),u,s+"",t,e,d):void 0;void 0===p&&(p=u),i(t,s,p)}},s)}var o=r(24),i=r(79),u=r(80),a=r(186),c=r(2),s=r(19),f=r(81);t.exports=n},function(t,e){function r(t){return function(e,r,n){for(var o=-1,i=Object(e),u=n(e),a=u.length;a--;){var c=u[t?a:++o];if(!1===r(i[c],c,i))break}return e}}t.exports=r},function(t,e,r){function n(t,e,r,n,_,b,w){var x=y(t,r),A=y(e,r),E=w.get(A);if(E)return void o(t,r,E);var S=b?b(x,A,r+"",t,e,w):void 0,j=void 0===S;if(j){var T=f(A),O=!T&&d(A),L=!T&&!O&&g(A);S=A,T||O||L?f(x)?S=x:l(x)?S=a(x):O?(j=!1,S=i(A,!0)):L?(j=!1,S=u(A,!0)):S=[]:v(A)||s(A)?(S=x,s(x)?S=m(x):(!h(x)||n&&p(x))&&(S=c(A))):j=!1}j&&(w.set(A,S),_(S,A,n,b,w),w.delete(A)),o(t,r,S)}var o=r(79),i=r(70),u=r(76),a=r(50),c=r(77),s=r(29),f=r(0),l=r(187),d=r(30),p=r(40),h=r(2),v=r(188),g=r(45),y=r(81),m=r(189);t.exports=n},function(t,e,r){function n(t){return i(t)&&o(t)}var o=r(8),i=r(4);t.exports=n},function(t,e,r){function n(t){if(!u(t)||o(t)!=a)return!1;var e=i(t);if(null===e)return!0;var r=l.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&f.call(r)==d}var o=r(11),i=r(52),u=r(4),a="[object Object]",c=Function.prototype,s=Object.prototype,f=c.toString,l=s.hasOwnProperty,d=f.call(Object);t.exports=n},function(t,e,r){function n(t){return o(t,i(t))}var o=r(13),i=r(19);t.exports=n},function(t,e,r){function n(t,e){return u(i(t,e,o),t+"")}var o=r(36),i=r(191),u=r(193);t.exports=n},function(t,e,r){function n(t,e,r){return e=i(void 0===e?t.length-1:e,0),function(){for(var n=arguments,u=-1,a=i(n.length-e,0),c=Array(a);++u<a;)c[u]=n[e+u];u=-1;for(var s=Array(e+1);++u<e;)s[u]=n[u];return s[e]=r(c),o(t,this,s)}}var o=r(192),i=Math.max;t.exports=n},function(t,e){function r(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}t.exports=r},function(t,e,r){var n=r(194),o=r(196),i=o(n);t.exports=i},function(t,e,r){var n=r(195),o=r(67),i=r(36),u=o?function(t,e){return o(t,"toString",{configurable:!0,enumerable:!1,value:n(e),writable:!0})}:i;t.exports=u},function(t,e){function r(t){return function(){return t}}t.exports=r},function(t,e){function r(t){var e=0,r=0;return function(){var u=i(),a=o-(u-r);if(r=u,a>0){if(++e>=n)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var n=800,o=16,i=Date.now;t.exports=r},function(t,e,r){function n(t,e,r){if(!a(r))return!1;var n=typeof e;return!!("number"==n?i(r)&&u(e,r.length):"string"==n&&e in r)&&o(r[e],t)}var o=r(17),i=r(8),u=r(18),a=r(2);t.exports=n},function(t,e,r){var n=r(3),o=function(){return n.Date.now()};t.exports=o},function(t,e,r){function n(t,e){return function(r,n){if(null==r)return r;if(!o(r))return t(r,n);for(var i=r.length,u=e?i:-1,a=Object(r);(e?u--:++u<i)&&!1!==n(a[u],u,a););return r}}var o=r(8);t.exports=n},function(t,e,r){function n(t){return"function"==typeof t?t:o}var o=r(36);t.exports=n},function(t,e){function r(t,e,r,n){for(var o=t.length,i=r+(n?1:-1);n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}t.exports=r},function(t,e,r){function n(t){var e=i(t);return 1==e.length&&e[0][2]?u(e[0][0],e[0][1]):function(r){return r===t||o(r,t,e)}}var o=r(203),i=r(214),u=r(90);t.exports=n},function(t,e,r){function n(t,e,r,n){var c=r.length,s=c,f=!n;if(null==t)return!s;for(t=Object(t);c--;){var l=r[c];if(f&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++c<s;){l=r[c];var d=l[0],p=t[d],h=l[1];if(f&&l[2]){if(void 0===p&&!(d in t))return!1}else{var v=new o;if(n)var g=n(p,h,d,t,e,v);if(!(void 0===g?i(h,p,u|a,n,v):g))return!1}}return!0}var o=r(24),i=r(87),u=1,a=2;t.exports=n},function(t,e,r){function n(t,e,r,n,g,m){var _=s(t),b=s(e),w=_?h:c(t),x=b?h:c(e);w=w==p?v:w,x=x==p?v:x;var A=w==v,E=x==v,S=w==x;if(S&&f(t)){if(!f(e))return!1;_=!0,A=!1}if(S&&!A)return m||(m=new o),_||l(t)?i(t,e,r,n,g,m):u(t,e,w,r,n,g,m);if(!(r&d)){var j=A&&y.call(t,"__wrapped__"),T=E&&y.call(e,"__wrapped__");if(j||T){var O=j?t.value():t,L=T?e.value():e;return m||(m=new o),g(O,L,r,n,m)}}return!!S&&(m||(m=new o),a(t,e,r,n,g,m))}var o=r(24),i=r(88),u=r(210),a=r(213),c=r(33),s=r(0),f=r(30),l=r(45),d=1,p="[object Arguments]",h="[object Array]",v="[object Object]",g=Object.prototype,y=g.hasOwnProperty;t.exports=n},function(t,e,r){function n(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new o;++e<r;)this.add(t[e])}var o=r(42),i=r(206),u=r(207);n.prototype.add=n.prototype.push=i,n.prototype.has=u,t.exports=n},function(t,e){function r(t){return this.__data__.set(t,n),this}var n="__lodash_hash_undefined__";t.exports=r},function(t,e){function r(t){return this.__data__.has(t)}t.exports=r},function(t,e){function r(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}t.exports=r},function(t,e){function r(t,e){return t.has(e)}t.exports=r},function(t,e,r){function n(t,e,r,n,o,A,S){switch(r){case x:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case w:return!(t.byteLength!=e.byteLength||!A(new i(t),new i(e)));case d:case p:case g:return u(+t,+e);case h:return t.name==e.name&&t.message==e.message;case y:case _:return t==e+"";case v:var j=c;case m:var T=n&f;if(j||(j=s),t.size!=e.size&&!T)return!1;var O=S.get(t);if(O)return O==e;n|=l,S.set(t,e);var L=a(j(t),j(e),n,o,A,S);return S.delete(t),L;case b:if(E)return E.call(t)==E.call(e)}return!1}var o=r(12),i=r(75),u=r(17),a=r(88),c=r(211),s=r(212),f=1,l=2,d="[object Boolean]",p="[object Date]",h="[object Error]",v="[object Map]",g="[object Number]",y="[object RegExp]",m="[object Set]",_="[object String]",b="[object Symbol]",w="[object ArrayBuffer]",x="[object DataView]",A=o?o.prototype:void 0,E=A?A.valueOf:void 0;t.exports=n},function(t,e){function r(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}t.exports=r},function(t,e){function r(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}t.exports=r},function(t,e,r){function n(t,e,r,n,u,c){var s=r&i,f=o(t),l=f.length;if(l!=o(e).length&&!s)return!1;for(var d=l;d--;){var p=f[d];if(!(s?p in e:a.call(e,p)))return!1}var h=c.get(t);if(h&&c.get(e))return h==e;var v=!0;c.set(t,e),c.set(e,t);for(var g=s;++d<l;){p=f[d];var y=t[p],m=e[p];if(n)var _=s?n(m,y,p,e,t,c):n(y,m,p,t,e,c);if(!(void 0===_?y===m||u(y,m,r,n,c):_)){v=!1;break}g||(g="constructor"==p)}if(v&&!g){var b=t.constructor,w=e.constructor;b!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w)&&(v=!1)}return c.delete(t),c.delete(e),v}var o=r(73),i=1,u=Object.prototype,a=u.hasOwnProperty;t.exports=n},function(t,e,r){function n(t){for(var e=i(t),r=e.length;r--;){var n=e[r],u=t[n];e[r]=[n,u,o(u)]}return e}var o=r(89),i=r(14);t.exports=n},function(t,e,r){function n(t,e){return a(t)&&c(e)?s(f(t),e):function(r){var n=i(r,t);return void 0===n&&n===e?u(r,t):o(e,n,l|d)}}var o=r(87),i=r(34),u=r(216),a=r(55),c=r(89),s=r(90),f=r(15),l=1,d=2;t.exports=n},function(t,e,r){function n(t,e){return null!=t&&i(t,e,o)}var o=r(217),i=r(218);t.exports=n},function(t,e){function r(t,e){return null!=t&&e in Object(t)}t.exports=r},function(t,e,r){function n(t,e,r){e=o(e,t);for(var n=-1,f=e.length,l=!1;++n<f;){var d=s(e[n]);if(!(l=null!=t&&r(t,d)))break;t=t[d]}return l||++n!=f?l:!!(f=null==t?0:t.length)&&c(f)&&a(d,f)&&(u(t)||i(t))}var o=r(35),i=r(29),u=r(0),a=r(18),c=r(46),s=r(15);t.exports=n},function(t,e,r){function n(t){return u(t)?o(a(t)):i(t)}var o=r(220),i=r(221),u=r(55),a=r(15);t.exports=n},function(t,e){function r(t){return function(e){return null==e?void 0:e[t]}}t.exports=r},function(t,e,r){function n(t){return function(e){return o(e,t)}}var o=r(54);t.exports=n},function(t,e,r){function n(t){var e=o(t),r=e%1;return e===e?r?e-r:e:0}var o=r(223);t.exports=n},function(t,e,r){function n(t){if(!t)return 0===t?t:0;if((t=o(t))===i||t===-i){return(t<0?-1:1)*u}return t===t?t:0}var o=r(84),i=1/0,u=1.7976931348623157e308;t.exports=n},function(t,e,r){function n(t,e){for(var r=t?e.length:0,n=r-1;r--;){var u=e[r];if(r==n||u!==c){var c=u;i(u)?a.call(t,u,1):o(t,u)}}return t}var o=r(225),i=r(18),u=Array.prototype,a=u.splice;t.exports=n},function(t,e,r){function n(t,e){return e=o(e,t),null==(t=u(t,e))||delete t[a(i(e))]}var o=r(35),i=r(226),u=r(227),a=r(15);t.exports=n},function(t,e){function r(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}t.exports=r},function(t,e,r){function n(t,e){return e.length<2?t:o(t,i(e,0,-1))}var o=r(54),i=r(228);t.exports=n},function(t,e){function r(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),r=r>o?o:r,r<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var i=Array(o);++n<o;)i[n]=t[n+e];return i}t.exports=r},function(t,e,r){t.exports=r(230)},function(t,e,r){var n=r(13),o=r(82),i=r(19),u=o(function(t,e){n(e,i(e),t)});t.exports=u},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(){return p}function i(t){var e={errs:[],isValid:!0},r={missingParams:c(t),argLength:a(t),validBreaks:u(t)};return d.forEach(r,function(t){t.isValid||(e.isValid=!1,d.forEach(t.errs,function(t){l.default.error(t),e.errs.push(t)}))}),e}function u(t){var e=!0,r=[],n=f.default.getNoCase(t,"CB_VALS",null);if(!n)return{isValid:!1,errs:["Missing required parameters."]};for(var o=n.split(","),i=0;i<o.length;i++){var u=o[i].split(":");u[0]===u[1]&&(e=!1,r.push("Break is not formatted correctly. Values should not be the same for: ".concat(o[i])))}return{isValid:e,errs:r}}function a(t){var e=!0,r=f.default.getNoCase(t,"CB_VALS",null),n=f.default.getNoCase(t,"POINTCOLORS",null),o=f.default.getNoCase(t,"POINTSIZES",null),i=f.default.getNoCase(t,"POINTSHAPES",null);if(!(r&&n&&o&&i))return{isValid:!1,errs:["Missing required parameters."]};var u={CB_VALS:r.split(",").length,POINTCOLORS:n.split(",").length,POINTSIZES:o.split(",").length,POINTSHAPES:i.split(",").length},a=0,c=[];(0,s.default)(u,function(t,e){t>a&&0===a&&(a=t),t!==a&&a>0&&c.push(e)});var l;return c.length>0&&(e=!1,l=["The following parameters do not match the length of CB_VALS (".concat(a,"): ").concat(c.join(", "))]),{isValid:e,errs:l}}function c(t){var e=!0,r=[],n=f.default.getNoCase(t,"CB_ATTR",null),o=f.default.getNoCase(t,"CB_VALS",null),i=f.default.getNoCase(t,"POINTCOLORS",null),u=f.default.getNoCase(t,"POINTSIZES",null),a=f.default.getNoCase(t,"POINTSHAPES",null);return n||(r.push("No CB_ATTR provided for CB_RASTER WMS layer!"),e=!1),o||(r.push("No CB_VALS provided for CB_RASTER WMS layer!"),e=!1),i||(e=!1,r.push("No POINTCOLORS provided for CB_RASTER WMS layer!")),u||(e=!1,r.push("No POINTSIZES provided for CB_RASTER WMS layer!")),a||(e=!1,r.push("No POINTSHAPES provided for CB_RASTER WMS layer!")),{isValid:e,errs:r}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(r(21)),f=n(r(37)),l=n(r(10)),d={forEach:s.default},p={STYLES:"cb_raster",CB_ATTR:"",CB_VALS:"",ORDER_CLASSES:!0,USE_POINT_RENDERER:!0,POINTCOLORS:"FF0000",POINTSIZES:"3",POINTSHAPES:"circle"},h={getLayerDefaults:o,validateParams:i};e.default=h},function(t,e,r){function n(t,e){return o(t,u(e,3),i)}var o=r(233),i=r(86),u=r(9);t.exports=n},function(t,e){function r(t,e,r){var n;return r(t,function(t,r,o){if(e(t,r,o))return n=r,!1}),n}t.exports=r},function(t,e,r){var n=r(235),o=r(56),i=n(o);t.exports=i},function(t,e,r){function n(t){return function(e,r,n){var a=Object(e);if(!i(e)){var c=o(r,3);e=u(e),r=function(t){return c(a[t],t,a)}}var s=t(e,r,n);return s>-1?a[c?e[s]:s]:void 0}}var o=r(9),i=r(8),u=r(14);t.exports=n},function(t,e,r){function n(t,e,r){return null==t?t:o(t,e,r)}var o=r(237);t.exports=n},function(t,e,r){function n(t,e,r,n){if(!a(t))return t;e=i(e,t);for(var s=-1,f=e.length,l=f-1,d=t;null!=d&&++s<f;){var p=c(e[s]),h=r;if(s!=l){var v=d[p];h=n?n(v,p,d):void 0,void 0===h&&(h=a(v)?v:u(e[s+1])?[]:{})}o(d,p,h),d=d[p]}return t}var o=r(43),i=r(35),u=r(18),a=r(2),c=r(15);t.exports=n},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){function i(t,e){try{var r=c[t](e),i=r.value}catch(t){return void o(t)}r.done?n(i):Promise.resolve(i).then(u,a)}function u(t){i("next",t)}function a(t){i("throw",t)}var c=t.apply(e,r);u()})}}function i(t,e){return u.apply(this,arguments)}function u(){return u=o(regeneratorRuntime.mark(function t(e,r){var n,o,i,u,a,c,s,f,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this,o={clusterRadius:I.get(r,"clusterRadius",40),clusterMaxZoom:I.get(r,"clusterMaxZoom",14),clientAggregations:I.get(r,"clientAggregations",[]),labelColor:I.get(r,"labelColor","#000000"),labelHaloColor:I.get(r,"labelHaloColor","#FFFFFF"),minSize:I.get(r,"minSize",1),maxSize:I.get(r,"maxSize",20),minColor:I.get(r,"minColor","#FF0000"),maxColor:I.get(r,"maxColor","#00FF00")},i=r.layerId+"-source",u=r.layerId+"-layer",a=r.layerId+"-labels-layer",t.prev=5,t.next=8,n._loadClusterFeatures(e,r);case 8:c=t.sent,t.next=14;break;case 11:t.prev=11,t.t0=t.catch(5),C.default.error(t.t0);case 14:return s=this.initCluster(c,o.clusterRadius,o.clusterMaxZoom,o.clientAggregations),L.default.trigger("beforeClusterLayerAdded"),R.default.addSource(e,i,this._getClusterSourceDef(i,s.cluster,e.getZoom())),R.default.addLayer(e,this._getClusterLayerDef(u,i)),R.default.addLayer(e,this._getLabelsLayerDef(a,i,o.labelColor,o.labelHaloColor)),L.default.trigger("afterClusterLayerAdded"),f=this.updateClusters.bind(this,e,i,u,s.cluster,o.clusterRadius,o.minSize,o.maxSize,o.minColor,o.maxColor),f.sourceName=i,e.on("zoomend",f).on("moveend",f),l=function(t){for(var o=t.features[0].geometry.coordinates.slice(),i=n._propertiesToList(t.features[0].properties);Math.abs(t.lngLat.lng-o[0])>180;)o[0]+=t.lngLat.lng>o[0]?360:-360;(new r.mapboxgl.Popup).setLngLat(o).setHTML(i).addTo(e)},e.on("click",u,l).on("click",a,l),f(),t.abrupt("return",{map:e,cluster:s,features:c,updateFn:f,options:o});case 27:case"end":return t.stop()}},t,this,[[5,11]])})),u.apply(this,arguments)}function a(t,e,r,n){var o=[{key:"clusterTotalSum",initial:0,map:function(t,e){return Number(e.clusterTotalSum)},reduce:function(t,e){return t.clusterTotalSum+R.default.roundTo(e.clusterTotalSum,2)}},{key:"clusterTotalSumLocalized",initial:0,reduce:function(t,e){return t.clusterTotalSum.toLocaleString(void 0)}},{key:"smallestClusterSize",initial:0,map:function(t,e){return Number(e.clusterTotalSum)},reduce:function(t,e){return 0===t.smallestClusterSize?e.clusterTotalSum:Math.min(t.smallestClusterSize,e.clusterTotalSum)}},{key:"largestClusterSize",initial:0,map:function(t,e){return Number(e.clusterTotalSum)},reduce:function(t,e){return 0===t.largestClusterSize?e.clusterTotalSum:Math.max(t.largestClusterSize,e.clusterTotalSum)}}],i=[];i=n&&n.length>0?I.concat(o,n):o;var u=(0,T.default)({radius:e,maxZoom:r,initial:function(){var t={};return I.forEach(i,function(e){t[e.key]=e.initial}),t},map:function(t){var e=I.cloneDeep(t);return I.forEach(i,function(r){r.map&&(e[r.key]=r.map(r.key,t))}),e},reduce:function(t,e){I.forEach(i,function(r){t[r.key]=r.reduce(t,e)})}});return u.load(t),{cluster:u,aggregations:i}}function c(t,e,r,n,o,i,u,a,c){n.options.radius=parseInt(o);var s=t.getBounds(),f=[s._sw.lng,s._sw.lat,s._ne.lng,s._ne.lat],l=n.getClusters(f,Math.floor(t.getZoom())),d=(0,O.featureCollection)(l),p=m(t,n,"clusterTotalSum");if(t.getLayer(r)){var h=g(p,i,u);t.setPaintProperty(r,"circle-radius",h);var v=y(p,a,c);t.setPaintProperty(r,"circle-color",v);var _=t.getSource(e);return _&&_.setData(d).load(),{minMax:p,map:t}}}function s(t,e){R.default.removeLayer(t,e+"-layer"),R.default.removeLayer(t,e+"-labels-layer"),R.default.removeSource(t,e+"-source"),I.remove(t._listeners.moveend,function(t){return t.sourceName==="".concat(e,"-source")}),I.remove(t._listeners.zoomend,function(t){return t.sourceName==="".concat(e,"-source")})}function f(t){var e="<h3>Properties</h3>";return e+='<ul class="cluster-properties">',I.forEach(t,function(t,r){e+='<li class="cluster-property '.concat(l(r),'"><b>').concat(r,"</b>: ").concat(t,"</li>")}),e+="</ul>"}function l(t){var e="";return e=t.replace(/ /g,"-").toLowerCase(),e=e.replace(/[.,\/#!$%^&*;:{}=_`~()]/g,"")}function d(t,e){var r={table_name:e.tableName,column_names:["SUBSTRING(".concat(e.geohashAttr,", 1, ").concat(e.precision,") as geohash_prefix"),"COUNT(*) as clusterTotalSum","AVG(".concat(e.xAttr,") as ").concat(e.xAttr),"AVG(".concat(e.yAttr,") as ").concat(e.yAttr)],limit:-9999,offset:0,encoding:"json",options:{sort_order:"descending",sort_by:"value"}};return e.dbAggregations&&I.forEach(e.dbAggregations,function(t){r.column_names.push(t)}),e.useBbox&&(r.options.expression="STXY_INTERSECTS(".concat(e.xAttr,", ").concat(e.yAttr,", ").concat(R.default.getBoundsWkt(t.getBounds()),")")),_.default.post("".concat(e.kineticaUrl,"/aggregate/groupby"),r).then(function(t){return R.default.dynamicSchemaToGeoJson(t.data.data_str,e.xAttr,e.yAttr).map(function(t){return t.properties.clusterTotalSumLocalized=t.properties.clusterTotalSum.toLocaleString(),t})}).catch(function(t){C.default.error(t)})}function p(t,e,r){var n=[-180,-90,180,90];return{type:"geojson",data:(0,O.featureCollection)(e.getClusters(n,Math.floor(r)))}}function h(t,e){return{id:t,type:"circle",source:e}}function v(t,e,r,n){return{id:t,type:"symbol",source:e,layout:{"text-field":"{clusterTotalSumLocalized}","text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-offset":[.6,0],"text-anchor":"left","text-size":15},paint:{"text-color":r,"text-halo-color":n,"text-halo-width":14}}}function g(t,e,r){var n={type:"exponential",property:"clusterTotalSum",stops:[[t.min,parseInt(e)],[t.max,parseInt(r)]]};return t.min===t.max&&(n.stops=[[t.max,r]]),n}function y(t,e,r){return{type:"exponential",property:"clusterTotalSum",stops:[[t.min,e],[t.max,r]]}}function m(t,e,r){var n=t.getBounds(),o=[n._sw.lng,n._sw.lat,n._ne.lng,n._ne.lat],i=e.getClusters(o,Math.floor(t.getZoom())),u=I.minBy(i,function(t){return t.properties[r]}),a=I.maxBy(i,function(t){return t.properties[r]});return u&&a?{min:u.properties[r],max:a.properties[r]}:{min:0,max:100}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var _=n(r(23)),b=n(r(16)),w=n(r(239)),x=n(r(21)),A=n(r(34)),E=n(r(242)),S=n(r(244)),j=n(r(91)),T=n(r(246)),O=r(6),L=n(r(93)),R=n(r(37)),C=n(r(10)),I={cloneDeep:b.default,concat:w.default,forEach:x.default,get:A.default,minBy:E.default,maxBy:S.default,remove:j.default},P={addClusterLayer:i,initCluster:a,removeClusterLayer:s,updateClusters:c,_loadClusterFeatures:d,_propertiesToList:f,_getClusterLayerDef:h,_getClusterSourceDef:p,_getLabelsLayerDef:v};e.default=P},function(t,e,r){function n(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return o(a(r)?u(r):[r],i(e,1))}var o=r(32),i=r(240),u=r(50),a=r(0);t.exports=n},function(t,e,r){function n(t,e,r,u,a){var c=-1,s=t.length;for(r||(r=i),a||(a=[]);++c<s;){var f=t[c];e>0&&r(f)?e>1?n(f,e-1,r,u,a):o(a,f):u||(a[a.length]=f)}return a}var o=r(32),i=r(241);t.exports=n},function(t,e,r){function n(t){return u(t)||i(t)||!!(a&&t&&t[a])}var o=r(12),i=r(29),u=r(0),a=o?o.isConcatSpreadable:void 0;t.exports=n},function(t,e,r){function n(t,e){return t&&t.length?o(t,i(e,2),u):void 0}var o=r(92),i=r(9),u=r(243);t.exports=n},function(t,e){function r(t,e){return t<e}t.exports=r},function(t,e,r){function n(t,e){return t&&t.length?o(t,u(e,2),i):void 0}var o=r(92),i=r(245),u=r(9);t.exports=n},function(t,e){function r(t,e){return t>e}t.exports=r},function(t,e,r){"use strict";function n(t){return new o(t)}function o(t){this.options=p(Object.create(this.options),t),this.trees=new Array(this.options.maxZoom+1)}function i(t,e,r,n,o){return{x:t,y:e,zoom:1/0,id:r,parentId:-1,numPoints:n,properties:o}}function u(t,e){var r=t.geometry.coordinates;return{x:s(r[0]),y:f(r[1]),zoom:1/0,id:e,parentId:-1}}function a(t){return{type:"Feature",properties:c(t),geometry:{type:"Point",coordinates:[l(t.x),d(t.y)]}}}function c(t){var e=t.numPoints,r=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return p(p({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:r})}function s(t){return t/360+.5}function f(t){var e=Math.sin(t*Math.PI/180),r=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return r<0?0:r>1?1:r}function l(t){return 360*(t-.5)}function d(t){var e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function p(t,e){for(var r in e)t[r]=e[r];return t}function h(t){return t.x}function v(t){return t.y}var g=r(247);t.exports=n,t.exports.default=n,o.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,initial:function(){return{}},map:function(t){return t}},load:function(t){var e=this.options.log;e&&console.time("total time");var r="prepare "+t.length+" points";e&&console.time(r),this.points=t;for(var n=[],o=0;o<t.length;o++)t[o].geometry&&n.push(u(t[o],o));this.trees[this.options.maxZoom+1]=g(n,h,v,this.options.nodeSize,Float32Array),e&&console.timeEnd(r);for(var i=this.options.maxZoom;i>=this.options.minZoom;i--){var a=+Date.now();n=this._cluster(n,i),this.trees[i]=g(n,h,v,this.options.nodeSize,Float32Array),e&&console.log("z%d: %d clusters in %dms",i,n.length,+Date.now()-a)}return e&&console.timeEnd("total time"),this},getClusters:function(t,e){if(t[0]>t[2]){var r=this.getClusters([t[0],t[1],180,t[3]],e),n=this.getClusters([-180,t[1],t[2],t[3]],e);return r.concat(n)}for(var o=this.trees[this._limitZoom(e)],i=o.range(s(t[0]),f(t[3]),s(t[2]),f(t[1])),u=[],c=0;c<i.length;c++){var l=o.points[i[c]];u.push(l.numPoints?a(l):this.points[l.id])}return u},getChildren:function(t){var e=t>>5,r=t%32,n="No cluster with the specified id.",o=this.trees[r];if(!o)throw new Error(n);var i=o.points[e];if(!i)throw new Error(n);for(var u=this.options.radius/(this.options.extent*Math.pow(2,r-1)),c=o.within(i.x,i.y,u),s=[],f=0;f<c.length;f++){var l=o.points[c[f]];l.parentId===t&&s.push(l.numPoints?a(l):this.points[l.id])}if(0===s.length)throw new Error(n);return s},getLeaves:function(t,e,r){e=e||10,r=r||0;var n=[];return this._appendLeaves(n,t,e,r,0),n},getTile:function(t,e,r){var n=this.trees[this._limitZoom(t)],o=Math.pow(2,t),i=this.options.extent,u=this.options.radius,a=u/i,c=(r-a)/o,s=(r+1+a)/o,f={features:[]};return this._addTileFeatures(n.range((e-a)/o,c,(e+1+a)/o,s),n.points,e,r,o,f),0===e&&this._addTileFeatures(n.range(1-a/o,c,1,s),n.points,o,r,o,f),e===o-1&&this._addTileFeatures(n.range(0,c,a/o,s),n.points,-1,r,o,f),f.features.length?f:null},getClusterExpansionZoom:function(t){for(var e=t%32-1;e<this.options.maxZoom;){var r=this.getChildren(t);if(e++,1!==r.length)break;t=r[0].properties.cluster_id}return e},_appendLeaves:function(t,e,r,n,o){for(var i=this.getChildren(e),u=0;u<i.length;u++){var a=i[u].properties;if(a&&a.cluster?o+a.point_count<=n?o+=a.point_count:o=this._appendLeaves(t,a.cluster_id,r,n,o):o<n?o++:t.push(i[u]),t.length===r)break}return o},_addTileFeatures:function(t,e,r,n,o,i){for(var u=0;u<t.length;u++){var a=e[t[u]];i.features.push({type:1,geometry:[[Math.round(this.options.extent*(a.x*o-r)),Math.round(this.options.extent*(a.y*o-n))]],tags:a.numPoints?c(a):this.points[a.id].properties})}},_limitZoom:function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},_cluster:function(t,e){for(var r=[],n=this.options.radius/(this.options.extent*Math.pow(2,e)),o=0;o<t.length;o++){var u=t[o];if(!(u.zoom<=e)){u.zoom=e;var a=this.trees[e+1],c=a.within(u.x,u.y,n),s=u.numPoints||1,f=u.x*s,l=u.y*s,d=null;this.options.reduce&&(d=this.options.initial(),this._accumulate(d,u));for(var p=(o<<5)+(e+1),h=0;h<c.length;h++){var v=a.points[c[h]];if(!(v.zoom<=e)){v.zoom=e;var g=v.numPoints||1;f+=v.x*g,l+=v.y*g,s+=g,v.parentId=p,this.options.reduce&&this._accumulate(d,v)}}1===s?r.push(u):(u.parentId=p,r.push(i(f/s,l/s,p,s,d)))}}return r},_accumulate:function(t,e){var r=e.numPoints?e.properties:this.options.map(this.points[e.id].properties);this.options.reduce(t,r)}}},function(t,e,r){"use strict";function n(t,e,r,n,i){return new o(t,e,r,n,i)}function o(t,e,r,n,o){e=e||i,r=r||u,o=o||Array,this.nodeSize=n||64,this.points=t,this.ids=new o(t.length),this.coords=new o(2*t.length);for(var c=0;c<t.length;c++)this.ids[c]=c,this.coords[2*c]=e(t[c]),this.coords[2*c+1]=r(t[c]);a(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function i(t){return t[0]}function u(t){return t[1]}var a=r(248),c=r(249),s=r(250);t.exports=n,o.prototype={range:function(t,e,r,n){return c(this.ids,this.coords,t,e,r,n,this.nodeSize)},within:function(t,e,r){return s(this.ids,this.coords,t,e,r,this.nodeSize)}}},function(t,e,r){"use strict";function n(t,e,r,i,u,a){if(!(u-i<=r)){var c=Math.floor((i+u)/2);o(t,e,c,i,u,a%2),n(t,e,r,i,c-1,a+1),n(t,e,r,c+1,u,a+1)}}function o(t,e,r,n,u,a){for(;u>n;){if(u-n>600){var c=u-n+1,s=r-n+1,f=Math.log(c),l=.5*Math.exp(2*f/3),d=.5*Math.sqrt(f*l*(c-l)/c)*(s-c/2<0?-1:1);o(t,e,r,Math.max(n,Math.floor(r-s*l/c+d)),Math.min(u,Math.floor(r+(c-s)*l/c+d)),a)}var p=e[2*r+a],h=n,v=u;for(i(t,e,n,r),e[2*u+a]>p&&i(t,e,n,u);h<v;){for(i(t,e,h,v),h++,v--;e[2*h+a]<p;)h++;for(;e[2*v+a]>p;)v--}e[2*n+a]===p?i(t,e,n,v):(v++,i(t,e,v,u)),v<=r&&(n=v+1),r<=v&&(u=v-1)}}function i(t,e,r,n){u(t,r,n),u(e,2*r,2*n),u(e,2*r+1,2*n+1)}function u(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}t.exports=n},function(t,e,r){"use strict";function n(t,e,r,n,o,i,u){for(var a,c,s=[0,t.length-1,0],f=[];s.length;){var l=s.pop(),d=s.pop(),p=s.pop();if(d-p<=u)for(var h=p;h<=d;h++)a=e[2*h],c=e[2*h+1],a>=r&&a<=o&&c>=n&&c<=i&&f.push(t[h]);else{var v=Math.floor((p+d)/2);a=e[2*v],c=e[2*v+1],a>=r&&a<=o&&c>=n&&c<=i&&f.push(t[v]);var g=(l+1)%2;(0===l?r<=a:n<=c)&&(s.push(p),s.push(v-1),s.push(g)),(0===l?o>=a:i>=c)&&(s.push(v+1),s.push(d),s.push(g))}}return f}t.exports=n},function(t,e,r){"use strict";function n(t,e,r,n,i,u){for(var a=[0,t.length-1,0],c=[],s=i*i;a.length;){var f=a.pop(),l=a.pop(),d=a.pop();if(l-d<=u)for(var p=d;p<=l;p++)o(e[2*p],e[2*p+1],r,n)<=s&&c.push(t[p]);else{var h=Math.floor((d+l)/2),v=e[2*h],g=e[2*h+1];o(v,g,r,n)<=s&&c.push(t[h]);var y=(f+1)%2;(0===f?r-i<=v:n-i<=g)&&(a.push(d),a.push(h-1),a.push(y)),(0===f?r+i>=v:n+i>=g)&&(a.push(h+1),a.push(l),a.push(y))}}return c}function o(t,e,r,n){var o=t-r,i=e-n;return o*o+i*i}t.exports=n},function(t,e,r){"use strict";function n(t,e,r,n){var i=new o.default(e,n.cbVals,n.pointColors);return t.addControl(i,r),i}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(t){return t&&t.__esModule?t:{default:t}}(r(252)),i={addCbLegend:n};e.default=i},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=function(){function t(e,r,o){n(this,t),this.title=e,this.breaks=r,this.colors=o}return i(t,[{key:"onAdd",value:function(t){this._map=t,this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl kickbox kickbox-legend";var e=document.createElement("h3");e.className="kickbox-legend-title",e.textContent=this.title,this._container.appendChild(e);var r=document.createElement("ul");r.className="kickbox-legend-list";for(var n=0;n<this.breaks.length;n++){var o=document.createElement("div");o.className="kickbox-legend-color",o.style="background-color: #".concat(this.colors[n]);var i=document.createElement("span");i.className="kickbox-legend-item-text",i.textContent=this.breaks[n];var u=document.createElement("li");u.className="kickbox-legend-list-item",u.appendChild(o),u.appendChild(i),r.appendChild(u)}return this._container.appendChild(r),this._container}},{key:"onRemove",value:function(){this._container.parentNode.removeChild(this._container),this._map=void 0}}]),t}(),a=u;e.default=a},function(t,e,r){"use strict";function n(){return o}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={STYLES:"contour",COLORMAP:"jet",MIN_LEVEL:1,MAX_LEVEL:1,VAL_ATTR:"z",SEARCH_RADIUS:1,GRIDDING_METHOD:"INV_DST_POW",RENDER_OUTPUT_GRID:0,GRID_ROWS:100,GRID_COLUMNS:-1},i={getLayerDefaults:n};e.default=i},function(t,e,r){"use strict";function n(){return o}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={STYLES:"heatmap",BLUR_RADIUS:5,COLORMAP:"jet",GRADIENT_START_COLOR:"000000",GRADIENT_END_COLOR:"000000",VAL_ATTR:""},i={getLayerDefaults:n};e.default=i},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){a.default.disableIdentifyMode(t);var r=e.MapboxDraw,n=u.default;n.mapboxgl=e.mapboxgl,n.tableName=e.tableName,n.kineticaUrl=e.kineticaUrl,n.handlerRegistry=[],n.popupId="popup-"+e.layerId,n.popupInstance=new e.mapboxgl.Popup({closeButton:!1,closeOnClick:!1}),n.spin=new i.Spinner({color:"#CCC",lines:12}),n.collection=e.collection,e.xAttr&&e.yAttr?(n.xAttr=e.xAttr,n.yAttr=e.yAttr):e.geoAttr&&(n.geoAttr=e.geoAttr),e.transformations&&n.registerTransformations(e.transformations),a.default.modes[e.layerId]=n,a.default.controls[e.layerId]=new r({defaultMode:"identify_mode",controls:{point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1},modes:Object.assign({identify_mode:n},r.modes)}),t.addControl(a.default.controls[e.layerId],"top-left")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(94),u=n(r(256)),a=n(r(57)),c={enableIdentifyByRadiusMode:o};"undefined"!=typeof ENV_TESTING&&!0===ENV_TESTING&&(c._identifyByRadius_spec={modes:a.default.modes,controls:a.default.controls});var s=c;e.default=s},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(r(16)),i=n(r(257)),u=n(r(259)),a=r(6),c=n(r(96)),s=n(r(97)),f=n(r(98)),l=n(r(10)),d=r(99),p={cloneDeep:o.default},h={};h.onSetup=function(t){var e={};return e.count=t.count||0,e},h.disableMode=function(){this.unregisterClickHandlers(this.popupId),this.popupInstance.remove()},h.onClick=function(t,e){t.count+=1,1===t.count?this._startDrawingBuffer(t,e):2===t.count?this._showPopup(t,e):3===t.count&&this._removeBuffer(t,e)},h.onMouseMove=function(t,e){1===t.count&&this._updateDrawingBuffer(t,e)},h.onKeyUp=function(t,e){},h.toDisplayFeatures=function(t,e,r){r(e)},h.registerTransformations=function(t){this.transformations=t},h._startDrawingBuffer=function(t,e){var r=(0,i.default)([e.lngLat.lng,e.lngLat.lat],1,{steps:60,units:"meters",id:"identify-buffer-diameter"}),n=this.newFeature(r);t.diameterId=n.id,this.addFeature(n);var o=[e.lngLat.lng,e.lngLat.lat],u=o,c=(0,a.lineString)([o,u],{id:"identify-buffer-radius"},{}),s=this.newFeature(c);t.radiusId=s.id,this.addFeature(s)},h._removeBuffer=function(t,e){t.count=0,this.deleteFeature(t.radiusId),this.deleteFeature(t.diameterId),this.popupInstance&&(this.unregisterClickHandlers(this.popupId),this.popupInstance.remove())},h._updateDrawingBuffer=function(t,e){var r=this.getFeature(t.radiusId),n=this.getFeature(t.diameterId);if(r&&n){r.updateCoordinate(1,e.lngLat.lng,e.lngLat.lat);var o=(0,a.lineString)(r.coordinates,r.properties,{}),c=(0,u.default)(o,{units:"meters"}),s=(0,i.default)(r.coordinates[0],c,{steps:60,units:"meters",id:"identify-buffer-diameter"}),f=this.newFeature(s);n.setCoordinates(f.coordinates),t.radiusInMeters=c}},h._showPopup=function(t,e){var r=this,n=this,o=this.getFeature(t.radiusId).coordinates[0];if(o){this.popupInstance.setLngLat(o).addTo(this.map),f.default.showLoading(this.popupId,this.spin);var i={offset:0,geometry:{center:o,radius:t.radiusInMeters},tableName:n.tableName,viewName:"".concat(n.tableName,"-").concat((0,c.default)())};return this.xAttr&&this.yAttr?(i.xAttr=this.xAttr,i.yAttr=this.yAttr):this.geoAttr&&(i.geoAttr=this.geoAttr),this.lastFilter=i,this.filterAndGetRecords(i).then(function(){r._registerClickHandlers(r.popupId)})}},h._renderTemplate=function(t,e,r){var n=this,o=d({popupId:t,expression:e.expression,recordIndex:e.offset+1,records:r.records,recordTotal:r.recordCount,radius:e.geometry.radius,latitude:e.geometry.center[1],longitude:e.geometry.center[0]});n.popupInstance.setHTML(o),f.default.hideLoading(t,this.spin),0===r.records.length?f.default.noResultsFound(this.popupId):f.default.showResultCount(this.popupId)},h._registerClickHandlers=function(t){var e=this;this._registerHandler(t,"btn-next","click",e._incrementRecord.bind(this,t)),this._registerHandler(t,"btn-prev","click",e._decrementRecord.bind(this,t)),this._registerHandler(t,"btn-filter-view","click",f.default.toggleView.bind(this,t,"filter-view")),this._registerHandler(t,"btn-apply-filter","click",e._applyFilter.bind(this,t)),this._registerHandler(t,"btn-clear-filter","click",e._clearFilter.bind(this,t))},h.unregisterClickHandlers=function(t){for(var e=0;e<this.handlerRegistry.length;e++){var r=this.handlerRegistry[e],n=document.querySelector("#".concat(t," .").concat(r.className));n&&n.removeEventListener&&n.removeEventListener(r.eventType,r)}this.handlerRegistry=[]},h._registerHandler=function(t,e,r,n){n.id="".concat(e,"-").concat(r),n.eventType=r,n.className=e,document.querySelector("#".concat(t," .").concat(e)).addEventListener(r,n),this.handlerRegistry.push(n)},h._incrementRecord=function(t,e){var r=this,n=this;l.default.debug("Incrementing record...");var o=f.default.getActiveIndex(t);if(!o&&0!==o)return void l.default.warn("No record was currently active");var i=p.cloneDeep(n.lastFilter),u=i.offset+o;if(u+1!==this.recordTotal){if(9===o){i.offset=i.offset+10,this.lastFilter=i,f.default.showLoading(t,this.spin);var a=n._getCurrentViewName(n.lastFilter);return void s.default.getRecords(n.kineticaUrl,a,i.offset).then(function(e){n._renderTemplate(t,i,e),f.default.setActiveRecord(t,0,i.offset),r.lastFilter.expression&&f.default.appliedFilter(t),n._registerClickHandlers(t)})}o+=1,u+=1,f.default.setActiveRecord(t,o,u)}},h._decrementRecord=function(t,e){var r=this,n=this;l.default.debug("Decrementing record...");var o=f.default.getActiveIndex(t);if(-1===o)return void l.default.warn("No record was currently active");var i=p.cloneDeep(n.lastFilter),u=i.offset+o;if(0!==u){if(0===o){i.offset=i.offset-10,this.lastFilter=i,f.default.showLoading(t,this.spin);var a=this._getCurrentViewName(n.lastFilter);return void s.default.getRecords(n.kineticaUrl,a,i.offset).then(function(e){n._renderTemplate(t,i,e),u-=1,f.default.setActiveRecord(t,9,u),r.lastFilter.expression&&f.default.appliedFilter(t),n._registerClickHandlers(t)})}o-=1,u-=1,f.default.setActiveRecord(t,o,u)}},h._applyFilter=function(t,e){var r=this;if(this.lastFilter.expression=f.default.getExpression(t),f.default.toggleView(t,"filter-view"),!this.lastFilter.expression)return this.lastFilter.filteredViewName=null,void f.default.removedFilter(t);l.default.debug("Applying expression filter...",this.lastFilter),this.filterViewAndGetRecords(this.lastFilter).then(function(){f.default.appliedFilter(t),r._registerClickHandlers(t)})},h._getCurrentViewName=function(t){return t.filteredViewName?t.filteredViewName:t.viewName?t.viewName:t.tableName},h.filterViewAndGetRecords=function(t){var e=this,r=this;return t.filteredViewName=this.lastFilter.viewName+"-"+(0,c.default)(),t.offset=0,s.default.filterRecords(this.kineticaUrl,t.viewName,t).then(function(){return s.default.getRecords(r.kineticaUrl,t.filteredViewName,t.offset,r.transformations).then(function(n){e.recordTotal=n.recordCount,r._renderTemplate(e.popupId,t,n),f.default.setActiveRecord(e.popupId,0,t.offset)})}).catch(function(t){l.default.error("Error querying Kinetica...",t)})},h.filterAndGetRecords=function(t,e){var r=this,n=this;return s.default.filterRecordsByRadius(n.kineticaUrl,t.tableName,t).then(function(){return s.default.getRecords(n.kineticaUrl,t.viewName,t.offset,n.transformations).then(function(e){r.recordTotal=e.recordCount,n._renderTemplate(r.popupId,t,e),f.default.setActiveRecord(r.popupId,0,t.offset)})}).catch(function(t){l.default.error("Error querying Kinetica...",t),e&&n._removeBuffer(e,null)})},h._clearFilter=function(t){var e=this;e.lastFilter.expression=null,f.default.removedFilter(t),f.default.clearExpression(t),f.default.toggleView(t,"filter-view"),s.default.getRecords(e.kineticaUrl,e.lastFilter.viewName,e.lastFilter.offset,e.transformations).then(function(r){e.recordTotal=r.recordCount,e._renderTemplate(t,e.lastFilter,r),f.default.setActiveRecord(t,0,e.lastFilter.offset),e._registerClickHandlers(e.popupId)}),l.default.debug("Clearing expression filter...",e.lastFilter)};var v=h;e.default=v},function(t,e,r){"use strict";function n(t,e,r){void 0===r&&(r={});for(var n=r.steps||64,u=r.properties?r.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},a=[],c=0;c<n;c++)a.push(o.default(t,e,-360*c/n,r).geometry.coordinates);return a.push(a[0]),i.polygon([a],u)}Object.defineProperty(e,"__esModule",{value:!0});var o=r(258),i=r(6);e.default=n},function(t,e,r){"use strict";function n(t,e,r,n){void 0===n&&(n={});var u=o.getCoord(t),a=i.degreesToRadians(u[0]),c=i.degreesToRadians(u[1]),s=i.degreesToRadians(r),f=i.lengthToRadians(e,n.units),l=Math.asin(Math.sin(c)*Math.cos(f)+Math.cos(c)*Math.sin(f)*Math.cos(s)),d=a+Math.atan2(Math.sin(s)*Math.sin(f)*Math.cos(c),Math.cos(f)-Math.sin(c)*Math.sin(l)),p=i.radiansToDegrees(d),h=i.radiansToDegrees(l);return i.point([p,h],n.properties)}Object.defineProperty(e,"__esModule",{value:!0});var o=r(95),i=r(6);e.default=n},function(t,e,r){"use strict";function n(t,e){return void 0===e&&(e={}),i.segmentReduce(t,function(t,r){var n=r.geometry.coordinates;return t+o.default(n[0],n[1],e)},0)}Object.defineProperty(e,"__esModule",{value:!0});var o=r(260),i=r(261);e.default=n},function(t,e,r){"use strict";function n(t,e,r){void 0===r&&(r={});var n=o.getCoord(t),u=o.getCoord(e),a=i.degreesToRadians(u[1]-n[1]),c=i.degreesToRadians(u[0]-n[0]),s=i.degreesToRadians(n[1]),f=i.degreesToRadians(u[1]),l=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(c/2),2)*Math.cos(s)*Math.cos(f);return i.radiansToLength(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),r.units)}Object.defineProperty(e,"__esModule",{value:!0});var o=r(95),i=r(6);e.default=n},function(t,e,r){"use strict";function n(t,e,r){if(null!==t)for(var o,i,u,a,c,s,f,l,d=0,p=0,h=t.type,v="FeatureCollection"===h,g="Feature"===h,y=v?t.features.length:1,m=0;m<y;m++){f=v?t.features[m].geometry:g?t.geometry:t,l=!!f&&"GeometryCollection"===f.type,c=l?f.geometries.length:1;for(var _=0;_<c;_++){var b=0,w=0;if(null!==(a=l?f.geometries[_]:f)){s=a.coordinates;var x=a.type;switch(d=!r||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(s,p,m,b,w))return!1;p++,b++;break;case"LineString":case"MultiPoint":for(o=0;o<s.length;o++){if(!1===e(s[o],p,m,b,w))return!1;p++,"MultiPoint"===x&&b++}"LineString"===x&&b++;break;case"Polygon":case"MultiLineString":for(o=0;o<s.length;o++){for(i=0;i<s[o].length-d;i++){if(!1===e(s[o][i],p,m,b,w))return!1;p++}"MultiLineString"===x&&b++,"Polygon"===x&&w++}"Polygon"===x&&b++;break;case"MultiPolygon":for(o=0;o<s.length;o++){for("MultiPolygon"===x&&(w=0),i=0;i<s[o].length;i++){for(u=0;u<s[o][i].length-d;u++){if(!1===e(s[o][i][u],p,m,b,w))return!1;p++}w++}b++}break;case"GeometryCollection":for(o=0;o<a.geometries.length;o++)if(!1===n(a.geometries[o],e,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e,r,o){var i=r;return n(t,function(t,n,o,u,a){i=0===n&&void 0===r?t:e(i,t,n,o,u,a)},o),i}function i(t,e){var r;switch(t.type){case"FeatureCollection":for(r=0;r<t.features.length&&!1!==e(t.features[r].properties,r);r++);break;case"Feature":e(t.properties,0)}}function u(t,e,r){var n=r;return i(t,function(t,o){n=0===o&&void 0===r?t:e(n,t,o)}),n}function a(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length&&!1!==e(t.features[r],r);r++);}function c(t,e,r){var n=r;return a(t,function(t,o){n=0===o&&void 0===r?t:e(n,t,o)}),n}function s(t){var e=[];return n(t,function(t){e.push(t)}),e}function f(t,e){var r,n,o,i,u,a,c,s,f,l,d=0,p="FeatureCollection"===t.type,h="Feature"===t.type,v=p?t.features.length:1;for(r=0;r<v;r++){for(a=p?t.features[r].geometry:h?t.geometry:t,s=p?t.features[r].properties:h?t.properties:{},f=p?t.features[r].bbox:h?t.bbox:void 0,l=p?t.features[r].id:h?t.id:void 0,c=!!a&&"GeometryCollection"===a.type,u=c?a.geometries.length:1,o=0;o<u;o++)if(null!==(i=c?a.geometries[o]:a))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(i,d,s,f,l))return!1;break;case"GeometryCollection":for(n=0;n<i.geometries.length;n++)if(!1===e(i.geometries[n],d,s,f,l))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,d,s,f,l))return!1;d++}}function l(t,e,r){var n=r;return f(t,function(t,o,i,u,a){n=0===o&&void 0===r?t:e(n,t,o,i,u,a)}),n}function d(t,e){f(t,function(t,r,n,o,i){var u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":if(!1===e(Object(b.feature)(t,n,{bbox:o,id:i}),r,0))return!1;return}var a;switch(u){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var c=0;c<t.coordinates.length;c++){var s=t.coordinates[c],f={type:a,coordinates:s};if(!1===e(Object(b.feature)(f,n),r,c))return!1}})}function p(t,e,r){var n=r;return d(t,function(t,o,i){n=0===o&&0===i&&void 0===r?t:e(n,t,o,i)}),n}function h(t,e){d(t,function(t,r,o){var i=0;if(t.geometry){var u=t.geometry.type;if("Point"!==u&&"MultiPoint"!==u){var a;return!1!==n(t,function(n,u,c,s,f){if(void 0===a)return void(a=n);var l=Object(b.lineString)([a,n],t.properties);if(!1===e(l,r,o,f,i))return!1;i++,a=n})&&void 0}}})}function v(t,e,r){var n=r,o=!1;return h(t,function(t,i,u,a,c){n=!1===o&&void 0===r?t:e(n,t,i,u,a,c),o=!0}),n}function g(t,e){if(!t)throw new Error("geojson is required");d(t,function(t,r,n){if(null!==t.geometry){var o=t.geometry.type,i=t.geometry.coordinates;switch(o){case"LineString":if(!1===e(t,r,n,0,0))return!1;break;case"Polygon":for(var u=0;u<i.length;u++)if(!1===e(Object(b.lineString)(i[u],t.properties),r,n,u))return!1}}})}function y(t,e,r){var n=r;return g(t,function(t,o,i,u){n=0===o&&void 0===r?t:e(n,t,o,i,u)}),n}function m(t,e){if(e=e||{},!Object(b.isObject)(e))throw new Error("options is invalid");var r,n=e.featureIndex||0,o=e.multiFeatureIndex||0,i=e.geometryIndex||0,u=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":n<0&&(n=t.features.length+n),a=a||t.features[n].properties,r=t.features[n].geometry;break;case"Feature":a=a||t.properties,r=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=t;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var c=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return u<0&&(u=c.length+u-1),Object(b.lineString)([c[u],c[u+1]],a,e);case"Polygon":return i<0&&(i=c.length+i),u<0&&(u=c[i].length+u-1),Object(b.lineString)([c[i][u],c[i][u+1]],a,e);case"MultiLineString":return o<0&&(o=c.length+o),u<0&&(u=c[o].length+u-1),Object(b.lineString)([c[o][u],c[o][u+1]],a,e);case"MultiPolygon":return o<0&&(o=c.length+o),i<0&&(i=c[o].length+i),u<0&&(u=c[o][i].length-u-1),Object(b.lineString)([c[o][i][u],c[o][i][u+1]],a,e)}throw new Error("geojson is invalid")}function _(t,e){if(e=e||{},!Object(b.isObject)(e))throw new Error("options is invalid");var r,n=e.featureIndex||0,o=e.multiFeatureIndex||0,i=e.geometryIndex||0,u=e.coordIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":n<0&&(n=t.features.length+n),a=a||t.features[n].properties,r=t.features[n].geometry;break;case"Feature":a=a||t.properties,r=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=t;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var c=r.coordinates;switch(r.type){case"Point":return Object(b.point)(c,a,e);case"MultiPoint":return o<0&&(o=c.length+o),Object(b.point)(c[o],a,e);case"LineString":return u<0&&(u=c.length+u),Object(b.point)(c[u],a,e);case"Polygon":return i<0&&(i=c.length+i),u<0&&(u=c[i].length+u),Object(b.point)(c[i][u],a,e);case"MultiLineString":return o<0&&(o=c.length+o),u<0&&(u=c[o].length+u),Object(b.point)(c[o][u],a,e);case"MultiPolygon":return o<0&&(o=c.length+o),i<0&&(i=c[o].length+i),u<0&&(u=c[o][i].length-u),Object(b.point)(c[o][i][u],a,e)}throw new Error("geojson is invalid")}Object.defineProperty(e,"__esModule",{value:!0}),e.coordEach=n,e.coordReduce=o,e.propEach=i,e.propReduce=u,e.featureEach=a,e.featureReduce=c,e.coordAll=s,e.geomEach=f,e.geomReduce=l,e.flattenEach=d,e.flattenReduce=p,e.segmentEach=h,e.segmentReduce=v,e.lineEach=g,e.lineReduce=y,e.findSegment=m,e.findPoint=_;var b=r(6)},function(t,e){var r="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);t.exports=function(){return r(n),n}}else{var o=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}},function(t,e){function r(t,e){var r=e||0,o=n;return o[t[r++]]+o[t[r++]]+o[t[r++]]+o[t[r++]]+"-"+o[t[r++]]+o[t[r++]]+"-"+o[t[r++]]+o[t[r++]]+"-"+o[t[r++]]+o[t[r++]]+"-"+o[t[r++]]+o[t[r++]]+o[t[r++]]+o[t[r++]]+o[t[r++]]+o[t[r++]]}for(var n=[],o=0;o<256;++o)n[o]=(o+256).toString(16).substr(1);t.exports=r},function(t,e,r){function n(t,e){return(a(t)?o:u)(t,i(e,3))}var o=r(78),i=r(9),u=r(265),a=r(0);t.exports=n},function(t,e,r){function n(t,e){var r=-1,n=i(t)?Array(t.length):[];return o(t,function(t,o,i){n[++r]=e(t,o,i)}),n}var o=r(85),i=r(8);t.exports=n},function(t,e,r){t.exports=r(267).default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(){var t=new a.HandlebarsEnvironment;return p.extend(t,a),t.SafeString=s.default,t.Exception=l.default,t.Utils=p,t.escapeExpression=p.escapeExpression,t.VM=v,t.template=function(e){return v.template(e,t)},t}e.__esModule=!0;var u=r(100),a=o(u),c=r(279),s=n(c),f=r(22),l=n(f),d=r(5),p=o(d),h=r(280),v=o(h),g=r(281),y=n(g),m=i();m.create=i,y.default(m),m.default=m,e.default=m,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t){u.default(t),c.default(t),f.default(t),d.default(t),h.default(t),g.default(t),m.default(t)}e.__esModule=!0,e.registerDefaultHelpers=o;var i=r(269),u=n(i),a=r(270),c=n(a),s=r(271),f=n(s),l=r(272),d=n(l),p=r(273),h=n(p),v=r(274),g=n(v),y=r(275),m=n(y)},function(t,e,r){"use strict";e.__esModule=!0;var n=r(5);e.default=function(t){t.registerHelper("blockHelperMissing",function(e,r){var o=r.inverse,i=r.fn;if(!0===e)return i(this);if(!1===e||null==e)return o(this);if(n.isArray(e))return e.length>0?(r.ids&&(r.ids=[r.name]),t.helpers.each(e,r)):o(this);if(r.data&&r.ids){var u=n.createFrame(r.data);u.contextPath=n.appendContextPath(r.data.contextPath,r.name),r={data:u}}return i(e,r)})},t.exports=e.default},function(t,e,r){"use strict";e.__esModule=!0;var n=r(5),o=r(22),i=function(t){return t&&t.__esModule?t:{default:t}}(o);e.default=function(t){t.registerHelper("each",function(t,e){function r(e,r,i){s&&(s.key=e,s.index=r,s.first=0===r,s.last=!!i,f&&(s.contextPath=f+e)),c+=o(t[e],{data:s,blockParams:n.blockParams([t[e],e],[f+e,null])})}if(!e)throw new i.default("Must pass iterator to #each");var o=e.fn,u=e.inverse,a=0,c="",s=void 0,f=void 0;if(e.data&&e.ids&&(f=n.appendContextPath(e.data.contextPath,e.ids[0])+"."),n.isFunction(t)&&(t=t.call(this)),e.data&&(s=n.createFrame(e.data)),t&&"object"==typeof t)if(n.isArray(t))for(var l=t.length;a<l;a++)a in t&&r(a,a,a===t.length-1);else{var d=void 0;for(var p in t)t.hasOwnProperty(p)&&(void 0!==d&&r(d,a-1),d=p,a++);void 0!==d&&r(d,a-1,!0)}return 0===a&&(c=u(this)),c})},t.exports=e.default},function(t,e,r){"use strict";e.__esModule=!0;var n=r(22),o=function(t){return t&&t.__esModule?t:{default:t}}(n);e.default=function(t){t.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new o.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},t.exports=e.default},function(t,e,r){"use strict";e.__esModule=!0;var n=r(5);e.default=function(t){t.registerHelper("if",function(t,e){return n.isFunction(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||n.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,r){return t.helpers.if.call(this,e,{fn:r.inverse,inverse:r.fn,hash:r.hash})})},t.exports=e.default},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("log",function(){for(var e=[void 0],r=arguments[arguments.length-1],n=0;n<arguments.length-1;n++)e.push(arguments[n]);var o=1;null!=r.hash.level?o=r.hash.level:r.data&&null!=r.data.level&&(o=r.data.level),e[0]=o,t.log.apply(t,e)})},t.exports=e.default},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("lookup",function(t,e){return t&&t[e]})},t.exports=e.default},function(t,e,r){"use strict";e.__esModule=!0;var n=r(5);e.default=function(t){t.registerHelper("with",function(t,e){n.isFunction(t)&&(t=t.call(this));var r=e.fn;if(n.isEmpty(t))return e.inverse(this);var o=e.data;return e.data&&e.ids&&(o=n.createFrame(e.data),o.contextPath=n.appendContextPath(e.data.contextPath,e.ids[0])),r(t,{data:o,blockParams:n.blockParams([t],[o&&o.contextPath])})})},t.exports=e.default},function(t,e,r){"use strict";function n(t){i.default(t)}e.__esModule=!0,e.registerDefaultDecorators=n;var o=r(277),i=function(t){return t&&t.__esModule?t:{default:t}}(o)},function(t,e,r){"use strict";e.__esModule=!0;var n=r(5);e.default=function(t){t.registerDecorator("inline",function(t,e,r,o){var i=t;return e.partials||(e.partials={},i=function(o,i){var u=r.partials;r.partials=n.extend({},u,e.partials);var a=t(o,i);return r.partials=u,a}),e.partials[o.args[0]]=o.fn,i})},t.exports=e.default},function(t,e,r){"use strict";e.__esModule=!0;var n=r(5),o={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(t){if("string"==typeof t){var e=n.indexOf(o.methodMap,t.toLowerCase());t=e>=0?e:parseInt(t,10)}return t},log:function(t){if(t=o.lookupLevel(t),"undefined"!=typeof console&&o.lookupLevel(o.level)<=t){var e=o.methodMap[t];console[e]||(e="log");for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];console[e].apply(console,n)}}};e.default=o,t.exports=e.default},function(t,e,r){"use strict";function n(t){this.string=t}e.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},e.default=n,t.exports=e.default},function(t,e,r){"use strict";function n(t){var e=t&&t[0]||1,r=v.COMPILER_REVISION;if(e!==r){if(e<r){var n=v.REVISION_CHANGES[r],o=v.REVISION_CHANGES[e];throw new h.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+o+").")}throw new h.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function o(t,e){function r(r,n,o){o.hash&&(n=d.extend({},n,o.hash),o.ids&&(o.ids[0]=!0)),r=e.VM.resolvePartial.call(this,r,n,o);var i=e.VM.invokePartial.call(this,r,n,o);if(null==i&&e.compile&&(o.partials[o.name]=e.compile(r,t.compilerOptions,e),i=o.partials[o.name](n,o)),null!=i){if(o.indent){for(var u=i.split("\n"),a=0,c=u.length;a<c&&(u[a]||a+1!==c);a++)u[a]=o.indent+u[a];i=u.join("\n")}return i}throw new h.default("The partial "+o.name+" could not be compiled when running in runtime-only mode")}function n(e){function r(e){return""+t.main(o,e,o.helpers,o.partials,u,c,a)}var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],u=i.data;n._setup(i),!i.partial&&t.useData&&(u=s(e,u));var a=void 0,c=t.useBlockParams?[]:void 0;return t.useDepths&&(a=i.depths?e!=i.depths[0]?[e].concat(i.depths):i.depths:[e]),(r=f(t.main,r,o,i.depths||[],u,c))(e,i)}if(!e)throw new h.default("No environment passed to template");if(!t||!t.main)throw new h.default("Unknown template object: "+typeof t);t.main.decorator=t.main_d,e.VM.checkRevision(t.compiler);var o={strict:function(t,e){if(!(e in t))throw new h.default('"'+e+'" not defined in '+t);return t[e]},lookup:function(t,e){for(var r=t.length,n=0;n<r;n++)if(t[n]&&null!=t[n][e])return t[n][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:d.escapeExpression,invokePartial:r,fn:function(e){var r=t[e];return r.decorator=t[e+"_d"],r},programs:[],program:function(t,e,r,n,o){var u=this.programs[t],a=this.fn(t);return e||o||n||r?u=i(this,t,a,e,r,n,o):u||(u=this.programs[t]=i(this,t,a)),u},data:function(t,e){for(;t&&e--;)t=t._parent;return t},merge:function(t,e){var r=t||e;return t&&e&&t!==e&&(r=d.extend({},e,t)),r},nullContext:Object.seal({}),noop:e.VM.noop,compilerInfo:t.compiler};return n.isTop=!0,n._setup=function(r){r.partial?(o.helpers=r.helpers,o.partials=r.partials,o.decorators=r.decorators):(o.helpers=o.merge(r.helpers,e.helpers),t.usePartial&&(o.partials=o.merge(r.partials,e.partials)),(t.usePartial||t.useDecorators)&&(o.decorators=o.merge(r.decorators,e.decorators)))},n._child=function(e,r,n,u){if(t.useBlockParams&&!n)throw new h.default("must pass block params");if(t.useDepths&&!u)throw new h.default("must pass parent depths");return i(o,e,t[e],r,0,n,u)},n}function i(t,e,r,n,o,i,u){function a(e){var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=u;return!u||e==u[0]||e===t.nullContext&&null===u[0]||(a=[e].concat(u)),r(t,e,t.helpers,t.partials,o.data||n,i&&[o.blockParams].concat(i),a)}return a=f(r,a,t,u,n,i),a.program=e,a.depth=u?u.length:0,a.blockParams=o||0,a}function u(t,e,r){return t?t.call||r.name||(r.name=t,t=r.partials[t]):t="@partial-block"===r.name?r.data["partial-block"]:r.partials[r.name],t}function a(t,e,r){var n=r.data&&r.data["partial-block"];r.partial=!0,r.ids&&(r.data.contextPath=r.ids[0]||r.data.contextPath);var o=void 0;if(r.fn&&r.fn!==c&&function(){r.data=v.createFrame(r.data);var t=r.fn;o=r.data["partial-block"]=function(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return r.data=v.createFrame(r.data),r.data["partial-block"]=n,t(e,r)},t.partials&&(r.partials=d.extend({},r.partials,t.partials))}(),void 0===t&&o&&(t=o),void 0===t)throw new h.default("The partial "+r.name+" could not be found");if(t instanceof Function)return t(e,r)}function c(){return""}function s(t,e){return e&&"root"in e||(e=e?v.createFrame(e):{},e.root=t),e}function f(t,e,r,n,o,i){if(t.decorator){var u={};e=t.decorator(e,u,r,n&&n[0],o,i,n),d.extend(e,u)}return e}e.__esModule=!0,e.checkRevision=n,e.template=o,e.wrapProgram=i,e.resolvePartial=u,e.invokePartial=a,e.noop=c;var l=r(5),d=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(l),p=r(22),h=function(t){return t&&t.__esModule?t:{default:t}}(p),v=r(100)},function(t,e,r){"use strict";(function(r){e.__esModule=!0,e.default=function(t){var e=void 0!==r?r:window,n=e.Handlebars;t.noConflict=function(){return e.Handlebars===t&&(e.Handlebars=n),t}},t.exports=e.default}).call(e,r(41))},function(t,e,r){(function(t,n){var o;(function(){function i(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function u(t,e,r,n){for(var o=-1,i=null==t?0:t.length;++o<i;){var u=t[o];e(n,u,r(u),t)}return n}function a(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}function c(t,e){for(var r=null==t?0:t.length;r--&&!1!==e(t[r],r,t););return t}function s(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}function f(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var u=t[r];e(u,r,t)&&(i[o++]=u)}return i}function l(t,e){return!!(null==t?0:t.length)&&x(t,e,0)>-1}function d(t,e,r){for(var n=-1,o=null==t?0:t.length;++n<o;)if(r(e,t[n]))return!0;return!1}function p(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}function h(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}function v(t,e,r,n){var o=-1,i=null==t?0:t.length;for(n&&i&&(r=t[++o]);++o<i;)r=e(r,t[o],o,t);return r}function g(t,e,r,n){var o=null==t?0:t.length;for(n&&o&&(r=t[--o]);o--;)r=e(r,t[o],o,t);return r}function y(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function m(t){return t.split("")}function _(t){return t.match(De)||[]}function b(t,e,r){var n;return r(t,function(t,r,o){if(e(t,r,o))return n=r,!1}),n}function w(t,e,r,n){for(var o=t.length,i=r+(n?1:-1);n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}function x(t,e,r){return e===e?Y(t,e,r):w(t,E,r)}function A(t,e,r,n){for(var o=r-1,i=t.length;++o<i;)if(n(t[o],e))return o;return-1}function E(t){return t!==t}function S(t,e){var r=null==t?0:t.length;return r?R(t,e)/r:Mt}function j(t){return function(e){return null==e?nt:e[t]}}function T(t){return function(e){return null==t?nt:t[e]}}function O(t,e,r,n,o){return o(t,function(t,o,i){r=n?(n=!1,t):e(r,t,o,i)}),r}function L(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}function R(t,e){for(var r,n=-1,o=t.length;++n<o;){var i=e(t[n]);i!==nt&&(r=r===nt?i:r+i)}return r}function C(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function I(t,e){return p(e,function(e){return[e,t[e]]})}function P(t){return function(e){return t(e)}}function M(t,e){return p(e,function(e){return t[e]})}function N(t,e){return t.has(e)}function k(t,e){for(var r=-1,n=t.length;++r<n&&x(e,t[r],0)>-1;);return r}function F(t,e){for(var r=t.length;r--&&x(e,t[r],0)>-1;);return r}function D(t,e){for(var r=t.length,n=0;r--;)t[r]===e&&++n;return n}function B(t){return"\\"+Sr[t]}function z(t,e){return null==t?nt:t[e]}function U(t){return gr.test(t)}function H(t){return yr.test(t)}function q(t){for(var e,r=[];!(e=t.next()).done;)r.push(e.value);return r}function V(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function W(t,e){return function(r){return t(e(r))}}function G(t,e){for(var r=-1,n=t.length,o=0,i=[];++r<n;){var u=t[r];u!==e&&u!==st||(t[r]=st,i[o++]=r)}return i}function $(t,e){return"__proto__"==e?nt:t[e]}function Z(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}function K(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=[t,t]}),r}function Y(t,e,r){for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}function X(t,e,r){for(var n=r+1;n--;)if(t[n]===e)return n;return n}function J(t){return U(t)?tt(t):Hr(t)}function Q(t){return U(t)?et(t):m(t)}function tt(t){for(var e=hr.lastIndex=0;hr.test(t);)++e;return e}function et(t){return t.match(hr)||[]}function rt(t){return t.match(vr)||[]}var nt,ot=200,it="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",ut="Expected a function",at="__lodash_hash_undefined__",ct=500,st="__lodash_placeholder__",ft=1,lt=2,dt=4,pt=1,ht=2,vt=1,gt=2,yt=4,mt=8,_t=16,bt=32,wt=64,xt=128,At=256,Et=512,St=30,jt="...",Tt=800,Ot=16,Lt=1,Rt=2,Ct=1/0,It=9007199254740991,Pt=1.7976931348623157e308,Mt=NaN,Nt=4294967295,kt=Nt-1,Ft=Nt>>>1,Dt=[["ary",xt],["bind",vt],["bindKey",gt],["curry",mt],["curryRight",_t],["flip",Et],["partial",bt],["partialRight",wt],["rearg",At]],Bt="[object Arguments]",zt="[object Array]",Ut="[object AsyncFunction]",Ht="[object Boolean]",qt="[object Date]",Vt="[object DOMException]",Wt="[object Error]",Gt="[object Function]",$t="[object GeneratorFunction]",Zt="[object Map]",Kt="[object Number]",Yt="[object Null]",Xt="[object Object]",Jt="[object Proxy]",Qt="[object RegExp]",te="[object Set]",ee="[object String]",re="[object Symbol]",ne="[object Undefined]",oe="[object WeakMap]",ie="[object WeakSet]",ue="[object ArrayBuffer]",ae="[object DataView]",ce="[object Float32Array]",se="[object Float64Array]",fe="[object Int8Array]",le="[object Int16Array]",de="[object Int32Array]",pe="[object Uint8Array]",he="[object Uint8ClampedArray]",ve="[object Uint16Array]",ge="[object Uint32Array]",ye=/\b__p \+= '';/g,me=/\b(__p \+=) '' \+/g,_e=/(__e\(.*?\)|\b__t\)) \+\n'';/g,be=/&(?:amp|lt|gt|quot|#39);/g,we=/[&<>"']/g,xe=RegExp(be.source),Ae=RegExp(we.source),Ee=/<%-([\s\S]+?)%>/g,Se=/<%([\s\S]+?)%>/g,je=/<%=([\s\S]+?)%>/g,Te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Oe=/^\w*$/,Le=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Re=/[\\^$.*+?()[\]{}|]/g,Ce=RegExp(Re.source),Ie=/^\s+|\s+$/g,Pe=/^\s+/,Me=/\s+$/,Ne=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ke=/\{\n\/\* \[wrapped with (.+)\] \*/,Fe=/,? & /,De=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Be=/\\(\\)?/g,ze=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ue=/\w*$/,He=/^[-+]0x[0-9a-f]+$/i,qe=/^0b[01]+$/i,Ve=/^\[object .+?Constructor\]$/,We=/^0o[0-7]+$/i,Ge=/^(?:0|[1-9]\d*)$/,$e=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ze=/($^)/,Ke=/['\n\r\u2028\u2029\\]/g,Ye="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Xe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Je="["+Xe+"]",Qe="["+Ye+"]",tr="[a-z\\xdf-\\xf6\\xf8-\\xff]",er="[^\\ud800-\\udfff"+Xe+"\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",rr="\\ud83c[\\udffb-\\udfff]",nr="(?:\\ud83c[\\udde6-\\uddff]){2}",or="[\\ud800-\\udbff][\\udc00-\\udfff]",ir="[A-Z\\xc0-\\xd6\\xd8-\\xde]",ur="(?:"+tr+"|"+er+")",ar="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",cr="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",nr,or].join("|")+")[\\ufe0e\\ufe0f]?"+ar+")*",sr="[\\ufe0e\\ufe0f]?"+ar+cr,fr="(?:"+["[\\u2700-\\u27bf]",nr,or].join("|")+")"+sr,lr="(?:"+["[^\\ud800-\\udfff]"+Qe+"?",Qe,nr,or,"[\\ud800-\\udfff]"].join("|")+")",dr=RegExp("[']","g"),pr=RegExp(Qe,"g"),hr=RegExp(rr+"(?="+rr+")|"+lr+sr,"g"),vr=RegExp([ir+"?"+tr+"+(?:['](?:d|ll|m|re|s|t|ve))?(?="+[Je,ir,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['](?:D|LL|M|RE|S|T|VE))?(?="+[Je,ir+ur,"$"].join("|")+")",ir+"?"+ur+"+(?:['](?:d|ll|m|re|s|t|ve))?",ir+"+(?:['](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",fr].join("|"),"g"),gr=RegExp("[\\u200d\\ud800-\\udfff"+Ye+"\\ufe0e\\ufe0f]"),yr=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,mr=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],_r=-1,br={};br[ce]=br[se]=br[fe]=br[le]=br[de]=br[pe]=br[he]=br[ve]=br[ge]=!0,br[Bt]=br[zt]=br[ue]=br[Ht]=br[ae]=br[qt]=br[Wt]=br[Gt]=br[Zt]=br[Kt]=br[Xt]=br[Qt]=br[te]=br[ee]=br[oe]=!1;var wr={};wr[Bt]=wr[zt]=wr[ue]=wr[ae]=wr[Ht]=wr[qt]=wr[ce]=wr[se]=wr[fe]=wr[le]=wr[de]=wr[Zt]=wr[Kt]=wr[Xt]=wr[Qt]=wr[te]=wr[ee]=wr[re]=wr[pe]=wr[he]=wr[ve]=wr[ge]=!0,wr[Wt]=wr[Gt]=wr[oe]=!1;var xr={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"},Ar={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Er={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Sr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},jr=parseFloat,Tr=parseInt,Or="object"==typeof t&&t&&t.Object===Object&&t,Lr="object"==typeof self&&self&&self.Object===Object&&self,Rr=Or||Lr||Function("return this")(),Cr="object"==typeof e&&e&&!e.nodeType&&e,Ir=Cr&&"object"==typeof n&&n&&!n.nodeType&&n,Pr=Ir&&Ir.exports===Cr,Mr=Pr&&Or.process,Nr=function(){try{return Mr&&Mr.binding&&Mr.binding("util")}catch(t){}}(),kr=Nr&&Nr.isArrayBuffer,Fr=Nr&&Nr.isDate,Dr=Nr&&Nr.isMap,Br=Nr&&Nr.isRegExp,zr=Nr&&Nr.isSet,Ur=Nr&&Nr.isTypedArray,Hr=j("length"),qr=T(xr),Vr=T(Ar),Wr=T(Er),Gr=function t(e){function r(t){if(ec(t)&&!pd(t)&&!(t instanceof m)){if(t instanceof o)return t;if(pf.call(t,"__wrapped__"))return Ji(t)}return new o(t)}function n(){}function o(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=nt}function m(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Nt,this.__views__=[]}function T(){var t=new m(this.__wrapped__);return t.__actions__=Mo(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Mo(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Mo(this.__views__),t}function Y(){if(this.__filtered__){var t=new m(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function tt(){var t=this.__wrapped__.value(),e=this.__dir__,r=pd(t),n=e<0,o=r?t.length:0,i=Ai(0,o,this.__views__),u=i.start,a=i.end,c=a-u,s=n?a:u-1,f=this.__iteratees__,l=f.length,d=0,p=qf(c,this.__takeCount__);if(!r||!n&&o==c&&p==c)return yo(t,this.__actions__);var h=[];t:for(;c--&&d<p;){s+=e;for(var v=-1,g=t[s];++v<l;){var y=f[v],m=y.iteratee,_=y.type,b=m(g);if(_==Rt)g=b;else if(!b){if(_==Lt)continue t;break t}}h[d++]=g}return h}function et(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function De(){this.__data__=Qf?Qf(null):{},this.size=0}function Ye(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Xe(t){var e=this.__data__;if(Qf){var r=e[t];return r===at?nt:r}return pf.call(e,t)?e[t]:nt}function Je(t){var e=this.__data__;return Qf?e[t]!==nt:pf.call(e,t)}function Qe(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Qf&&e===nt?at:e,this}function tr(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function er(){this.__data__=[],this.size=0}function rr(t){var e=this.__data__,r=$r(e,t);return!(r<0)&&(r==e.length-1?e.pop():Tf.call(e,r,1),--this.size,!0)}function nr(t){var e=this.__data__,r=$r(e,t);return r<0?nt:e[r][1]}function or(t){return $r(this.__data__,t)>-1}function ir(t,e){var r=this.__data__,n=$r(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function ur(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function ar(){this.size=0,this.__data__={hash:new et,map:new(Kf||tr),string:new et}}function cr(t){var e=_i(this,t).delete(t);return this.size-=e?1:0,e}function sr(t){return _i(this,t).get(t)}function fr(t){return _i(this,t).has(t)}function lr(t,e){var r=_i(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function hr(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new ur;++e<r;)this.add(t[e])}function vr(t){return this.__data__.set(t,at),this}function gr(t){return this.__data__.has(t)}function yr(t){var e=this.__data__=new tr(t);this.size=e.size}function xr(){this.__data__=new tr,this.size=0}function Ar(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function Er(t){return this.__data__.get(t)}function Sr(t){return this.__data__.has(t)}function Or(t,e){var r=this.__data__;if(r instanceof tr){var n=r.__data__;if(!Kf||n.length<ot-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new ur(n)}return r.set(t,e),this.size=r.size,this}function Lr(t,e){var r=pd(t),n=!r&&dd(t),o=!r&&!n&&vd(t),i=!r&&!n&&!o&&bd(t),u=r||n||o||i,a=u?C(t.length,uf):[],c=a.length;for(var s in t)!e&&!pf.call(t,s)||u&&("length"==s||o&&("offset"==s||"parent"==s)||i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||Ci(s,c))||a.push(s);return a}function Cr(t){var e=t.length;return e?t[Xn(0,e-1)]:nt}function Ir(t,e){return Zi(Mo(t),Qr(e,0,t.length))}function Mr(t){return Zi(Mo(t))}function Nr(t,e,r){(r===nt||Ua(t[e],r))&&(r!==nt||e in t)||Xr(t,e,r)}function Hr(t,e,r){var n=t[e];pf.call(t,e)&&Ua(n,r)&&(r!==nt||e in t)||Xr(t,e,r)}function $r(t,e){for(var r=t.length;r--;)if(Ua(t[r][0],e))return r;return-1}function Zr(t,e,r,n){return ll(t,function(t,o,i){e(n,t,r(t),i)}),n}function Kr(t,e){return t&&No(e,kc(e),t)}function Yr(t,e){return t&&No(e,Fc(e),t)}function Xr(t,e,r){"__proto__"==e&&Cf?Cf(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function Jr(t,e){for(var r=-1,n=e.length,o=Js(n),i=null==t;++r<n;)o[r]=i?nt:Pc(t,e[r]);return o}function Qr(t,e,r){return t===t&&(r!==nt&&(t=t<=r?t:r),e!==nt&&(t=t>=e?t:e)),t}function tn(t,e,r,n,o,i){var u,c=e&ft,s=e&lt,f=e&dt;if(r&&(u=o?r(t,n,o,i):r(t)),u!==nt)return u;if(!tc(t))return t;var l=pd(t);if(l){if(u=ji(t),!c)return Mo(t,u)}else{var d=Al(t),p=d==Gt||d==$t;if(vd(t))return Eo(t,c);if(d==Xt||d==Bt||p&&!o){if(u=s||p?{}:Ti(t),!c)return s?Fo(t,Yr(u,t)):ko(t,Kr(u,t))}else{if(!wr[d])return o?t:{};u=Oi(t,d,c)}}i||(i=new yr);var h=i.get(t);if(h)return h;if(i.set(t,u),_d(t))return t.forEach(function(n){u.add(tn(n,e,r,n,t,i))}),u;if(yd(t))return t.forEach(function(n,o){u.set(o,tn(n,e,r,o,t,i))}),u;var v=f?s?vi:hi:s?Fc:kc,g=l?nt:v(t);return a(g||t,function(n,o){g&&(o=n,n=t[o]),Hr(u,o,tn(n,e,r,o,t,i))}),u}function en(t){var e=kc(t);return function(r){return rn(r,t,e)}}function rn(t,e,r){var n=r.length;if(null==t)return!n;for(t=nf(t);n--;){var o=r[n],i=e[o],u=t[o];if(u===nt&&!(o in t)||!i(u))return!1}return!0}function nn(t,e,r){if("function"!=typeof t)throw new af(ut);return jl(function(){t.apply(nt,r)},e)}function on(t,e,r,n){var o=-1,i=l,u=!0,a=t.length,c=[],s=e.length;if(!a)return c;r&&(e=p(e,P(r))),n?(i=d,u=!1):e.length>=ot&&(i=N,u=!1,e=new hr(e));t:for(;++o<a;){var f=t[o],h=null==r?f:r(f);if(f=n||0!==f?f:0,u&&h===h){for(var v=s;v--;)if(e[v]===h)continue t;c.push(f)}else i(e,h,n)||c.push(f)}return c}function un(t,e){var r=!0;return ll(t,function(t,n,o){return r=!!e(t,n,o)}),r}function an(t,e,r){for(var n=-1,o=t.length;++n<o;){var i=t[n],u=e(i);if(null!=u&&(a===nt?u===u&&!dc(u):r(u,a)))var a=u,c=i}return c}function cn(t,e,r,n){var o=t.length;for(r=mc(r),r<0&&(r=-r>o?0:o+r),n=n===nt||n>o?o:mc(n),n<0&&(n+=o),n=r>n?0:_c(n);r<n;)t[r++]=e;return t}function sn(t,e){var r=[];return ll(t,function(t,n,o){e(t,n,o)&&r.push(t)}),r}function fn(t,e,r,n,o){var i=-1,u=t.length;for(r||(r=Ri),o||(o=[]);++i<u;){var a=t[i];e>0&&r(a)?e>1?fn(a,e-1,r,n,o):h(o,a):n||(o[o.length]=a)}return o}function ln(t,e){return t&&pl(t,e,kc)}function dn(t,e){return t&&hl(t,e,kc)}function pn(t,e){return f(e,function(e){return Xa(t[e])})}function hn(t,e){e=xo(e,t);for(var r=0,n=e.length;null!=t&&r<n;)t=t[Ki(e[r++])];return r&&r==n?t:nt}function vn(t,e,r){var n=e(t);return pd(t)?n:h(n,r(t))}function gn(t){return null==t?t===nt?ne:Yt:Rf&&Rf in nf(t)?xi(t):Hi(t)}function yn(t,e){return t>e}function mn(t,e){return null!=t&&pf.call(t,e)}function _n(t,e){return null!=t&&e in nf(t)}function bn(t,e,r){return t>=qf(e,r)&&t<Hf(e,r)}function wn(t,e,r){for(var n=r?d:l,o=t[0].length,i=t.length,u=i,a=Js(i),c=1/0,s=[];u--;){var f=t[u];u&&e&&(f=p(f,P(e))),c=qf(f.length,c),a[u]=!r&&(e||o>=120&&f.length>=120)?new hr(u&&f):nt}f=t[0];var h=-1,v=a[0];t:for(;++h<o&&s.length<c;){var g=f[h],y=e?e(g):g;if(g=r||0!==g?g:0,!(v?N(v,y):n(s,y,r))){for(u=i;--u;){var m=a[u];if(!(m?N(m,y):n(t[u],y,r)))continue t}v&&v.push(y),s.push(g)}}return s}function xn(t,e,r,n){return ln(t,function(t,o,i){e(n,r(t),o,i)}),n}function An(t,e,r){e=xo(e,t),t=Vi(t,e);var n=null==t?t:t[Ki(yu(e))];return null==n?nt:i(n,t,r)}function En(t){return ec(t)&&gn(t)==Bt}function Sn(t){return ec(t)&&gn(t)==ue}function jn(t){return ec(t)&&gn(t)==qt}function Tn(t,e,r,n,o){return t===e||(null==t||null==e||!ec(t)&&!ec(e)?t!==t&&e!==e:On(t,e,r,n,Tn,o))}function On(t,e,r,n,o,i){var u=pd(t),a=pd(e),c=u?zt:Al(t),s=a?zt:Al(e);c=c==Bt?Xt:c,s=s==Bt?Xt:s;var f=c==Xt,l=s==Xt,d=c==s;if(d&&vd(t)){if(!vd(e))return!1;u=!0,f=!1}if(d&&!f)return i||(i=new yr),u||bd(t)?fi(t,e,r,n,o,i):li(t,e,c,r,n,o,i);if(!(r&pt)){var p=f&&pf.call(t,"__wrapped__"),h=l&&pf.call(e,"__wrapped__");if(p||h){var v=p?t.value():t,g=h?e.value():e;return i||(i=new yr),o(v,g,r,n,i)}}return!!d&&(i||(i=new yr),di(t,e,r,n,o,i))}function Ln(t){return ec(t)&&Al(t)==Zt}function Rn(t,e,r,n){var o=r.length,i=o,u=!n;if(null==t)return!i;for(t=nf(t);o--;){var a=r[o];if(u&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<i;){a=r[o];var c=a[0],s=t[c],f=a[1];if(u&&a[2]){if(s===nt&&!(c in t))return!1}else{var l=new yr;if(n)var d=n(s,f,c,t,e,l);if(!(d===nt?Tn(f,s,pt|ht,n,l):d))return!1}}return!0}function Cn(t){return!(!tc(t)||ki(t))&&(Xa(t)?_f:Ve).test(Yi(t))}function In(t){return ec(t)&&gn(t)==Qt}function Pn(t){return ec(t)&&Al(t)==te}function Mn(t){return ec(t)&&Qa(t.length)&&!!br[gn(t)]}function Nn(t){return"function"==typeof t?t:null==t?js:"object"==typeof t?pd(t)?Un(t[0],t[1]):zn(t):Ms(t)}function kn(t){if(!Fi(t))return Uf(t);var e=[];for(var r in nf(t))pf.call(t,r)&&"constructor"!=r&&e.push(r);return e}function Fn(t){if(!tc(t))return Ui(t);var e=Fi(t),r=[];for(var n in t)("constructor"!=n||!e&&pf.call(t,n))&&r.push(n);return r}function Dn(t,e){return t<e}function Bn(t,e){var r=-1,n=Ha(t)?Js(t.length):[];return ll(t,function(t,o,i){n[++r]=e(t,o,i)}),n}function zn(t){var e=bi(t);return 1==e.length&&e[0][2]?Bi(e[0][0],e[0][1]):function(r){return r===t||Rn(r,t,e)}}function Un(t,e){return Pi(t)&&Di(e)?Bi(Ki(t),e):function(r){var n=Pc(r,t);return n===nt&&n===e?Nc(r,t):Tn(e,n,pt|ht)}}function Hn(t,e,r,n,o){t!==e&&pl(e,function(i,u){if(tc(i))o||(o=new yr),qn(t,e,u,r,Hn,n,o);else{var a=n?n($(t,u),i,u+"",t,e,o):nt;a===nt&&(a=i),Nr(t,u,a)}},Fc)}function qn(t,e,r,n,o,i,u){var a=$(t,r),c=$(e,r),s=u.get(c);if(s)return void Nr(t,r,s);var f=i?i(a,c,r+"",t,e,u):nt,l=f===nt;if(l){var d=pd(c),p=!d&&vd(c),h=!d&&!p&&bd(c);f=c,d||p||h?pd(a)?f=a:qa(a)?f=Mo(a):p?(l=!1,f=Eo(c,!0)):h?(l=!1,f=Lo(c,!0)):f=[]:sc(c)||dd(c)?(f=a,dd(a)?f=wc(a):(!tc(a)||n&&Xa(a))&&(f=Ti(c))):l=!1}l&&(u.set(c,f),o(f,c,n,i,u),u.delete(c)),Nr(t,r,f)}function Vn(t,e){var r=t.length;if(r)return e+=e<0?r:0,Ci(e,r)?t[e]:nt}function Wn(t,e,r){var n=-1;return e=p(e.length?e:[js],P(mi())),L(Bn(t,function(t,r,o){return{criteria:p(e,function(e){return e(t)}),index:++n,value:t}}),function(t,e){return Co(t,e,r)})}function Gn(t,e){return $n(t,e,function(e,r){return Nc(t,r)})}function $n(t,e,r){for(var n=-1,o=e.length,i={};++n<o;){var u=e[n],a=hn(t,u);r(a,u)&&no(i,xo(u,t),a)}return i}function Zn(t){return function(e){return hn(e,t)}}function Kn(t,e,r,n){var o=n?A:x,i=-1,u=e.length,a=t;for(t===e&&(e=Mo(e)),r&&(a=p(t,P(r)));++i<u;)for(var c=0,s=e[i],f=r?r(s):s;(c=o(a,f,c,n))>-1;)a!==t&&Tf.call(a,c,1),Tf.call(t,c,1);return t}function Yn(t,e){for(var r=t?e.length:0,n=r-1;r--;){var o=e[r];if(r==n||o!==i){var i=o;Ci(o)?Tf.call(t,o,1):ho(t,o)}}return t}function Xn(t,e){return t+kf(Gf()*(e-t+1))}function Jn(t,e,r,n){for(var o=-1,i=Hf(Nf((e-t)/(r||1)),0),u=Js(i);i--;)u[n?i:++o]=t,t+=r;return u}function Qn(t,e){var r="";if(!t||e<1||e>It)return r;do{e%2&&(r+=t),(e=kf(e/2))&&(t+=t)}while(e);return r}function to(t,e){return Tl(qi(t,e,js),t+"")}function eo(t){return Cr(Kc(t))}function ro(t,e){var r=Kc(t);return Zi(r,Qr(e,0,r.length))}function no(t,e,r,n){if(!tc(t))return t;e=xo(e,t);for(var o=-1,i=e.length,u=i-1,a=t;null!=a&&++o<i;){var c=Ki(e[o]),s=r;if(o!=u){var f=a[c];s=n?n(f,c,a):nt,s===nt&&(s=tc(f)?f:Ci(e[o+1])?[]:{})}Hr(a,c,s),a=a[c]}return t}function oo(t){return Zi(Kc(t))}function io(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),r=r>o?o:r,r<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var i=Js(o);++n<o;)i[n]=t[n+e];return i}function uo(t,e){var r;return ll(t,function(t,n,o){return!(r=e(t,n,o))}),!!r}function ao(t,e,r){var n=0,o=null==t?n:t.length;if("number"==typeof e&&e===e&&o<=Ft){for(;n<o;){var i=n+o>>>1,u=t[i];null!==u&&!dc(u)&&(r?u<=e:u<e)?n=i+1:o=i}return o}return co(t,e,js,r)}function co(t,e,r,n){e=r(e);for(var o=0,i=null==t?0:t.length,u=e!==e,a=null===e,c=dc(e),s=e===nt;o<i;){var f=kf((o+i)/2),l=r(t[f]),d=l!==nt,p=null===l,h=l===l,v=dc(l);if(u)var g=n||h;else g=s?h&&(n||d):a?h&&d&&(n||!p):c?h&&d&&!p&&(n||!v):!p&&!v&&(n?l<=e:l<e);g?o=f+1:i=f}return qf(i,kt)}function so(t,e){for(var r=-1,n=t.length,o=0,i=[];++r<n;){var u=t[r],a=e?e(u):u;if(!r||!Ua(a,c)){var c=a;i[o++]=0===u?0:u}}return i}function fo(t){return"number"==typeof t?t:dc(t)?Mt:+t}function lo(t){if("string"==typeof t)return t;if(pd(t))return p(t,lo)+"";if(dc(t))return sl?sl.call(t):"";var e=t+"";return"0"==e&&1/t==-Ct?"-0":e}function po(t,e,r){var n=-1,o=l,i=t.length,u=!0,a=[],c=a;if(r)u=!1,o=d;else if(i>=ot){var s=e?null:_l(t);if(s)return Z(s);u=!1,o=N,c=new hr}else c=e?[]:a;t:for(;++n<i;){var f=t[n],p=e?e(f):f;if(f=r||0!==f?f:0,u&&p===p){for(var h=c.length;h--;)if(c[h]===p)continue t;e&&c.push(p),a.push(f)}else o(c,p,r)||(c!==a&&c.push(p),a.push(f))}return a}function ho(t,e){return e=xo(e,t),null==(t=Vi(t,e))||delete t[Ki(yu(e))]}function vo(t,e,r,n){return no(t,e,r(hn(t,e)),n)}function go(t,e,r,n){for(var o=t.length,i=n?o:-1;(n?i--:++i<o)&&e(t[i],i,t););return r?io(t,n?0:i,n?i+1:o):io(t,n?i+1:0,n?o:i)}function yo(t,e){var r=t;return r instanceof m&&(r=r.value()),v(e,function(t,e){return e.func.apply(e.thisArg,h([t],e.args))},r)}function mo(t,e,r){var n=t.length;if(n<2)return n?po(t[0]):[];for(var o=-1,i=Js(n);++o<n;)for(var u=t[o],a=-1;++a<n;)a!=o&&(i[o]=on(i[o]||u,t[a],e,r));return po(fn(i,1),e,r)}function _o(t,e,r){for(var n=-1,o=t.length,i=e.length,u={};++n<o;){var a=n<i?e[n]:nt;r(u,t[n],a)}return u}function bo(t){return qa(t)?t:[]}function wo(t){return"function"==typeof t?t:js}function xo(t,e){return pd(t)?t:Pi(t,e)?[t]:Ol(Ac(t))}function Ao(t,e,r){var n=t.length;return r=r===nt?n:r,!e&&r>=n?t:io(t,e,r)}function Eo(t,e){if(e)return t.slice();var r=t.length,n=Af?Af(r):new t.constructor(r);return t.copy(n),n}function So(t){var e=new t.constructor(t.byteLength);return new xf(e).set(new xf(t)),e}function jo(t,e){var r=e?So(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}function To(t){var e=new t.constructor(t.source,Ue.exec(t));return e.lastIndex=t.lastIndex,e}function Oo(t){return cl?nf(cl.call(t)):{}}function Lo(t,e){var r=e?So(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function Ro(t,e){if(t!==e){var r=t!==nt,n=null===t,o=t===t,i=dc(t),u=e!==nt,a=null===e,c=e===e,s=dc(e);if(!a&&!s&&!i&&t>e||i&&u&&c&&!a&&!s||n&&u&&c||!r&&c||!o)return 1;if(!n&&!i&&!s&&t<e||s&&r&&o&&!n&&!i||a&&r&&o||!u&&o||!c)return-1}return 0}function Co(t,e,r){for(var n=-1,o=t.criteria,i=e.criteria,u=o.length,a=r.length;++n<u;){var c=Ro(o[n],i[n]);if(c){if(n>=a)return c;return c*("desc"==r[n]?-1:1)}}return t.index-e.index}function Io(t,e,r,n){for(var o=-1,i=t.length,u=r.length,a=-1,c=e.length,s=Hf(i-u,0),f=Js(c+s),l=!n;++a<c;)f[a]=e[a];for(;++o<u;)(l||o<i)&&(f[r[o]]=t[o]);for(;s--;)f[a++]=t[o++];return f}function Po(t,e,r,n){for(var o=-1,i=t.length,u=-1,a=r.length,c=-1,s=e.length,f=Hf(i-a,0),l=Js(f+s),d=!n;++o<f;)l[o]=t[o];for(var p=o;++c<s;)l[p+c]=e[c];for(;++u<a;)(d||o<i)&&(l[p+r[u]]=t[o++]);return l}function Mo(t,e){var r=-1,n=t.length;for(e||(e=Js(n));++r<n;)e[r]=t[r];return e}function No(t,e,r,n){var o=!r;r||(r={});for(var i=-1,u=e.length;++i<u;){var a=e[i],c=n?n(r[a],t[a],a,r,t):nt;c===nt&&(c=t[a]),o?Xr(r,a,c):Hr(r,a,c)}return r}function ko(t,e){return No(t,wl(t),e)}function Fo(t,e){return No(t,xl(t),e)}function Do(t,e){return function(r,n){var o=pd(r)?u:Zr,i=e?e():{};return o(r,t,mi(n,2),i)}}function Bo(t){return to(function(e,r){var n=-1,o=r.length,i=o>1?r[o-1]:nt,u=o>2?r[2]:nt;for(i=t.length>3&&"function"==typeof i?(o--,i):nt,u&&Ii(r[0],r[1],u)&&(i=o<3?nt:i,o=1),e=nf(e);++n<o;){var a=r[n];a&&t(e,a,n,i)}return e})}function zo(t,e){return function(r,n){if(null==r)return r;if(!Ha(r))return t(r,n);for(var o=r.length,i=e?o:-1,u=nf(r);(e?i--:++i<o)&&!1!==n(u[i],i,u););return r}}function Uo(t){return function(e,r,n){for(var o=-1,i=nf(e),u=n(e),a=u.length;a--;){var c=u[t?a:++o];if(!1===r(i[c],c,i))break}return e}}function Ho(t,e,r){function n(){return(this&&this!==Rr&&this instanceof n?i:t).apply(o?r:this,arguments)}var o=e&vt,i=Wo(t);return n}function qo(t){return function(e){e=Ac(e);var r=U(e)?Q(e):nt,n=r?r[0]:e.charAt(0),o=r?Ao(r,1).join(""):e.slice(1);return n[t]()+o}}function Vo(t){return function(e){return v(ws(es(e).replace(dr,"")),t,"")}}function Wo(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=fl(t.prototype),n=t.apply(r,e);return tc(n)?n:r}}function Go(t,e,r){function n(){for(var u=arguments.length,a=Js(u),c=u,s=yi(n);c--;)a[c]=arguments[c];var f=u<3&&a[0]!==s&&a[u-1]!==s?[]:G(a,s);return(u-=f.length)<r?ni(t,e,Ko,n.placeholder,nt,a,f,nt,nt,r-u):i(this&&this!==Rr&&this instanceof n?o:t,this,a)}var o=Wo(t);return n}function $o(t){return function(e,r,n){var o=nf(e);if(!Ha(e)){var i=mi(r,3);e=kc(e),r=function(t){return i(o[t],t,o)}}var u=t(e,r,n);return u>-1?o[i?e[u]:u]:nt}}function Zo(t){return pi(function(e){var r=e.length,n=r,i=o.prototype.thru;for(t&&e.reverse();n--;){var u=e[n];if("function"!=typeof u)throw new af(ut);if(i&&!a&&"wrapper"==gi(u))var a=new o([],!0)}for(n=a?n:r;++n<r;){u=e[n];var c=gi(u),s="wrapper"==c?bl(u):nt;a=s&&Ni(s[0])&&s[1]==(xt|mt|bt|At)&&!s[4].length&&1==s[9]?a[gi(s[0])].apply(a,s[3]):1==u.length&&Ni(u)?a[c]():a.thru(u)}return function(){var t=arguments,n=t[0];if(a&&1==t.length&&pd(n))return a.plant(n).value();for(var o=0,i=r?e[o].apply(this,t):n;++o<r;)i=e[o].call(this,i);return i}})}function Ko(t,e,r,n,o,i,u,a,c,s){function f(){for(var y=arguments.length,m=Js(y),_=y;_--;)m[_]=arguments[_];if(h)var b=yi(f),w=D(m,b);if(n&&(m=Io(m,n,o,h)),i&&(m=Po(m,i,u,h)),y-=w,h&&y<s){var x=G(m,b);return ni(t,e,Ko,f.placeholder,r,m,x,a,c,s-y)}var A=d?r:this,E=p?A[t]:t;return y=m.length,a?m=Wi(m,a):v&&y>1&&m.reverse(),l&&c<y&&(m.length=c),this&&this!==Rr&&this instanceof f&&(E=g||Wo(E)),E.apply(A,m)}var l=e&xt,d=e&vt,p=e&gt,h=e&(mt|_t),v=e&Et,g=p?nt:Wo(t);return f}function Yo(t,e){return function(r,n){return xn(r,t,e(n),{})}}function Xo(t,e){return function(r,n){var o;if(r===nt&&n===nt)return e;if(r!==nt&&(o=r),n!==nt){if(o===nt)return n;"string"==typeof r||"string"==typeof n?(r=lo(r),n=lo(n)):(r=fo(r),n=fo(n)),o=t(r,n)}return o}}function Jo(t){return pi(function(e){return e=p(e,P(mi())),to(function(r){var n=this;return t(e,function(t){return i(t,n,r)})})})}function Qo(t,e){e=e===nt?" ":lo(e);var r=e.length;if(r<2)return r?Qn(e,t):e;var n=Qn(e,Nf(t/J(e)));return U(e)?Ao(Q(n),0,t).join(""):n.slice(0,t)}function ti(t,e,r,n){function o(){for(var e=-1,c=arguments.length,s=-1,f=n.length,l=Js(f+c),d=this&&this!==Rr&&this instanceof o?a:t;++s<f;)l[s]=n[s];for(;c--;)l[s++]=arguments[++e];return i(d,u?r:this,l)}var u=e&vt,a=Wo(t);return o}function ei(t){return function(e,r,n){return n&&"number"!=typeof n&&Ii(e,r,n)&&(r=n=nt),e=yc(e),r===nt?(r=e,e=0):r=yc(r),n=n===nt?e<r?1:-1:yc(n),Jn(e,r,n,t)}}function ri(t){return function(e,r){return"string"==typeof e&&"string"==typeof r||(e=bc(e),r=bc(r)),t(e,r)}}function ni(t,e,r,n,o,i,u,a,c,s){var f=e&mt,l=f?u:nt,d=f?nt:u,p=f?i:nt,h=f?nt:i;e|=f?bt:wt,(e&=~(f?wt:bt))&yt||(e&=~(vt|gt));var v=[t,e,o,p,l,h,d,a,c,s],g=r.apply(nt,v);return Ni(t)&&Sl(g,v),g.placeholder=n,Gi(g,t,e)}function oi(t){var e=rf[t];return function(t,r){if(t=bc(t),r=null==r?0:qf(mc(r),292)){var n=(Ac(t)+"e").split("e");return n=(Ac(e(n[0]+"e"+(+n[1]+r)))+"e").split("e"),+(n[0]+"e"+(+n[1]-r))}return e(t)}}function ii(t){return function(e){var r=Al(e);return r==Zt?V(e):r==te?K(e):I(e,t(e))}}function ui(t,e,r,n,o,i,u,a){var c=e&gt;if(!c&&"function"!=typeof t)throw new af(ut);var s=n?n.length:0;if(s||(e&=~(bt|wt),n=o=nt),u=u===nt?u:Hf(mc(u),0),a=a===nt?a:mc(a),s-=o?o.length:0,e&wt){var f=n,l=o;n=o=nt}var d=c?nt:bl(t),p=[t,e,r,n,o,f,l,i,u,a];if(d&&zi(p,d),t=p[0],e=p[1],r=p[2],n=p[3],o=p[4],a=p[9]=p[9]===nt?c?0:t.length:Hf(p[9]-s,0),!a&&e&(mt|_t)&&(e&=~(mt|_t)),e&&e!=vt)h=e==mt||e==_t?Go(t,e,a):e!=bt&&e!=(vt|bt)||o.length?Ko.apply(nt,p):ti(t,e,r,n);else var h=Ho(t,e,r);return Gi((d?vl:Sl)(h,p),t,e)}function ai(t,e,r,n){return t===nt||Ua(t,ff[r])&&!pf.call(n,r)?e:t}function ci(t,e,r,n,o,i){return tc(t)&&tc(e)&&(i.set(e,t),Hn(t,e,nt,ci,i),i.delete(e)),t}function si(t){return sc(t)?nt:t}function fi(t,e,r,n,o,i){var u=r&pt,a=t.length,c=e.length;if(a!=c&&!(u&&c>a))return!1;var s=i.get(t);if(s&&i.get(e))return s==e;var f=-1,l=!0,d=r&ht?new hr:nt;for(i.set(t,e),i.set(e,t);++f<a;){var p=t[f],h=e[f];if(n)var v=u?n(h,p,f,e,t,i):n(p,h,f,t,e,i);if(v!==nt){if(v)continue;l=!1;break}if(d){if(!y(e,function(t,e){if(!N(d,e)&&(p===t||o(p,t,r,n,i)))return d.push(e)})){l=!1;break}}else if(p!==h&&!o(p,h,r,n,i)){l=!1;break}}return i.delete(t),i.delete(e),l}function li(t,e,r,n,o,i,u){switch(r){case ae:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ue:return!(t.byteLength!=e.byteLength||!i(new xf(t),new xf(e)));case Ht:case qt:case Kt:return Ua(+t,+e);case Wt:return t.name==e.name&&t.message==e.message;case Qt:case ee:return t==e+"";case Zt:var a=V;case te:var c=n&pt;if(a||(a=Z),t.size!=e.size&&!c)return!1;var s=u.get(t);if(s)return s==e;n|=ht,u.set(t,e);var f=fi(a(t),a(e),n,o,i,u);return u.delete(t),f;case re:if(cl)return cl.call(t)==cl.call(e)}return!1}function di(t,e,r,n,o,i){var u=r&pt,a=hi(t),c=a.length;if(c!=hi(e).length&&!u)return!1;for(var s=c;s--;){var f=a[s];if(!(u?f in e:pf.call(e,f)))return!1}var l=i.get(t);if(l&&i.get(e))return l==e;var d=!0;i.set(t,e),i.set(e,t);for(var p=u;++s<c;){f=a[s];var h=t[f],v=e[f];if(n)var g=u?n(v,h,f,e,t,i):n(h,v,f,t,e,i);if(!(g===nt?h===v||o(h,v,r,n,i):g)){d=!1;break}p||(p="constructor"==f)}if(d&&!p){var y=t.constructor,m=e.constructor;y!=m&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof m&&m instanceof m)&&(d=!1)}return i.delete(t),i.delete(e),d}function pi(t){return Tl(qi(t,nt,su),t+"")}function hi(t){return vn(t,kc,wl)}function vi(t){return vn(t,Fc,xl)}function gi(t){for(var e=t.name+"",r=el[e],n=pf.call(el,e)?r.length:0;n--;){var o=r[n],i=o.func;if(null==i||i==t)return o.name}return e}function yi(t){return(pf.call(r,"placeholder")?r:t).placeholder}function mi(){var t=r.iteratee||Ts;return t=t===Ts?Nn:t,arguments.length?t(arguments[0],arguments[1]):t}function _i(t,e){var r=t.__data__;return Mi(e)?r["string"==typeof e?"string":"hash"]:r.map}function bi(t){for(var e=kc(t),r=e.length;r--;){var n=e[r],o=t[n];e[r]=[n,o,Di(o)]}return e}function wi(t,e){var r=z(t,e);return Cn(r)?r:nt}function xi(t){var e=pf.call(t,Rf),r=t[Rf];try{t[Rf]=nt;var n=!0}catch(t){}var o=gf.call(t);return n&&(e?t[Rf]=r:delete t[Rf]),o}function Ai(t,e,r){for(var n=-1,o=r.length;++n<o;){var i=r[n],u=i.size;switch(i.type){case"drop":t+=u;break;case"dropRight":e-=u;break;case"take":e=qf(e,t+u);break;case"takeRight":t=Hf(t,e-u)}}return{start:t,end:e}}function Ei(t){var e=t.match(ke);return e?e[1].split(Fe):[]}function Si(t,e,r){e=xo(e,t);for(var n=-1,o=e.length,i=!1;++n<o;){var u=Ki(e[n]);if(!(i=null!=t&&r(t,u)))break;t=t[u]}return i||++n!=o?i:!!(o=null==t?0:t.length)&&Qa(o)&&Ci(u,o)&&(pd(t)||dd(t))}function ji(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&pf.call(t,"index")&&(r.index=t.index,r.input=t.input),r}function Ti(t){return"function"!=typeof t.constructor||Fi(t)?{}:fl(Ef(t))}function Oi(t,e,r){var n=t.constructor;switch(e){case ue:return So(t);case Ht:case qt:return new n(+t);case ae:return jo(t,r);case ce:case se:case fe:case le:case de:case pe:case he:case ve:case ge:return Lo(t,r);case Zt:return new n;case Kt:case ee:return new n(t);case Qt:return To(t);case te:return new n;case re:return Oo(t)}}function Li(t,e){var r=e.length;if(!r)return t;var n=r-1;return e[n]=(r>1?"& ":"")+e[n],e=e.join(r>2?", ":" "),t.replace(Ne,"{\n/* [wrapped with "+e+"] */\n")}function Ri(t){return pd(t)||dd(t)||!!(Of&&t&&t[Of])}function Ci(t,e){var r=typeof t;return!!(e=null==e?It:e)&&("number"==r||"symbol"!=r&&Ge.test(t))&&t>-1&&t%1==0&&t<e}function Ii(t,e,r){if(!tc(r))return!1;var n=typeof e;return!!("number"==n?Ha(r)&&Ci(e,r.length):"string"==n&&e in r)&&Ua(r[e],t)}function Pi(t,e){if(pd(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!dc(t))||(Oe.test(t)||!Te.test(t)||null!=e&&t in nf(e))}function Mi(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Ni(t){var e=gi(t),n=r[e];if("function"!=typeof n||!(e in m.prototype))return!1;if(t===n)return!0;var o=bl(n);return!!o&&t===o[0]}function ki(t){return!!vf&&vf in t}function Fi(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ff)}function Di(t){return t===t&&!tc(t)}function Bi(t,e){return function(r){return null!=r&&(r[t]===e&&(e!==nt||t in nf(r)))}}function zi(t,e){var r=t[1],n=e[1],o=r|n,i=o<(vt|gt|xt),u=n==xt&&r==mt||n==xt&&r==At&&t[7].length<=e[8]||n==(xt|At)&&e[7].length<=e[8]&&r==mt;if(!i&&!u)return t;n&vt&&(t[2]=e[2],o|=r&vt?0:yt);var a=e[3];if(a){var c=t[3];t[3]=c?Io(c,a,e[4]):a,t[4]=c?G(t[3],st):e[4]}return a=e[5],a&&(c=t[5],t[5]=c?Po(c,a,e[6]):a,t[6]=c?G(t[5],st):e[6]),a=e[7],a&&(t[7]=a),n&xt&&(t[8]=null==t[8]?e[8]:qf(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=o,t}function Ui(t){var e=[];if(null!=t)for(var r in nf(t))e.push(r);return e}function Hi(t){return gf.call(t)}function qi(t,e,r){return e=Hf(e===nt?t.length-1:e,0),function(){for(var n=arguments,o=-1,u=Hf(n.length-e,0),a=Js(u);++o<u;)a[o]=n[e+o];o=-1;for(var c=Js(e+1);++o<e;)c[o]=n[o];return c[e]=r(a),i(t,this,c)}}function Vi(t,e){return e.length<2?t:hn(t,io(e,0,-1))}function Wi(t,e){for(var r=t.length,n=qf(e.length,r),o=Mo(t);n--;){var i=e[n];t[n]=Ci(i,r)?o[i]:nt}return t}function Gi(t,e,r){var n=e+"";return Tl(t,Li(n,Xi(Ei(n),r)))}function $i(t){var e=0,r=0;return function(){var n=Vf(),o=Ot-(n-r);if(r=n,o>0){if(++e>=Tt)return arguments[0]}else e=0;return t.apply(nt,arguments)}}function Zi(t,e){var r=-1,n=t.length,o=n-1;for(e=e===nt?n:e;++r<e;){var i=Xn(r,o),u=t[i];t[i]=t[r],t[r]=u}return t.length=e,t}function Ki(t){if("string"==typeof t||dc(t))return t;var e=t+"";return"0"==e&&1/t==-Ct?"-0":e}function Yi(t){if(null!=t){try{return df.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Xi(t,e){return a(Dt,function(r){var n="_."+r[0];e&r[1]&&!l(t,n)&&t.push(n)}),t.sort()}function Ji(t){if(t instanceof m)return t.clone();var e=new o(t.__wrapped__,t.__chain__);return e.__actions__=Mo(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function Qi(t,e,r){e=(r?Ii(t,e,r):e===nt)?1:Hf(mc(e),0);var n=null==t?0:t.length;if(!n||e<1)return[];for(var o=0,i=0,u=Js(Nf(n/e));o<n;)u[i++]=io(t,o,o+=e);return u}function tu(t){for(var e=-1,r=null==t?0:t.length,n=0,o=[];++e<r;){var i=t[e];i&&(o[n++]=i)}return o}function eu(){var t=arguments.length;if(!t)return[];for(var e=Js(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return h(pd(r)?Mo(r):[r],fn(e,1))}function ru(t,e,r){var n=null==t?0:t.length;return n?(e=r||e===nt?1:mc(e),io(t,e<0?0:e,n)):[]}function nu(t,e,r){var n=null==t?0:t.length;return n?(e=r||e===nt?1:mc(e),e=n-e,io(t,0,e<0?0:e)):[]}function ou(t,e){return t&&t.length?go(t,mi(e,3),!0,!0):[]}function iu(t,e){return t&&t.length?go(t,mi(e,3),!0):[]}function uu(t,e,r,n){var o=null==t?0:t.length;return o?(r&&"number"!=typeof r&&Ii(t,e,r)&&(r=0,n=o),cn(t,e,r,n)):[]}function au(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var o=null==r?0:mc(r);return o<0&&(o=Hf(n+o,0)),w(t,mi(e,3),o)}function cu(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var o=n-1;return r!==nt&&(o=mc(r),o=r<0?Hf(n+o,0):qf(o,n-1)),w(t,mi(e,3),o,!0)}function su(t){return(null==t?0:t.length)?fn(t,1):[]}function fu(t){return(null==t?0:t.length)?fn(t,Ct):[]}function lu(t,e){return(null==t?0:t.length)?(e=e===nt?1:mc(e),fn(t,e)):[]}function du(t){for(var e=-1,r=null==t?0:t.length,n={};++e<r;){var o=t[e];n[o[0]]=o[1]}return n}function pu(t){return t&&t.length?t[0]:nt}function hu(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var o=null==r?0:mc(r);return o<0&&(o=Hf(n+o,0)),x(t,e,o)}function vu(t){return(null==t?0:t.length)?io(t,0,-1):[]}function gu(t,e){return null==t?"":zf.call(t,e)}function yu(t){var e=null==t?0:t.length;return e?t[e-1]:nt}function mu(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var o=n;return r!==nt&&(o=mc(r),o=o<0?Hf(n+o,0):qf(o,n-1)),e===e?X(t,e,o):w(t,E,o,!0)}function _u(t,e){return t&&t.length?Vn(t,mc(e)):nt}function bu(t,e){return t&&t.length&&e&&e.length?Kn(t,e):t}function wu(t,e,r){return t&&t.length&&e&&e.length?Kn(t,e,mi(r,2)):t}function xu(t,e,r){return t&&t.length&&e&&e.length?Kn(t,e,nt,r):t}function Au(t,e){var r=[];if(!t||!t.length)return r;var n=-1,o=[],i=t.length;for(e=mi(e,3);++n<i;){var u=t[n];e(u,n,t)&&(r.push(u),o.push(n))}return Yn(t,o),r}function Eu(t){return null==t?t:$f.call(t)}function Su(t,e,r){var n=null==t?0:t.length;return n?(r&&"number"!=typeof r&&Ii(t,e,r)?(e=0,r=n):(e=null==e?0:mc(e),r=r===nt?n:mc(r)),io(t,e,r)):[]}function ju(t,e){return ao(t,e)}function Tu(t,e,r){return co(t,e,mi(r,2))}function Ou(t,e){var r=null==t?0:t.length;if(r){var n=ao(t,e);if(n<r&&Ua(t[n],e))return n}return-1}function Lu(t,e){return ao(t,e,!0)}function Ru(t,e,r){return co(t,e,mi(r,2),!0)}function Cu(t,e){if(null==t?0:t.length){var r=ao(t,e,!0)-1;if(Ua(t[r],e))return r}return-1}function Iu(t){return t&&t.length?so(t):[]}function Pu(t,e){return t&&t.length?so(t,mi(e,2)):[]}function Mu(t){var e=null==t?0:t.length;return e?io(t,1,e):[]}function Nu(t,e,r){return t&&t.length?(e=r||e===nt?1:mc(e),io(t,0,e<0?0:e)):[]}function ku(t,e,r){var n=null==t?0:t.length;return n?(e=r||e===nt?1:mc(e),e=n-e,io(t,e<0?0:e,n)):[]}function Fu(t,e){return t&&t.length?go(t,mi(e,3),!1,!0):[]}function Du(t,e){return t&&t.length?go(t,mi(e,3)):[]}function Bu(t){return t&&t.length?po(t):[]}function zu(t,e){return t&&t.length?po(t,mi(e,2)):[]}function Uu(t,e){return e="function"==typeof e?e:nt,t&&t.length?po(t,nt,e):[]}function Hu(t){if(!t||!t.length)return[];var e=0;return t=f(t,function(t){if(qa(t))return e=Hf(t.length,e),!0}),C(e,function(e){return p(t,j(e))})}function qu(t,e){if(!t||!t.length)return[];var r=Hu(t);return null==e?r:p(r,function(t){return i(e,nt,t)})}function Vu(t,e){return _o(t||[],e||[],Hr)}function Wu(t,e){return _o(t||[],e||[],no)}function Gu(t){var e=r(t);return e.__chain__=!0,e}function $u(t,e){return e(t),t}function Zu(t,e){return e(t)}function Ku(){return Gu(this)}function Yu(){return new o(this.value(),this.__chain__)}function Xu(){this.__values__===nt&&(this.__values__=gc(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?nt:this.__values__[this.__index__++]}}function Ju(){return this}function Qu(t){for(var e,r=this;r instanceof n;){var o=Ji(r);o.__index__=0,o.__values__=nt,e?i.__wrapped__=o:e=o;var i=o;r=r.__wrapped__}return i.__wrapped__=t,e}function ta(){var t=this.__wrapped__;if(t instanceof m){var e=t;return this.__actions__.length&&(e=new m(this)),e=e.reverse(),e.__actions__.push({func:Zu,args:[Eu],thisArg:nt}),new o(e,this.__chain__)}return this.thru(Eu)}function ea(){return yo(this.__wrapped__,this.__actions__)}function ra(t,e,r){var n=pd(t)?s:un;return r&&Ii(t,e,r)&&(e=nt),n(t,mi(e,3))}function na(t,e){return(pd(t)?f:sn)(t,mi(e,3))}function oa(t,e){return fn(fa(t,e),1)}function ia(t,e){return fn(fa(t,e),Ct)}function ua(t,e,r){return r=r===nt?1:mc(r),fn(fa(t,e),r)}function aa(t,e){return(pd(t)?a:ll)(t,mi(e,3))}function ca(t,e){return(pd(t)?c:dl)(t,mi(e,3))}function sa(t,e,r,n){t=Ha(t)?t:Kc(t),r=r&&!n?mc(r):0;var o=t.length;return r<0&&(r=Hf(o+r,0)),lc(t)?r<=o&&t.indexOf(e,r)>-1:!!o&&x(t,e,r)>-1}function fa(t,e){return(pd(t)?p:Bn)(t,mi(e,3))}function la(t,e,r,n){return null==t?[]:(pd(e)||(e=null==e?[]:[e]),r=n?nt:r,pd(r)||(r=null==r?[]:[r]),Wn(t,e,r))}function da(t,e,r){var n=pd(t)?v:O,o=arguments.length<3;return n(t,mi(e,4),r,o,ll)}function pa(t,e,r){var n=pd(t)?g:O,o=arguments.length<3;return n(t,mi(e,4),r,o,dl)}function ha(t,e){return(pd(t)?f:sn)(t,Oa(mi(e,3)))}function va(t){return(pd(t)?Cr:eo)(t)}function ga(t,e,r){return e=(r?Ii(t,e,r):e===nt)?1:mc(e),(pd(t)?Ir:ro)(t,e)}function ya(t){return(pd(t)?Mr:oo)(t)}function ma(t){if(null==t)return 0;if(Ha(t))return lc(t)?J(t):t.length;var e=Al(t);return e==Zt||e==te?t.size:kn(t).length}function _a(t,e,r){var n=pd(t)?y:uo;return r&&Ii(t,e,r)&&(e=nt),n(t,mi(e,3))}function ba(t,e){if("function"!=typeof e)throw new af(ut);return t=mc(t),function(){if(--t<1)return e.apply(this,arguments)}}function wa(t,e,r){return e=r?nt:e,e=t&&null==e?t.length:e,ui(t,xt,nt,nt,nt,nt,e)}function xa(t,e){var r;if("function"!=typeof e)throw new af(ut);return t=mc(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=nt),r}}function Aa(t,e,r){e=r?nt:e;var n=ui(t,mt,nt,nt,nt,nt,nt,e);return n.placeholder=Aa.placeholder,n}function Ea(t,e,r){e=r?nt:e;var n=ui(t,_t,nt,nt,nt,nt,nt,e);return n.placeholder=Ea.placeholder,n}function Sa(t,e,r){function n(e){var r=d,n=p;return d=p=nt,m=e,v=t.apply(n,r)}function o(t){return m=t,g=jl(a,e),_?n(t):v}function i(t){var r=t-y,n=t-m,o=e-r;return b?qf(o,h-n):o}function u(t){var r=t-y,n=t-m;return y===nt||r>=e||r<0||b&&n>=h}function a(){var t=ed();if(u(t))return c(t);g=jl(a,i(t))}function c(t){return g=nt,w&&d?n(t):(d=p=nt,v)}function s(){g!==nt&&ml(g),m=0,d=y=p=g=nt}function f(){return g===nt?v:c(ed())}function l(){var t=ed(),r=u(t);if(d=arguments,p=this,y=t,r){if(g===nt)return o(y);if(b)return g=jl(a,e),n(y)}return g===nt&&(g=jl(a,e)),v}var d,p,h,v,g,y,m=0,_=!1,b=!1,w=!0;if("function"!=typeof t)throw new af(ut);return e=bc(e)||0,tc(r)&&(_=!!r.leading,b="maxWait"in r,h=b?Hf(bc(r.maxWait)||0,e):h,w="trailing"in r?!!r.trailing:w),l.cancel=s,l.flush=f,l}function ja(t){return ui(t,Et)}function Ta(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new af(ut);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var u=t.apply(this,n);return r.cache=i.set(o,u)||i,u};return r.cache=new(Ta.Cache||ur),r}function Oa(t){if("function"!=typeof t)throw new af(ut);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function La(t){return xa(2,t)}function Ra(t,e){if("function"!=typeof t)throw new af(ut);return e=e===nt?e:mc(e),to(t,e)}function Ca(t,e){if("function"!=typeof t)throw new af(ut);return e=null==e?0:Hf(mc(e),0),to(function(r){var n=r[e],o=Ao(r,0,e);return n&&h(o,n),i(t,this,o)})}function Ia(t,e,r){var n=!0,o=!0;if("function"!=typeof t)throw new af(ut);return tc(r)&&(n="leading"in r?!!r.leading:n,o="trailing"in r?!!r.trailing:o),Sa(t,e,{leading:n,maxWait:e,trailing:o})}function Pa(t){return wa(t,1)}function Ma(t,e){return ad(wo(e),t)}function Na(){if(!arguments.length)return[];var t=arguments[0];return pd(t)?t:[t]}function ka(t){return tn(t,dt)}function Fa(t,e){return e="function"==typeof e?e:nt,tn(t,dt,e)}function Da(t){return tn(t,ft|dt)}function Ba(t,e){return e="function"==typeof e?e:nt,tn(t,ft|dt,e)}function za(t,e){return null==e||rn(t,e,kc(e))}function Ua(t,e){return t===e||t!==t&&e!==e}function Ha(t){return null!=t&&Qa(t.length)&&!Xa(t)}function qa(t){return ec(t)&&Ha(t)}function Va(t){return!0===t||!1===t||ec(t)&&gn(t)==Ht}function Wa(t){return ec(t)&&1===t.nodeType&&!sc(t)}function Ga(t){if(null==t)return!0;if(Ha(t)&&(pd(t)||"string"==typeof t||"function"==typeof t.splice||vd(t)||bd(t)||dd(t)))return!t.length;var e=Al(t);if(e==Zt||e==te)return!t.size;if(Fi(t))return!kn(t).length;for(var r in t)if(pf.call(t,r))return!1;return!0}function $a(t,e){return Tn(t,e)}function Za(t,e,r){r="function"==typeof r?r:nt;var n=r?r(t,e):nt;return n===nt?Tn(t,e,nt,r):!!n}function Ka(t){if(!ec(t))return!1;var e=gn(t);return e==Wt||e==Vt||"string"==typeof t.message&&"string"==typeof t.name&&!sc(t)}function Ya(t){return"number"==typeof t&&Bf(t)}function Xa(t){if(!tc(t))return!1;var e=gn(t);return e==Gt||e==$t||e==Ut||e==Jt}function Ja(t){return"number"==typeof t&&t==mc(t)}function Qa(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=It}function tc(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ec(t){return null!=t&&"object"==typeof t}function rc(t,e){return t===e||Rn(t,e,bi(e))}function nc(t,e,r){return r="function"==typeof r?r:nt,Rn(t,e,bi(e),r)}function oc(t){return cc(t)&&t!=+t}function ic(t){if(El(t))throw new tf(it);return Cn(t)}function uc(t){return null===t}function ac(t){return null==t}function cc(t){return"number"==typeof t||ec(t)&&gn(t)==Kt}function sc(t){if(!ec(t)||gn(t)!=Xt)return!1;var e=Ef(t);if(null===e)return!0;var r=pf.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&df.call(r)==yf}function fc(t){return Ja(t)&&t>=-It&&t<=It}function lc(t){return"string"==typeof t||!pd(t)&&ec(t)&&gn(t)==ee}function dc(t){return"symbol"==typeof t||ec(t)&&gn(t)==re}function pc(t){return t===nt}function hc(t){return ec(t)&&Al(t)==oe}function vc(t){return ec(t)&&gn(t)==ie}function gc(t){if(!t)return[];if(Ha(t))return lc(t)?Q(t):Mo(t);if(Lf&&t[Lf])return q(t[Lf]());var e=Al(t);return(e==Zt?V:e==te?Z:Kc)(t)}function yc(t){if(!t)return 0===t?t:0;if((t=bc(t))===Ct||t===-Ct){return(t<0?-1:1)*Pt}return t===t?t:0}function mc(t){var e=yc(t),r=e%1;return e===e?r?e-r:e:0}function _c(t){return t?Qr(mc(t),0,Nt):0}function bc(t){if("number"==typeof t)return t;if(dc(t))return Mt;if(tc(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=tc(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Ie,"");var r=qe.test(t);return r||We.test(t)?Tr(t.slice(2),r?2:8):He.test(t)?Mt:+t}function wc(t){return No(t,Fc(t))}function xc(t){return t?Qr(mc(t),-It,It):0===t?t:0}function Ac(t){return null==t?"":lo(t)}function Ec(t,e){var r=fl(t);return null==e?r:Kr(r,e)}function Sc(t,e){return b(t,mi(e,3),ln)}function jc(t,e){return b(t,mi(e,3),dn)}function Tc(t,e){return null==t?t:pl(t,mi(e,3),Fc)}function Oc(t,e){return null==t?t:hl(t,mi(e,3),Fc)}function Lc(t,e){return t&&ln(t,mi(e,3))}function Rc(t,e){return t&&dn(t,mi(e,3))}function Cc(t){return null==t?[]:pn(t,kc(t))}function Ic(t){return null==t?[]:pn(t,Fc(t))}function Pc(t,e,r){var n=null==t?nt:hn(t,e);return n===nt?r:n}function Mc(t,e){return null!=t&&Si(t,e,mn)}function Nc(t,e){return null!=t&&Si(t,e,_n)}function kc(t){return Ha(t)?Lr(t):kn(t)}function Fc(t){return Ha(t)?Lr(t,!0):Fn(t)}function Dc(t,e){var r={};return e=mi(e,3),ln(t,function(t,n,o){Xr(r,e(t,n,o),t)}),r}function Bc(t,e){var r={};return e=mi(e,3),ln(t,function(t,n,o){Xr(r,n,e(t,n,o))}),r}function zc(t,e){return Uc(t,Oa(mi(e)))}function Uc(t,e){if(null==t)return{};var r=p(vi(t),function(t){return[t]});return e=mi(e),$n(t,r,function(t,r){return e(t,r[0])})}function Hc(t,e,r){e=xo(e,t);var n=-1,o=e.length;for(o||(o=1,t=nt);++n<o;){var i=null==t?nt:t[Ki(e[n])];i===nt&&(n=o,i=r),t=Xa(i)?i.call(t):i}return t}function qc(t,e,r){return null==t?t:no(t,e,r)}function Vc(t,e,r,n){return n="function"==typeof n?n:nt,null==t?t:no(t,e,r,n)}function Wc(t,e,r){var n=pd(t),o=n||vd(t)||bd(t);if(e=mi(e,4),null==r){var i=t&&t.constructor;r=o?n?new i:[]:tc(t)&&Xa(i)?fl(Ef(t)):{}}return(o?a:ln)(t,function(t,n,o){return e(r,t,n,o)}),r}function Gc(t,e){return null==t||ho(t,e)}function $c(t,e,r){return null==t?t:vo(t,e,wo(r))}function Zc(t,e,r,n){return n="function"==typeof n?n:nt,null==t?t:vo(t,e,wo(r),n)}function Kc(t){return null==t?[]:M(t,kc(t))}function Yc(t){return null==t?[]:M(t,Fc(t))}function Xc(t,e,r){return r===nt&&(r=e,e=nt),r!==nt&&(r=bc(r),r=r===r?r:0),e!==nt&&(e=bc(e),e=e===e?e:0),Qr(bc(t),e,r)}function Jc(t,e,r){return e=yc(e),r===nt?(r=e,e=0):r=yc(r),t=bc(t),bn(t,e,r)}function Qc(t,e,r){if(r&&"boolean"!=typeof r&&Ii(t,e,r)&&(e=r=nt),r===nt&&("boolean"==typeof e?(r=e,e=nt):"boolean"==typeof t&&(r=t,t=nt)),t===nt&&e===nt?(t=0,e=1):(t=yc(t),e===nt?(e=t,t=0):e=yc(e)),t>e){var n=t;t=e,e=n}if(r||t%1||e%1){var o=Gf();return qf(t+o*(e-t+jr("1e-"+((o+"").length-1))),e)}return Xn(t,e)}function ts(t){return Gd(Ac(t).toLowerCase())}function es(t){return(t=Ac(t))&&t.replace($e,qr).replace(pr,"")}function rs(t,e,r){t=Ac(t),e=lo(e);var n=t.length;r=r===nt?n:Qr(mc(r),0,n);var o=r;return(r-=e.length)>=0&&t.slice(r,o)==e}function ns(t){return t=Ac(t),t&&Ae.test(t)?t.replace(we,Vr):t}function os(t){return t=Ac(t),t&&Ce.test(t)?t.replace(Re,"\\$&"):t}function is(t,e,r){t=Ac(t),e=mc(e);var n=e?J(t):0;if(!e||n>=e)return t;var o=(e-n)/2;return Qo(kf(o),r)+t+Qo(Nf(o),r)}function us(t,e,r){t=Ac(t),e=mc(e);var n=e?J(t):0;return e&&n<e?t+Qo(e-n,r):t}function as(t,e,r){t=Ac(t),e=mc(e);var n=e?J(t):0;return e&&n<e?Qo(e-n,r)+t:t}function cs(t,e,r){return r||null==e?e=0:e&&(e=+e),Wf(Ac(t).replace(Pe,""),e||0)}function ss(t,e,r){return e=(r?Ii(t,e,r):e===nt)?1:mc(e),Qn(Ac(t),e)}function fs(){var t=arguments,e=Ac(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function ls(t,e,r){return r&&"number"!=typeof r&&Ii(t,e,r)&&(e=r=nt),(r=r===nt?Nt:r>>>0)?(t=Ac(t),t&&("string"==typeof e||null!=e&&!md(e))&&!(e=lo(e))&&U(t)?Ao(Q(t),0,r):t.split(e,r)):[]}function ds(t,e,r){return t=Ac(t),r=null==r?0:Qr(mc(r),0,t.length),e=lo(e),t.slice(r,r+e.length)==e}function ps(t,e,n){var o=r.templateSettings;n&&Ii(t,e,n)&&(e=nt),t=Ac(t),e=Sd({},e,o,ai);var i,u,a=Sd({},e.imports,o.imports,ai),c=kc(a),s=M(a,c),f=0,l=e.interpolate||Ze,d="__p += '",p=of((e.escape||Ze).source+"|"+l.source+"|"+(l===je?ze:Ze).source+"|"+(e.evaluate||Ze).source+"|$","g"),h="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++_r+"]")+"\n";t.replace(p,function(e,r,n,o,a,c){return n||(n=o),d+=t.slice(f,c).replace(Ke,B),r&&(i=!0,d+="' +\n__e("+r+") +\n'"),a&&(u=!0,d+="';\n"+a+";\n__p += '"),n&&(d+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),f=c+e.length,e}),d+="';\n";var v=e.variable;v||(d="with (obj) {\n"+d+"\n}\n"),d=(u?d.replace(ye,""):d).replace(me,"$1").replace(_e,"$1;"),d="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=$d(function(){return ef(c,h+"return "+d).apply(nt,s)});if(g.source=d,Ka(g))throw g;return g}function hs(t){return Ac(t).toLowerCase()}function vs(t){return Ac(t).toUpperCase()}function gs(t,e,r){if((t=Ac(t))&&(r||e===nt))return t.replace(Ie,"");if(!t||!(e=lo(e)))return t;var n=Q(t),o=Q(e);return Ao(n,k(n,o),F(n,o)+1).join("")}function ys(t,e,r){if((t=Ac(t))&&(r||e===nt))return t.replace(Me,"");if(!t||!(e=lo(e)))return t;var n=Q(t);return Ao(n,0,F(n,Q(e))+1).join("")}function ms(t,e,r){if((t=Ac(t))&&(r||e===nt))return t.replace(Pe,"");if(!t||!(e=lo(e)))return t;var n=Q(t);return Ao(n,k(n,Q(e))).join("")}function _s(t,e){var r=St,n=jt;if(tc(e)){var o="separator"in e?e.separator:o;r="length"in e?mc(e.length):r,n="omission"in e?lo(e.omission):n}t=Ac(t);var i=t.length;if(U(t)){var u=Q(t);i=u.length}if(r>=i)return t;var a=r-J(n);if(a<1)return n;var c=u?Ao(u,0,a).join(""):t.slice(0,a);if(o===nt)return c+n;if(u&&(a+=c.length-a),md(o)){if(t.slice(a).search(o)){var s,f=c;for(o.global||(o=of(o.source,Ac(Ue.exec(o))+"g")),o.lastIndex=0;s=o.exec(f);)var l=s.index;c=c.slice(0,l===nt?a:l)}}else if(t.indexOf(lo(o),a)!=a){var d=c.lastIndexOf(o);d>-1&&(c=c.slice(0,d))}return c+n}function bs(t){return t=Ac(t),t&&xe.test(t)?t.replace(be,Wr):t}function ws(t,e,r){return t=Ac(t),e=r?nt:e,e===nt?H(t)?rt(t):_(t):t.match(e)||[]}function xs(t){var e=null==t?0:t.length,r=mi();return t=e?p(t,function(t){if("function"!=typeof t[1])throw new af(ut);return[r(t[0]),t[1]]}):[],to(function(r){for(var n=-1;++n<e;){var o=t[n];if(i(o[0],this,r))return i(o[1],this,r)}})}function As(t){return en(tn(t,ft))}function Es(t){return function(){return t}}function Ss(t,e){return null==t||t!==t?e:t}function js(t){return t}function Ts(t){return Nn("function"==typeof t?t:tn(t,ft))}function Os(t){return zn(tn(t,ft))}function Ls(t,e){return Un(t,tn(e,ft))}function Rs(t,e,r){var n=kc(e),o=pn(e,n);null!=r||tc(e)&&(o.length||!n.length)||(r=e,e=t,t=this,o=pn(e,kc(e)));var i=!(tc(r)&&"chain"in r&&!r.chain),u=Xa(t);return a(o,function(r){var n=e[r];t[r]=n,u&&(t.prototype[r]=function(){var e=this.__chain__;if(i||e){var r=t(this.__wrapped__);return(r.__actions__=Mo(this.__actions__)).push({func:n,args:arguments,thisArg:t}),r.__chain__=e,r}return n.apply(t,h([this.value()],arguments))})}),t}function Cs(){return Rr._===this&&(Rr._=mf),this}function Is(){}function Ps(t){return t=mc(t),to(function(e){return Vn(e,t)})}function Ms(t){return Pi(t)?j(Ki(t)):Zn(t)}function Ns(t){return function(e){return null==t?nt:hn(t,e)}}function ks(){return[]}function Fs(){return!1}function Ds(){return{}}function Bs(){return""}function zs(){return!0}function Us(t,e){if((t=mc(t))<1||t>It)return[];var r=Nt,n=qf(t,Nt);e=mi(e),t-=Nt;for(var o=C(n,e);++r<t;)e(r);return o}function Hs(t){return pd(t)?p(t,Ki):dc(t)?[t]:Mo(Ol(Ac(t)))}function qs(t){var e=++hf;return Ac(t)+e}function Vs(t){return t&&t.length?an(t,js,yn):nt}function Ws(t,e){return t&&t.length?an(t,mi(e,2),yn):nt}function Gs(t){return S(t,js)}function $s(t,e){return S(t,mi(e,2))}function Zs(t){return t&&t.length?an(t,js,Dn):nt}function Ks(t,e){return t&&t.length?an(t,mi(e,2),Dn):nt}function Ys(t){return t&&t.length?R(t,js):0}function Xs(t,e){return t&&t.length?R(t,mi(e,2)):0}e=null==e?Rr:Gr.defaults(Rr.Object(),e,Gr.pick(Rr,mr));var Js=e.Array,Qs=e.Date,tf=e.Error,ef=e.Function,rf=e.Math,nf=e.Object,of=e.RegExp,uf=e.String,af=e.TypeError,cf=Js.prototype,sf=ef.prototype,ff=nf.prototype,lf=e["__core-js_shared__"],df=sf.toString,pf=ff.hasOwnProperty,hf=0,vf=function(){var t=/[^.]+$/.exec(lf&&lf.keys&&lf.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),gf=ff.toString,yf=df.call(nf),mf=Rr._,_f=of("^"+df.call(pf).replace(Re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),bf=Pr?e.Buffer:nt,wf=e.Symbol,xf=e.Uint8Array,Af=bf?bf.allocUnsafe:nt,Ef=W(nf.getPrototypeOf,nf),Sf=nf.create,jf=ff.propertyIsEnumerable,Tf=cf.splice,Of=wf?wf.isConcatSpreadable:nt,Lf=wf?wf.iterator:nt,Rf=wf?wf.toStringTag:nt,Cf=function(){try{var t=wi(nf,"defineProperty");return t({},"",{}),t}catch(t){}}(),If=e.clearTimeout!==Rr.clearTimeout&&e.clearTimeout,Pf=Qs&&Qs.now!==Rr.Date.now&&Qs.now,Mf=e.setTimeout!==Rr.setTimeout&&e.setTimeout,Nf=rf.ceil,kf=rf.floor,Ff=nf.getOwnPropertySymbols,Df=bf?bf.isBuffer:nt,Bf=e.isFinite,zf=cf.join,Uf=W(nf.keys,nf),Hf=rf.max,qf=rf.min,Vf=Qs.now,Wf=e.parseInt,Gf=rf.random,$f=cf.reverse,Zf=wi(e,"DataView"),Kf=wi(e,"Map"),Yf=wi(e,"Promise"),Xf=wi(e,"Set"),Jf=wi(e,"WeakMap"),Qf=wi(nf,"create"),tl=Jf&&new Jf,el={},rl=Yi(Zf),nl=Yi(Kf),ol=Yi(Yf),il=Yi(Xf),ul=Yi(Jf),al=wf?wf.prototype:nt,cl=al?al.valueOf:nt,sl=al?al.toString:nt,fl=function(){function t(){}return function(e){if(!tc(e))return{};if(Sf)return Sf(e);t.prototype=e;var r=new t;return t.prototype=nt,r}}();r.templateSettings={escape:Ee,evaluate:Se,interpolate:je,variable:"",imports:{_:r}},r.prototype=n.prototype,r.prototype.constructor=r,o.prototype=fl(n.prototype),o.prototype.constructor=o,m.prototype=fl(n.prototype),m.prototype.constructor=m,et.prototype.clear=De,et.prototype.delete=Ye,et.prototype.get=Xe,et.prototype.has=Je,et.prototype.set=Qe,tr.prototype.clear=er,tr.prototype.delete=rr,tr.prototype.get=nr,tr.prototype.has=or,tr.prototype.set=ir,ur.prototype.clear=ar,ur.prototype.delete=cr,ur.prototype.get=sr,ur.prototype.has=fr,ur.prototype.set=lr,hr.prototype.add=hr.prototype.push=vr,hr.prototype.has=gr,yr.prototype.clear=xr,yr.prototype.delete=Ar,yr.prototype.get=Er,yr.prototype.has=Sr,yr.prototype.set=Or;var ll=zo(ln),dl=zo(dn,!0),pl=Uo(),hl=Uo(!0),vl=tl?function(t,e){return tl.set(t,e),t}:js,gl=Cf?function(t,e){return Cf(t,"toString",{configurable:!0,enumerable:!1,value:Es(e),writable:!0})}:js,yl=to,ml=If||function(t){return Rr.clearTimeout(t)},_l=Xf&&1/Z(new Xf([,-0]))[1]==Ct?function(t){return new Xf(t)}:Is,bl=tl?function(t){return tl.get(t)}:Is,wl=Ff?function(t){return null==t?[]:(t=nf(t),f(Ff(t),function(e){return jf.call(t,e)}))}:ks,xl=Ff?function(t){for(var e=[];t;)h(e,wl(t)),t=Ef(t);return e}:ks,Al=gn;(Zf&&Al(new Zf(new ArrayBuffer(1)))!=ae||Kf&&Al(new Kf)!=Zt||Yf&&"[object Promise]"!=Al(Yf.resolve())||Xf&&Al(new Xf)!=te||Jf&&Al(new Jf)!=oe)&&(Al=function(t){var e=gn(t),r=e==Xt?t.constructor:nt,n=r?Yi(r):"";if(n)switch(n){case rl:return ae;case nl:return Zt;case ol:return"[object Promise]";case il:return te;case ul:return oe}return e});var El=lf?Xa:Fs,Sl=$i(vl),jl=Mf||function(t,e){return Rr.setTimeout(t,e)},Tl=$i(gl),Ol=function(t){var e=Ta(t,function(t){return r.size===ct&&r.clear(),t}),r=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Le,function(t,r,n,o){e.push(n?o.replace(Be,"$1"):r||t)}),e}),Ll=to(function(t,e){return qa(t)?on(t,fn(e,1,qa,!0)):[]}),Rl=to(function(t,e){var r=yu(e);return qa(r)&&(r=nt),qa(t)?on(t,fn(e,1,qa,!0),mi(r,2)):[]}),Cl=to(function(t,e){var r=yu(e);return qa(r)&&(r=nt),qa(t)?on(t,fn(e,1,qa,!0),nt,r):[]}),Il=to(function(t){var e=p(t,bo);return e.length&&e[0]===t[0]?wn(e):[]}),Pl=to(function(t){var e=yu(t),r=p(t,bo);return e===yu(r)?e=nt:r.pop(),r.length&&r[0]===t[0]?wn(r,mi(e,2)):[]}),Ml=to(function(t){var e=yu(t),r=p(t,bo);return e="function"==typeof e?e:nt,e&&r.pop(),r.length&&r[0]===t[0]?wn(r,nt,e):[]}),Nl=to(bu),kl=pi(function(t,e){var r=null==t?0:t.length,n=Jr(t,e);return Yn(t,p(e,function(t){return Ci(t,r)?+t:t}).sort(Ro)),n}),Fl=to(function(t){return po(fn(t,1,qa,!0))}),Dl=to(function(t){var e=yu(t);return qa(e)&&(e=nt),po(fn(t,1,qa,!0),mi(e,2))}),Bl=to(function(t){var e=yu(t);return e="function"==typeof e?e:nt,po(fn(t,1,qa,!0),nt,e)}),zl=to(function(t,e){return qa(t)?on(t,e):[]}),Ul=to(function(t){return mo(f(t,qa))}),Hl=to(function(t){var e=yu(t);return qa(e)&&(e=nt),mo(f(t,qa),mi(e,2))}),ql=to(function(t){var e=yu(t);return e="function"==typeof e?e:nt,mo(f(t,qa),nt,e)}),Vl=to(Hu),Wl=to(function(t){var e=t.length,r=e>1?t[e-1]:nt;return r="function"==typeof r?(t.pop(),r):nt,qu(t,r)}),Gl=pi(function(t){var e=t.length,r=e?t[0]:0,n=this.__wrapped__,i=function(e){return Jr(e,t)};return!(e>1||this.__actions__.length)&&n instanceof m&&Ci(r)?(n=n.slice(r,+r+(e?1:0)),n.__actions__.push({func:Zu,args:[i],thisArg:nt}),new o(n,this.__chain__).thru(function(t){return e&&!t.length&&t.push(nt),t})):this.thru(i)}),$l=Do(function(t,e,r){pf.call(t,r)?++t[r]:Xr(t,r,1)}),Zl=$o(au),Kl=$o(cu),Yl=Do(function(t,e,r){pf.call(t,r)?t[r].push(e):Xr(t,r,[e])}),Xl=to(function(t,e,r){var n=-1,o="function"==typeof e,u=Ha(t)?Js(t.length):[];return ll(t,function(t){u[++n]=o?i(e,t,r):An(t,e,r)}),u}),Jl=Do(function(t,e,r){Xr(t,r,e)}),Ql=Do(function(t,e,r){t[r?0:1].push(e)},function(){return[[],[]]}),td=to(function(t,e){if(null==t)return[];var r=e.length;return r>1&&Ii(t,e[0],e[1])?e=[]:r>2&&Ii(e[0],e[1],e[2])&&(e=[e[0]]),Wn(t,fn(e,1),[])}),ed=Pf||function(){return Rr.Date.now()},rd=to(function(t,e,r){var n=vt;if(r.length){var o=G(r,yi(rd));n|=bt}return ui(t,n,e,r,o)}),nd=to(function(t,e,r){var n=vt|gt;if(r.length){var o=G(r,yi(nd));n|=bt}return ui(e,n,t,r,o)}),od=to(function(t,e){return nn(t,1,e)}),id=to(function(t,e,r){return nn(t,bc(e)||0,r)});Ta.Cache=ur;var ud=yl(function(t,e){e=1==e.length&&pd(e[0])?p(e[0],P(mi())):p(fn(e,1),P(mi()));var r=e.length;return to(function(n){for(var o=-1,u=qf(n.length,r);++o<u;)n[o]=e[o].call(this,n[o]);return i(t,this,n)})}),ad=to(function(t,e){var r=G(e,yi(ad));return ui(t,bt,nt,e,r)}),cd=to(function(t,e){var r=G(e,yi(cd));return ui(t,wt,nt,e,r)}),sd=pi(function(t,e){return ui(t,At,nt,nt,nt,e)}),fd=ri(yn),ld=ri(function(t,e){return t>=e}),dd=En(function(){return arguments}())?En:function(t){return ec(t)&&pf.call(t,"callee")&&!jf.call(t,"callee")},pd=Js.isArray,hd=kr?P(kr):Sn,vd=Df||Fs,gd=Fr?P(Fr):jn,yd=Dr?P(Dr):Ln,md=Br?P(Br):In,_d=zr?P(zr):Pn,bd=Ur?P(Ur):Mn,wd=ri(Dn),xd=ri(function(t,e){return t<=e}),Ad=Bo(function(t,e){if(Fi(e)||Ha(e))return void No(e,kc(e),t);for(var r in e)pf.call(e,r)&&Hr(t,r,e[r])}),Ed=Bo(function(t,e){No(e,Fc(e),t)}),Sd=Bo(function(t,e,r,n){No(e,Fc(e),t,n)}),jd=Bo(function(t,e,r,n){No(e,kc(e),t,n)}),Td=pi(Jr),Od=to(function(t,e){t=nf(t);var r=-1,n=e.length,o=n>2?e[2]:nt;for(o&&Ii(e[0],e[1],o)&&(n=1);++r<n;)for(var i=e[r],u=Fc(i),a=-1,c=u.length;++a<c;){var s=u[a],f=t[s];(f===nt||Ua(f,ff[s])&&!pf.call(t,s))&&(t[s]=i[s])}return t}),Ld=to(function(t){return t.push(nt,ci),i(Md,nt,t)}),Rd=Yo(function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=gf.call(e)),t[e]=r},Es(js)),Cd=Yo(function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=gf.call(e)),pf.call(t,e)?t[e].push(r):t[e]=[r]},mi),Id=to(An),Pd=Bo(function(t,e,r){Hn(t,e,r)}),Md=Bo(function(t,e,r,n){Hn(t,e,r,n)}),Nd=pi(function(t,e){var r={};if(null==t)return r;var n=!1;e=p(e,function(e){return e=xo(e,t),n||(n=e.length>1),e}),No(t,vi(t),r),n&&(r=tn(r,ft|lt|dt,si));for(var o=e.length;o--;)ho(r,e[o]);return r}),kd=pi(function(t,e){return null==t?{}:Gn(t,e)}),Fd=ii(kc),Dd=ii(Fc),Bd=Vo(function(t,e,r){return e=e.toLowerCase(),t+(r?ts(e):e)}),zd=Vo(function(t,e,r){return t+(r?"-":"")+e.toLowerCase()}),Ud=Vo(function(t,e,r){return t+(r?" ":"")+e.toLowerCase()}),Hd=qo("toLowerCase"),qd=Vo(function(t,e,r){return t+(r?"_":"")+e.toLowerCase()}),Vd=Vo(function(t,e,r){return t+(r?" ":"")+Gd(e)}),Wd=Vo(function(t,e,r){return t+(r?" ":"")+e.toUpperCase()}),Gd=qo("toUpperCase"),$d=to(function(t,e){try{return i(t,nt,e)}catch(t){return Ka(t)?t:new tf(t)}}),Zd=pi(function(t,e){return a(e,function(e){e=Ki(e),Xr(t,e,rd(t[e],t))}),t}),Kd=Zo(),Yd=Zo(!0),Xd=to(function(t,e){return function(r){return An(r,t,e)}}),Jd=to(function(t,e){return function(r){return An(t,r,e)}}),Qd=Jo(p),tp=Jo(s),ep=Jo(y),rp=ei(),np=ei(!0),op=Xo(function(t,e){return t+e},0),ip=oi("ceil"),up=Xo(function(t,e){return t/e},1),ap=oi("floor"),cp=Xo(function(t,e){return t*e},1),sp=oi("round"),fp=Xo(function(t,e){return t-e},0);return r.after=ba,r.ary=wa,r.assign=Ad,r.assignIn=Ed,r.assignInWith=Sd,r.assignWith=jd,r.at=Td,r.before=xa,r.bind=rd,r.bindAll=Zd,r.bindKey=nd,r.castArray=Na,r.chain=Gu,r.chunk=Qi,r.compact=tu,r.concat=eu,r.cond=xs,r.conforms=As,r.constant=Es,r.countBy=$l,r.create=Ec,r.curry=Aa,r.curryRight=Ea,r.debounce=Sa,r.defaults=Od,r.defaultsDeep=Ld,r.defer=od,r.delay=id,r.difference=Ll,r.differenceBy=Rl,r.differenceWith=Cl,r.drop=ru,r.dropRight=nu,r.dropRightWhile=ou,r.dropWhile=iu,r.fill=uu,r.filter=na,r.flatMap=oa,r.flatMapDeep=ia,r.flatMapDepth=ua,r.flatten=su,r.flattenDeep=fu,r.flattenDepth=lu,r.flip=ja,r.flow=Kd,r.flowRight=Yd,r.fromPairs=du,r.functions=Cc,r.functionsIn=Ic,r.groupBy=Yl,r.initial=vu,r.intersection=Il,r.intersectionBy=Pl,r.intersectionWith=Ml,r.invert=Rd,r.invertBy=Cd,r.invokeMap=Xl,r.iteratee=Ts,r.keyBy=Jl,r.keys=kc,r.keysIn=Fc,r.map=fa,r.mapKeys=Dc,r.mapValues=Bc,r.matches=Os,r.matchesProperty=Ls,r.memoize=Ta,r.merge=Pd,r.mergeWith=Md,r.method=Xd,r.methodOf=Jd,r.mixin=Rs,r.negate=Oa,r.nthArg=Ps,r.omit=Nd,r.omitBy=zc,r.once=La,r.orderBy=la,r.over=Qd,r.overArgs=ud,r.overEvery=tp,r.overSome=ep,r.partial=ad,r.partialRight=cd,r.partition=Ql,r.pick=kd,r.pickBy=Uc,r.property=Ms,r.propertyOf=Ns,r.pull=Nl,r.pullAll=bu,r.pullAllBy=wu,r.pullAllWith=xu,r.pullAt=kl,r.range=rp,r.rangeRight=np,r.rearg=sd,r.reject=ha,r.remove=Au,r.rest=Ra,r.reverse=Eu,r.sampleSize=ga,r.set=qc,r.setWith=Vc,r.shuffle=ya,r.slice=Su,r.sortBy=td,r.sortedUniq=Iu,r.sortedUniqBy=Pu,r.split=ls,r.spread=Ca,r.tail=Mu,r.take=Nu,r.takeRight=ku,r.takeRightWhile=Fu,r.takeWhile=Du,r.tap=$u,r.throttle=Ia,r.thru=Zu,r.toArray=gc,r.toPairs=Fd,r.toPairsIn=Dd,r.toPath=Hs,r.toPlainObject=wc,r.transform=Wc,r.unary=Pa,r.union=Fl,r.unionBy=Dl,r.unionWith=Bl,r.uniq=Bu,r.uniqBy=zu,r.uniqWith=Uu,r.unset=Gc,r.unzip=Hu,r.unzipWith=qu,r.update=$c,r.updateWith=Zc,r.values=Kc,r.valuesIn=Yc,r.without=zl,r.words=ws,r.wrap=Ma,r.xor=Ul,r.xorBy=Hl,r.xorWith=ql,r.zip=Vl,r.zipObject=Vu,r.zipObjectDeep=Wu,r.zipWith=Wl,r.entries=Fd,r.entriesIn=Dd,r.extend=Ed,r.extendWith=Sd,Rs(r,r),r.add=op,r.attempt=$d,r.camelCase=Bd,r.capitalize=ts,r.ceil=ip,r.clamp=Xc,r.clone=ka,r.cloneDeep=Da,r.cloneDeepWith=Ba,r.cloneWith=Fa,r.conformsTo=za,r.deburr=es,r.defaultTo=Ss,r.divide=up,r.endsWith=rs,r.eq=Ua,r.escape=ns,r.escapeRegExp=os,r.every=ra,r.find=Zl,r.findIndex=au,r.findKey=Sc,r.findLast=Kl,r.findLastIndex=cu,r.findLastKey=jc,r.floor=ap,r.forEach=aa,r.forEachRight=ca,r.forIn=Tc,r.forInRight=Oc,r.forOwn=Lc,r.forOwnRight=Rc,r.get=Pc,r.gt=fd,r.gte=ld,r.has=Mc,r.hasIn=Nc,r.head=pu,r.identity=js,r.includes=sa,r.indexOf=hu,r.inRange=Jc,r.invoke=Id,r.isArguments=dd,r.isArray=pd,r.isArrayBuffer=hd,r.isArrayLike=Ha,r.isArrayLikeObject=qa,r.isBoolean=Va,r.isBuffer=vd,r.isDate=gd,r.isElement=Wa,r.isEmpty=Ga,r.isEqual=$a,r.isEqualWith=Za,r.isError=Ka,r.isFinite=Ya,r.isFunction=Xa,r.isInteger=Ja,r.isLength=Qa,r.isMap=yd,r.isMatch=rc,r.isMatchWith=nc,r.isNaN=oc,r.isNative=ic,r.isNil=ac,r.isNull=uc,r.isNumber=cc,r.isObject=tc,r.isObjectLike=ec,r.isPlainObject=sc,r.isRegExp=md,r.isSafeInteger=fc,r.isSet=_d,r.isString=lc,r.isSymbol=dc,r.isTypedArray=bd,r.isUndefined=pc,r.isWeakMap=hc,r.isWeakSet=vc,r.join=gu,r.kebabCase=zd,r.last=yu,r.lastIndexOf=mu,r.lowerCase=Ud,r.lowerFirst=Hd,r.lt=wd,r.lte=xd,r.max=Vs,r.maxBy=Ws,r.mean=Gs,r.meanBy=$s,r.min=Zs,r.minBy=Ks,r.stubArray=ks,r.stubFalse=Fs,r.stubObject=Ds,r.stubString=Bs,r.stubTrue=zs,r.multiply=cp,r.nth=_u,r.noConflict=Cs,r.noop=Is,r.now=ed,r.pad=is,r.padEnd=us,r.padStart=as,r.parseInt=cs,r.random=Qc,r.reduce=da,r.reduceRight=pa,r.repeat=ss,r.replace=fs,r.result=Hc,r.round=sp,r.runInContext=t,r.sample=va,r.size=ma,r.snakeCase=qd,r.some=_a,r.sortedIndex=ju,r.sortedIndexBy=Tu,r.sortedIndexOf=Ou,r.sortedLastIndex=Lu,r.sortedLastIndexBy=Ru,r.sortedLastIndexOf=Cu,r.startCase=Vd,r.startsWith=ds,r.subtract=fp,r.sum=Ys,r.sumBy=Xs,r.template=ps,r.times=Us,r.toFinite=yc,r.toInteger=mc,r.toLength=_c,r.toLower=hs,r.toNumber=bc,r.toSafeInteger=xc,r.toString=Ac,r.toUpper=vs,r.trim=gs,r.trimEnd=ys,r.trimStart=ms,r.truncate=_s,r.unescape=bs,r.uniqueId=qs,r.upperCase=Wd,r.upperFirst=Gd,r.each=aa,r.eachRight=ca,r.first=pu,Rs(r,function(){var t={};return ln(r,function(e,n){pf.call(r.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),r.VERSION="4.17.5",a(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){r[t].placeholder=r}),a(["drop","take"],function(t,e){m.prototype[t]=function(r){r=r===nt?1:Hf(mc(r),0);var n=this.__filtered__&&!e?new m(this):this.clone();return n.__filtered__?n.__takeCount__=qf(r,n.__takeCount__):n.__views__.push({size:qf(r,Nt),type:t+(n.__dir__<0?"Right":"")}),n},m.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),a(["filter","map","takeWhile"],function(t,e){var r=e+1,n=r==Lt||3==r;m.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:mi(t,3),type:r}),e.__filtered__=e.__filtered__||n,e}}),a(["head","last"],function(t,e){var r="take"+(e?"Right":"");m.prototype[t]=function(){return this[r](1).value()[0]}}),a(["initial","tail"],function(t,e){var r="drop"+(e?"":"Right");m.prototype[t]=function(){return this.__filtered__?new m(this):this[r](1)}}),m.prototype.compact=function(){return this.filter(js)},m.prototype.find=function(t){return this.filter(t).head()},m.prototype.findLast=function(t){return this.reverse().find(t)},m.prototype.invokeMap=to(function(t,e){return"function"==typeof t?new m(this):this.map(function(r){return An(r,t,e)})}),m.prototype.reject=function(t){return this.filter(Oa(mi(t)))},m.prototype.slice=function(t,e){t=mc(t);var r=this;return r.__filtered__&&(t>0||e<0)?new m(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),e!==nt&&(e=mc(e),r=e<0?r.dropRight(-e):r.take(e-t)),r)},m.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},m.prototype.toArray=function(){return this.take(Nt)},ln(m.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),u=r[i?"take"+("last"==e?"Right":""):e],a=i||/^find/.test(e);u&&(r.prototype[e]=function(){var e=this.__wrapped__,c=i?[1]:arguments,s=e instanceof m,f=c[0],l=s||pd(e),d=function(t){var e=u.apply(r,h([t],c));return i&&p?e[0]:e};l&&n&&"function"==typeof f&&1!=f.length&&(s=l=!1);var p=this.__chain__,v=!!this.__actions__.length,g=a&&!p,y=s&&!v;if(!a&&l){e=y?e:new m(this);var _=t.apply(e,c);return _.__actions__.push({func:Zu,args:[d],thisArg:nt}),new o(_,p)}return g&&y?t.apply(this,c):(_=this.thru(d),g?i?_.value()[0]:_.value():_)})}),a(["pop","push","shift","sort","splice","unshift"],function(t){var e=cf[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",o=/^(?:pop|shift)$/.test(t);r.prototype[t]=function(){var t=arguments;if(o&&!this.__chain__){var r=this.value();return e.apply(pd(r)?r:[],t)}return this[n](function(r){return e.apply(pd(r)?r:[],t)})}}),ln(m.prototype,function(t,e){var n=r[e];if(n){var o=n.name+"";(el[o]||(el[o]=[])).push({name:e,func:n})}}),el[Ko(nt,gt).name]=[{name:"wrapper",func:nt}],m.prototype.clone=T,m.prototype.reverse=Y,m.prototype.value=tt,r.prototype.at=Gl,r.prototype.chain=Ku,r.prototype.commit=Yu,r.prototype.next=Xu,r.prototype.plant=Qu,r.prototype.reverse=ta,r.prototype.toJSON=r.prototype.valueOf=r.prototype.value=ea,r.prototype.first=r.prototype.head,Lf&&(r.prototype[Lf]=Ju),r}();Rr._=Gr,(o=function(){return Gr}.call(e,r,e,n))!==nt&&(n.exports=o)}).call(this)}).call(e,r(41),r(31)(t))},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){u.default.disableIdentifyMode(t);var r=e.MapboxDraw,n=a.default;n.mapboxgl=e.mapboxgl,n.tableName=e.tableName,n.kineticaUrl=e.kineticaUrl,n.radiusInMeters=e.radiusInMeters,n.handlerRegistry=[],n.popupId="popup-"+e.layerId,n.popupInstance=new e.mapboxgl.Popup({closeButton:!1,closeOnClick:!1}),n.spin=new i.Spinner({color:"#CCC",lines:12}),n.collection=e.collection,e.xAttr&&e.yAttr?(n.xAttr=e.xAttr,n.yAttr=e.yAttr):e.geoAttr&&(n.geoAttr=e.geoAttr),e.transformations&&n.registerTransformations(e.transformations),u.default.modes[e.layerId]=n,u.default.controls[e.layerId]=new r({defaultMode:"identify_mode",controls:{point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1},modes:Object.assign({identify_mode:n},r.modes)}),u.default.modes[e.layerId]=n,t.addControl(u.default.controls[e.layerId],"top-left")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(94),u=n(r(57)),a=n(r(284)),c={enableIdentifyByPointMode:o};"undefined"!=typeof ENV_TESTING&&!0===ENV_TESTING&&(c._identifyByPoint_spec={modes:u.default.modes,controls:u.default.controls});var s=c;e.default=s},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(r(16)),i=n(r(96)),u=n(r(97)),a=n(r(98)),c=n(r(10)),s=r(99),f={cloneDeep:o.default},l={};l.onSetup=function(t){var e={};return e.count=t.count||0,e},l.disableMode=function(){this.unregisterClickHandlers(this.popupId),this.popupInstance.remove()},l.onClick=function(t,e){t.count+=1,1===t.count?this._showPopup(t,e):(this.popupInstance&&(this.unregisterClickHandlers(this.popupId),this.popupInstance.remove()),t.count=0)},l.onMouseMove=function(t,e){},l.onKeyUp=function(t,e){},l.toDisplayFeatures=function(t,e,r){r(e)},l.registerTransformations=function(t){this.transformations=t},l._showPopup=function(t,e){var r=this,n=this,o=[e.lngLat.lng,e.lngLat.lat];if(o){this.popupInstance.setLngLat(o).addTo(this.map),a.default.showLoading(this.popupId,this.spin);var u={offset:0,geometry:{center:o,radius:this.radiusInMeters},tableName:n.tableName,viewName:"".concat(n.tableName,"-").concat((0,i.default)()),collection:n.collection};return this.xAttr&&this.yAttr?(u.xAttr=this.xAttr,u.yAttr=this.yAttr):this.geoAttr&&(u.geoAttr=this.geoAttr),this.lastFilter=u,this.filterAndGetRecords(u).then(function(){r._registerClickHandlers(r.popupId)})}},l._renderTemplate=function(t,e,r){var n=this,o=s({popupId:t,expression:e.expression,recordIndex:e.offset+1,records:r.records,recordTotal:r.recordCount,radius:e.geometry.radius,latitude:e.geometry.center[1],longitude:e.geometry.center[0]});n.popupInstance.setHTML(o),a.default.hideLoading(t,this.spin),0===r.records.length?a.default.noResultsFound(this.popupId):a.default.showResultCount(this.popupId)},l._registerClickHandlers=function(t){var e=this;this._registerHandler(t,"btn-next","click",e._incrementRecord.bind(this,t)),this._registerHandler(t,"btn-prev","click",e._decrementRecord.bind(this,t)),this._registerHandler(t,"btn-filter-view","click",a.default.toggleView.bind(this,t,"filter-view")),this._registerHandler(t,"btn-apply-filter","click",e._applyFilter.bind(this,t)),this._registerHandler(t,"btn-clear-filter","click",e._clearFilter.bind(this,t))},l.unregisterClickHandlers=function(t){for(var e=0;e<this.handlerRegistry.length;e++){var r=this.handlerRegistry[e],n=document.querySelector("#".concat(t," .").concat(r.className));n&&n.removeEventListener&&n.removeEventListener(r.eventType,r)}this.handlerRegistry=[]},l._registerHandler=function(t,e,r,n){n.id="".concat(e,"-").concat(r),n.eventType=r,n.className=e,document.querySelector("#".concat(t," .").concat(e)).addEventListener(r,n),this.handlerRegistry.push(n)},l._incrementRecord=function(t,e){var r=this,n=this;c.default.debug("Incrementing record...");var o=a.default.getActiveIndex(t);if(!o&&0!==o)return void c.default.warn("No record was currently active");var i=f.cloneDeep(n.lastFilter),s=i.offset+o;if(s+1!==this.recordTotal){if(9===o){i.offset=i.offset+10,this.lastFilter=i,a.default.showLoading(t,this.spin);var l=n._getCurrentViewName(n.lastFilter);return void u.default.getRecords(n.kineticaUrl,l,i.offset).then(function(e){n._renderTemplate(t,i,e),a.default.setActiveRecord(t,0,i.offset),r.lastFilter.expression&&a.default.appliedFilter(t),n._registerClickHandlers(t)})}o+=1,s+=1,a.default.setActiveRecord(t,o,s)}},l._decrementRecord=function(t,e){var r=this,n=this;c.default.debug("Decrementing record...");var o=a.default.getActiveIndex(t);if(-1===o)return void c.default.warn("No record was currently active");var i=f.cloneDeep(n.lastFilter),s=i.offset+o;if(0!==s){if(0===o){i.offset=i.offset-10,this.lastFilter=i,a.default.showLoading(t,this.spin);var l=this._getCurrentViewName(n.lastFilter);return void u.default.getRecords(n.kineticaUrl,l,i.offset).then(function(e){n._renderTemplate(t,i,e),s-=1,a.default.setActiveRecord(t,9,s),r.lastFilter.expression&&a.default.appliedFilter(t),n._registerClickHandlers(t)})}o-=1,s-=1,a.default.setActiveRecord(t,o,s)}},l._applyFilter=function(t,e){var r=this;if(this.lastFilter.expression=a.default.getExpression(t),a.default.toggleView(t,"filter-view"),!this.lastFilter.expression)return this.lastFilter.filteredViewName=null,void a.default.removedFilter(t);c.default.debug("Applying expression filter...",this.lastFilter),this.filterViewAndGetRecords(this.lastFilter).then(function(){a.default.appliedFilter(t),r._registerClickHandlers(t)})},l._getCurrentViewName=function(t){return t.filteredViewName?t.filteredViewName:t.viewName?t.viewName:t.tableName},l.filterViewAndGetRecords=function(t){var e=this,r=this;return t.filteredViewName=this.lastFilter.viewName+"-"+(0,i.default)(),t.offset=0,u.default.filterRecords(this.kineticaUrl,t.viewName,t).then(function(){return u.default.getRecords(r.kineticaUrl,t.filteredViewName,t.offset,r.transformations).then(function(n){e.recordTotal=n.recordCount,r._renderTemplate(e.popupId,t,n),a.default.setActiveRecord(e.popupId,0,t.offset)})}).catch(function(t){c.default.error("Error querying Kinetica...",t)})},l.filterAndGetRecords=function(t,e){var r=this,n=this;return u.default.filterRecordsByRadius(n.kineticaUrl,t.tableName,t).then(function(){return u.default.getRecords(n.kineticaUrl,t.viewName,t.offset,n.transformations).then(function(e){r.recordTotal=e.recordCount,n._renderTemplate(r.popupId,t,e),a.default.setActiveRecord(r.popupId,0,t.offset)})}).catch(function(t){c.default.error("Error querying Kinetica...",t),e&&n._removeBuffer(e,null)})},l._clearFilter=function(t){var e=this;e.lastFilter.expression=null,a.default.removedFilter(t),a.default.clearExpression(t),a.default.toggleView(t,"filter-view"),u.default.getRecords(e.kineticaUrl,e.lastFilter.viewName,e.lastFilter.offset,e.transformations).then(function(r){e.recordTotal=r.recordCount,e._renderTemplate(t,e.lastFilter,r),a.default.setActiveRecord(t,0,e.lastFilter.offset),e._registerClickHandlers(e.popupId)}),c.default.debug("Clearing expression filter...",e.lastFilter)};var d=l;e.default=d},function(t,e,r){"use strict";function n(){return o}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={STYLES:"labels",LABEL_TEXT_STRING:"",LABEL_FONT:"",LABEL_TEXT_COLOR:"FF000000",LABEL_TEXT_SCALE:1,LABEL_TEXT_ANGLE:0,LABEL_DRAW_BOX:0,LABEL_DRAW_LEADER:0,LABEL_LINE_WIDTH:1,LABEL_LINE_COLOR:"FF000000",LABEL_FILL_COLOR:"FF000000",LABEL_LEADER_X_ATTR:"",LABEL_LEADER_Y_ATTR:"",LABEL_FILTER:""},i={getLayerDefaults:n};e.default=i},function(t,e,r){"use strict";function n(){return o}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={STYLES:"raster",USE_POINT_RENDERER:!0,DOPOINTS:!0,DOSHAPES:!0,DOSYMBOLOGY:!1,DOTRACKS:!0,HASHLINEANGLES:0,HASHLINECOLORS:"FFFF00",HASHLINEINTERVALS:20,HASHLINELENS:1,HASHLINEWIDTHS:3,ORDER_LAYERS:"",POINTCOLORS:"FF0000",SHAPELINECOLORS:"FFFF00",POINTOFFSET_X:0,POINTOFFSET_Y:0,POINTSHAPES:"circle",POINTSIZES:3,SHAPEFILLCOLORS:-1,SHAPELINEPATTERNLENS:1,SHAPELINEPATTERNS:0,SHAPELINEWIDTHS:3,SYMBOLROTATIONS:"",TRACKHEADCOLORS:"FFFFFF",TRACKHEADSHAPES:"circle",TRACKHEADSIZES:10,TRACKLINECOLORS:"00FF00",TRACKLINEWIDTHS:3,TRACKMARKERCOLORS:"0000FF",TRACKMARKERSHAPES:"none",TRACKMARKERSIZES:2},i={getLayerDefaults:n};e.default=i}]).default});